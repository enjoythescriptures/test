(window.webpackJsonpenjoythescriptures=window.webpackJsonpenjoythescriptures||[]).push([[0],{30:function(e,t,a){e.exports=a(53)},32:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);a(31),a(32);var n=a(1),r=a.n(n),s=a(23),c=a.n(s),u=a(16),l=a(10),o=a(24),i=a.n(o),m=a(8),E=a.n(m),p=a(29);var h={apiKey:"AIzaSyCJ8QdL00_QZlNHsdlLo_z_ROHV550HN20",authDomain:"enjoy-the-scriptures.firebaseapp.com",databaseURL:"https://enjoy-the-scriptures.firebaseio.com",projectId:"enjoy-the-scriptures",storageBucket:"enjoy-the-scriptures.appspot.com",messagingSenderId:"812786960298",appId:"1:812786960298:web:5692ec20094481a1304dd3",measurementId:"G-Q6Q0Z99K1H"},d=E.a.initializeApp(h),f=E.a.firestore(d);function N(e,t){switch(t.type){case"LOGGED_OUT":return{user:null,status:"LOGGED_OUT"};case"PENDING":return{user:t.user,status:"PENDING"};case"LOGGED_IN":return{user:t.user,status:"LOGGED_IN"};case"UNAUTHORIZED":return{user:t.user,status:"UNAUTHORIZED"};default:throw new Error}}var v=function(){var e=r.a.useReducer(N,{user:null,status:"LOGGED_OUT"}),t=Object(p.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){return E.a.auth().onAuthStateChanged((function(e){null===e?n({type:"LOGGED_OUT"}):(n({type:"PENDING",user:e}),function(e){var t=f.collection("users").doc(e);return new Promise((function(e,a){t.get().then((function(t){t.exists&&!0===t.data().admin?e(!0):e(!1)})).catch((function(e){console.error("Error getting document: ",e),a(e)}))}))}(e.email).then((function(t){n(t?{type:"LOGGED_IN",user:e}:{type:"UNAUTHORIZED",user:e})})))}))}),[]),a},g={signInFlow:"popup",signInOptions:[E.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};var b=function(){var e=v();return r.a.useEffect((function(){"UNAUTHORIZED"===e.status&&e.user.delete().catch((function(e){console.log("An error occurred while deleting an unauthorized user. ",e)}))}),[e]),"UNAUTHORIZED"===e.status?r.a.createElement(l.a,{to:"/unauthorized"}):"LOGGED_IN"===e.status?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(i.a,{uiConfig:g,firebaseAuth:E.a.auth()}))},y=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Home"))},G=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"This is me."))};var O=function(){var e=v();return"LOGGED_IN"===e.status?r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("span",{className:"text-light my-2 mr-sm-2"},e.user.email),r.a.createElement("button",{className:"btn btn-success my-2 my-sm-0",onClick:function(){return E.a.auth().signOut()},type:"submit"},"Logout")):r.a.createElement(r.a.Fragment,null)};var I=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand",href:"#/"},"Enjoy the Scriptures"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/about"},"About"))),r.a.createElement(O,null)))};var D=function(){var e;return"LOGGED_OUT"===v().status&&(e=r.a.createElement("a",{className:"text-muted",href:"#/login"},"Login")),r.a.createElement("footer",{className:"page-footer font-small bg-light fixed-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"footer-copyright text-center py-2"},"\xa9 2019 Copyright:\xa0",r.a.createElement("a",{href:""},"enjoythescriptures.org")),r.a.createElement("div",{className:"text-center py-2"},e)))};function U(){return r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("h4",{className:"alert-heading"},"User Not Found"),r.a.createElement("p",{className:"mb-0"},"You are not authorized to access this resource."),r.a.createElement("a",{className:"alert-link",href:"#/"},"Return Home"))}var L=function(){return r.a.createElement(u.a,{basename:"/"},r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement("div",{className:"container py-5"},r.a.createElement(l.b,{exact:!0,path:"/",component:y}),r.a.createElement(l.b,{path:"/about",component:G}),r.a.createElement(l.b,{path:"/login",component:b}),r.a.createElement(l.b,{path:"/unauthorized",component:U})),r.a.createElement(D,null)))};c.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.5707ed9a.chunk.js.map