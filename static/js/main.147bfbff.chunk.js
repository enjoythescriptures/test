(window.webpackJsonpenjoythescriptures=window.webpackJsonpenjoythescriptures||[]).push([[0],{27:function(e,a,t){e.exports=t(45)},29:function(e,a,t){},45:function(e,a,t){"use strict";t.r(a);t(28),t(29);var n=t(0),r=t.n(n),s=t(21),c=t.n(s),l=t(13),m=t(7),u=t(22),o=t.n(u),i=t(1),E=t.n(i),h=t(26);var p={apiKey:"AIzaSyDcWkM-EwFO9BrLbHAiZf_NcPKT1jg_B4M",authDomain:"enjoy-the-scriptures-test.firebaseapp.com",databaseURL:"https://enjoy-the-scriptures-test.firebaseio.com",projectId:"enjoy-the-scriptures-test",storageBucket:"",messagingSenderId:"854443437513",appId:"1:854443437513:web:b0f58f35a8d4a823c64c18",measurementId:"G-EDCKCQPLL0"},v=E.a.initializeApp(p),f=(t(19),t(38),E.a.firestore(v));function d(e,a){switch(a.type){case"LOGGED_OUT":return{user:null,status:"LOGGED_OUT"};case"PENDING":return{user:a.user,status:"PENDING"};case"LOGGED_IN":return{user:a.user,status:"LOGGED_IN"};case"UNAUTHORIZED":return{user:a.user,status:"UNAUTHORIZED"};default:throw new Error}}var N=function(){var e=r.a.useReducer(d,{user:null,status:"LOGGED_OUT"}),a=Object(h.a)(e,2),t=a[0],n=a[1];return r.a.useEffect((function(){return E.a.auth().onAuthStateChanged((function(e){null===e?n({type:"LOGGED_OUT"}):(n({type:"PENDING",user:e}),function(e){var a=f.collection("users").doc(e);return new Promise((function(e,t){a.get().then((function(a){a.exists&&!0===a.data().admin?e(!0):e(!1)})).catch((function(e){console.error("Error getting document: ",e),t(e)}))}))}(e.email).then((function(a){n(a?{type:"LOGGED_IN",user:e}:{type:"UNAUTHORIZED",user:e})})))}))}),[]),t},g={signInFlow:"popup",signInOptions:[E.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};var b=function(){var e=N();return r.a.useEffect((function(){"UNAUTHORIZED"===e.status&&e.user.delete().catch((function(e){console.log("An error occurred while deleting an unauthorized user. ",e)}))}),[e]),"UNAUTHORIZED"===e.status?r.a.createElement(m.a,{to:"/unauthorized"}):"LOGGED_IN"===e.status?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(o.a,{uiConfig:g,firebaseAuth:E.a.auth()}))};var y=function(){return r.a.createElement("img",{alt:"A pathway with trees on either side in autumn",src:"/background.jpg",style:{width:"100%",height:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}})},G=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"This is me."))};var O=function(){var e=N();return"LOGGED_IN"===e.status?r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("span",{className:"text-light my-2 mr-sm-2"},e.user.email),r.a.createElement("button",{className:"btn btn-success my-2 my-sm-0",onClick:function(){return E.a.auth().signOut()},type:"submit"},"Logout")):r.a.createElement(r.a.Fragment,null)};var D=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand",href:"#/"},"Enjoy the Scriptures"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/about"},"About"))),r.a.createElement(O,null))),r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-success"},r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"navbar-nav m-auto text-center"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/volume"},"Old Testament")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/volume"},"New Testament")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/volume"},"Book of Mormon")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/volume"},"Doctrine & Covenants")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/volume"},"Pearl of Great Price"))),r.a.createElement(O,null))))};var I=function(){var e;return"LOGGED_OUT"===N().status&&(e=r.a.createElement("a",{className:"text-muted",href:"#/login"},"Login")),r.a.createElement("footer",{className:"page-footer font-small bg-light fixed-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"footer-copyright text-center py-2"},"\xa9 2019 Copyright:\xa0",r.a.createElement("a",{href:"https://test.enjoythescriptures.org"},"https://test.enjoythescriptures.org".replace("https://",""))),r.a.createElement("div",{className:"text-center py-2"},e)))};function k(){return r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("h4",{className:"alert-heading"},"User Not Found"),r.a.createElement("p",{className:"mb-0"},"You are not authorized to access this resource."),r.a.createElement("a",{className:"alert-link",href:"#/"},"Return Home"))}var w=function(){return r.a.createElement(l.a,{basename:"/"},r.a.createElement("div",{className:"App"},r.a.createElement(D,null),r.a.createElement(m.b,{exact:!0,path:"/",component:y}),r.a.createElement("div",{className:"container py-5"},r.a.createElement(m.b,{path:"/about",component:G}),r.a.createElement(m.b,{path:"/login",component:b}),r.a.createElement(m.b,{path:"/unauthorized",component:k})),r.a.createElement(I,null)))};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.147bfbff.chunk.js.map