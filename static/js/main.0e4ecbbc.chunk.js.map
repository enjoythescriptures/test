{"version":3,"sources":["components/About.js","components/Background.js","components/LoadingBar.js","firebase/FirebaseConfig.js","model/Verse.js","model/Insight.js","firebase/ScriptureCache.js","components/BookListPage.js","components/Breadcrumb.js","components/ChapterListPage.js","components/VerseHighlightContext.js","components/SingleVerse.js","components/ChapterTextPage.js","firebase/FirebaseUser.js","components/Footer.js","components/Home.js","components/AddInsight.js","util/InsightGroups.js","components/SingleInsight.js","components/InsightGroup.js","components/InsightList.js","components/InsightListPage.js","components/LoginScreen.js","components/UserStatus.js","components/Navbar.js","components/NotFound.js","components/Unauthorized.js","components/VolumeListPage.js","components/App.js","index.js"],"names":["About","Background","alt","src","style","position","top","zIndex","width","height","backgroundPosition","backgroundRepeat","backgroundSize","opacity","LoadingBar","className","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","firebase","initializeApp","Verse","volumeName","bookName","chapter","number","text","this","volume","book","n","join","split","map","s","substring","Insight","id","verseId","deltaOps","fragment","source","db","firestore","volumes","books","chapterCounts","verseCounts","verses","buildVerseList","Object","keys","buildInsight","doc","data","i","label","link","created","toDate","updated","ScriptureCache","cb","length","get","then","catch","err","console","error","fetchVolumes","undefined","fetchBooks","chapterCount","fetchChapterCount","verseCount","toString","fetchVerseCount","collection","querySnapshot","docs","forEach","fetchVerses","verse","getVerses","verseList","getVerseId","where","fetchInsights","insight","vid","o","f","l","a","u","FieldValue","serverTimestamp","c","add","set","BookListPage","content","match","params","React","useState","setBooks","scriptureCache","useEffect","getBooks","href","key","role","replace","buildButton","toBreadcrumb","segment","Breadcrumb","props","segments","concat","location","pathname","filter","seg","crumbs","last","classNames","backgroundColor","marginBottom","ChapterListPage","setChapterCount","getChapterCount","push","VerseHighlightContext","createContext","SingleVerse","clickHandler","clickable","redirect","setRedirect","highlightContext","useContext","divStyle","getHref","to","verseContent","h","highlight","first","words","slice","onClick","ChapterTextPage","setVerses","v","firebaseUserReducer","state","action","type","user","status","Error","useFirebaseUser","useReducer","dispatch","auth","onAuthStateChanged","email","docRef","Promise","resolve","reject","exists","userIsAuthorized","isAuthorized","withRouter","loginButton","userState","process","Home","AddInsight","setInsight","toggle","sliderRef","createRef","editorRef","isSubmitting","setSubmitting","lastWord","sliderNode","current","noUiSlider","create","start","connect","range","step","on","values","handle","updateHighlight","quill","Quill","theme","placeholder","setContents","d","od","getContents","ops","destroy","onSubmit","event","saveInsight","preventDefault","htmlFor","ref","required","value","onChange","target","disabled","compareInsightsByFragmentAndSource","b","compareIdx","r","localeCompare","groupInsights","insights","sort","groups","g","f1","f2","Array","from","groupInsightsByFragment","SingleInsight","rel","insightHtml","QuillDeltaToHtmlConverter","convert","onMouseEnter","onMouseLeave","parse","getMonth","getDate","getFullYear","InsightGroup","insightGroup","phrase","idx","btn","InsightList","insightContent","ig","DEFAULT_INSIGHT","InsightListPage","verseNumber","setVerse","setInsights","newInsight","setNewInsight","editing","setEditing","setHighlight","contextState","toggleEditing","getVerse","getInsights","Provider","uiConfig","signInFlow","signInOptions","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","LoginScreen","delete","log","returnTo","search","firebaseAuth","UserStatus","signOut","Navbar","data-toggle","data-target","aria-controls","aria-expanded","aria-label","NotFound","Unauthorized","VolumeListPage","setVolumes","getVolumes","ComingSoon","App","basename","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"0SAaeA,MAXf,WACE,OACE,6BACE,qCACA,sDCcSC,MAlBf,WAaE,OACE,yBAAKC,IAAI,gDAAgDC,IAAI,kBAAkBC,MAbnE,CACZC,SAAU,QACVC,IAAK,EACLC,QAAS,EACTC,MAAO,OACPC,OAAQ,OACRC,mBAAoB,SACpBC,iBAAkB,YAClBC,eAAgB,QAChBC,QAAS,U,OCFEC,MARf,WACE,OACE,yBAAKC,UAAU,mBACb,yBAAKb,IAAI,UAAUC,IAAI,iB,gCC2C7B,IAAMa,EAnCmB,CACvBC,OAAQ,0CACRC,WAAY,4CACZC,YAAa,mDACbC,UAAW,4BACXC,cAAe,GACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gBA8BFC,EAFKC,IAASC,cAAcX,GC1B5BY,G,iBAtBb,WAAYC,EAAYC,EAAUC,EAASC,EAAQC,GAAO,oBACxDC,KAAKC,OAASN,EACdK,KAAKE,KAAON,EACZI,KAAKH,QAAUA,EACfG,KAAKG,EAAIL,EACTE,KAAKD,KAAOA,E,sDAIZ,MAAO,CAAC,cAAeC,KAAKC,OAAQD,KAAKE,KAAMF,KAAKH,QAASG,KAAKG,GAAGC,KAAK,O,mCAI1E,MAAO,CACLJ,KAAKC,OAAOI,MAAM,KAAKC,KAAI,SAAAC,GAAC,OAAIA,EAAE,MAAIH,KAAK,IAC3CJ,KAAKE,KAAKG,MAAM,SAASC,KAAI,SAAAC,GAAC,OAAIA,EAAEC,UAAU,EAAG,MAAIJ,KAAK,KAC1DJ,KAAKH,QACLG,KAAKG,GACLC,KAAK,S,MCTIK,EATb,WAAYC,EAAIC,EAASC,EAAUC,EAAUC,GAAS,oBACpDd,KAAKU,GAAKA,EACVV,KAAKW,QAAUA,EACfX,KAAKY,SAAWA,EAChBZ,KAAKa,SAAWA,EAChBb,KAAKc,OAASA,GCCZC,EAAKvB,IAASwB,UAAUzB,GAE1B0B,EAAU,GACVC,EAAQ,GACRC,EAAgB,GAChBC,EAAc,GACdC,EAAS,GA2Db,SAASC,EAAerB,EAAQC,EAAML,GACpC,OAAO0B,OAAOC,KAAKH,EAAOpB,GAAQC,GAAML,IAAUS,KAAI,SAAUH,GAC9D,OAAO,IAAIT,EAAMO,EAAQC,EAAML,EAASM,EAAGkB,EAAOpB,GAAQC,GAAML,GAASM,OAI7E,SAASsB,EAAaC,GACpB,IAAIC,EAAOD,EAAIC,OACXC,EAAI,IAAInB,EAAQiB,EAAIhB,GAAIiB,EAAI,IAASA,EAAI,EAAOA,EAAI,EAAO,CAC7DE,MAAOF,EAAI,EAAJ,EACPG,KAAMH,EAAI,EAAJ,IAMR,OAHAC,EAAEG,QAAUJ,EAAI,EAAQA,EAAI,EAAMK,SAAW,KAC7CJ,EAAEK,QAAUN,EAAI,EAAQA,EAAI,EAAMK,SAAW,KAEtCJ,E,IAkGMM,E,mGApFFC,GACc,IAAnBlB,EAAQmB,OAxFhB,SAAsBD,GACpBpB,EAAGW,IAAI,oBAAoBW,MAAMC,MAAK,SAAUZ,GAC9CT,EAAUS,EAAIC,OAAJ,QACVQ,EAAGlB,MACFsB,OAAM,SAAUC,GACjBC,QAAQC,MAAM,2BAA4BF,MAoFxCG,CAAaR,GAGbA,EAAGlB,K,+BAIEhB,EAAQkC,QACOS,IAAlB1B,EAAMjB,IAAkD,IAAzBiB,EAAMjB,GAAQmC,OAxFrD,SAAoBnC,EAAQkC,GAC1BpB,EAAGW,IAAI,4BAA8BzB,GAAQoC,MAAMC,MAAK,SAAUZ,GAChER,EAAMjB,GAAUyB,EAAIC,OAAJ,MAChBQ,EAAGjB,EAAMjB,OACRsC,OAAM,SAAUC,GACjBC,QAAQC,MAAM,oCAAqCzC,EAAQuC,MAoFzDK,CAAW5C,EAAQkC,GAGnBA,EAAGjB,EAAMjB,M,sCAIGA,EAAQC,EAAMiC,QACES,IAA1BzB,EAAclB,SAAyD2C,IAAhCzB,EAAclB,GAAQC,GAxFrE,SAA2BD,EAAQC,EAAMiC,GACvCpB,EAAGW,IAAI,4BAA8BzB,EAAS,UAAYC,GAAMmC,MAAMC,MAAK,SAAUZ,GACnF,IAAMoB,EAAepB,EAAIC,OAAJ,SACrBR,EAAclB,GAAU,GACxBkB,EAAclB,GAAQC,GAAQ4C,EAC9BX,EAAGW,MACFP,OAAM,SAAUC,GACjBC,QAAQC,MAAM,oCAAsCzC,EAAS,KAAOC,EAAMsC,MAkFxEO,CAAkB9C,EAAQC,EAAMiC,GAGhCA,EAAGhB,EAAclB,GAAQC,M,oCAIfD,EAAQC,EAAML,EAASsC,QACPS,IAAxBxB,EAAYnB,SACgB2C,IAA9BxB,EAAYnB,GAAQC,SACmB0C,IAAvCxB,EAAYnB,GAAQC,GAAML,GAxFhC,SAAyBI,EAAQC,EAAML,EAASsC,GAC9CpB,EAAGW,IAAI,4BAA8BzB,EAAS,UAAYC,EAAO,aAAeL,GAASwC,MAAMC,MAAK,SAAUZ,GAC5G,IAAMsB,EAAatB,EAAIC,OAAJ,OACnBP,EAAYnB,GAAU,GACtBmB,EAAYnB,GAAQC,GAAQ,GAC5BkB,EAAYnB,GAAQC,GAAML,EAAQoD,YAAcD,EAChDb,EAAGa,MACFT,OAAM,SAAUC,GACjBC,QAAQC,MAAM,kCAAoCzC,EAAS,KAAOC,EAAO,aAAeL,EAAS2C,MAiF/FU,CAAgBjD,EAAQC,EAAML,EAASsC,GAGvCA,EAAGf,EAAYnB,GAAQC,GAAML,M,gCAIvBI,EAAQC,EAAML,EAASsC,QACRS,IAAnBvB,EAAOpB,SACgB2C,IAAzBvB,EAAOpB,GAAQC,SACmB0C,IAAlCvB,EAAOpB,GAAQC,GAAML,GAvF3B,SAAqBI,EAAQC,EAAML,EAASsC,QACnBS,IAAnBvB,EAAOpB,KAAuBoB,EAAOpB,GAAU,SACtB2C,IAAzBvB,EAAOpB,GAAQC,KAAqBmB,EAAOpB,GAAQC,GAAQ,SACzB0C,IAAlCvB,EAAOpB,GAAQC,GAAML,KAAwBwB,EAAOpB,GAAQC,GAAML,GAAW,IAEjFkB,EAAGoC,WAAW,4BAA8BlD,EAAS,UAAYC,EAAO,aAAeL,EAAU,WAAWwC,MAAMC,MAAK,SAAUc,GAC/HA,EAAcC,KAAKC,SAAQ,SAAU5B,GACnCL,EAAOpB,GAAQC,GAAML,GAAS6B,EAAIhB,IAAMgB,EAAIC,OAAJ,QAG1CQ,EAAGb,EAAerB,EAAQC,EAAML,OAC/B0C,OAAM,SAAUC,GACjBC,QAAQC,MAAM,6BAA+BzC,EAAS,KAAOC,EAAO,aAAeL,EAAS2C,MA4E1Fe,CAAYtD,EAAQC,EAAML,EAASsC,GAGnCA,EAAGb,EAAerB,EAAQC,EAAML,M,+BAI3BI,EAAQC,EAAML,EAAS2D,EAAOrB,GACrCnC,KAAKyD,UAAUxD,EAAQC,EAAML,GAAS,SAAU6D,GAC9CvB,EAAGuB,EAAUF,EAAQ,S,kCAIbvD,EAAQC,EAAML,EAAS2D,EAAOrB,IAlE5C,SAAuBqB,EAAOrB,GAC5B,IAAMxB,EAAU6C,EAAMG,aACtB5C,EAAGoC,WAAW,YAAYS,MAAM,MAAO,KAAMjD,GAAS0B,MAAMC,MAAK,SAAUc,GACzEjB,EAAGiB,EAAcC,KAAK/C,IAAImB,OACzBc,OAAM,SAAUC,GACjBC,QAAQC,MAAM,+CAAgD/B,EAAS6B,MA8DvEqB,CAAc,IAAInE,EAAMO,EAAQC,EAAML,EAAS2D,GAAQrB,K,kCAG7C2B,GACV,IAAInC,EAAO,CACToC,IAAKD,EAAQnD,QACbqD,EAAGF,EAAQlD,SACXqD,EAAGH,EAAQjD,SACXN,EAAG,CACD2D,EAAGJ,EAAQhD,OAAOe,MAClBsC,EAAGL,EAAQhD,OAAOgB,MAEpBsC,EAAG5E,IAASwB,UAAUqD,WAAWC,mBAGnC,YAAmB1B,IAAfkB,EAAQpD,IAEViB,EAAK4C,EAAI/E,IAASwB,UAAUqD,WAAWC,kBAChCvD,EAAGoC,WAAW,YAAYqB,IAAI7C,KAIrCA,EAAK4C,EAAIT,EAAQ/B,QACVhB,EAAGoC,WAAW,YAAYzB,IAAIoC,EAAQpD,IAAI+D,IAAI9C,Q,KC1I5C+C,MA3Bf,YAA0D,IASpDC,EATqC1E,EAAc,EAAjC2E,MAASC,OAAU5E,OAAc,EAC7B6E,IAAMC,SAAS,IADc,mBAChD7D,EADgD,KACzC8D,EADyC,KAEjDC,EAAiB,IAAI/C,EAe3B,OAbA4C,IAAMI,WAAU,WACdD,EAAeE,SAASlF,EAAQ+E,KAE/B,IAIDL,EADmB,IAAjBzD,EAAMkB,OACE,kBAAC,EAAD,MAGAlB,EAAMZ,KAAI,SAAAuB,GAAK,OAzB7B,SAAqB5B,EAAQ4B,GAC3B,IACMuD,EAAO,gBAAkBnF,EAAS,IAAM4B,EAE9C,OACE,yBAAKwD,IAAKD,EAAMvG,UAAU,sCACxB,uBAAGuG,KAAMA,EAAME,KAAK,SAASzG,UALjB,qDAKsCgD,EAAM0D,QAAQ,KAAM,OAmB3CC,CAAYvF,EAAQ4B,MAIjD,6BACE,wBAAIhD,UAAU,mBAAmBoB,EAAOsF,QAAQ,KAAM,MACtD,yBAAK1G,UAAU,OACZ8F,KCnCT,SAASc,EAAaC,GACpB,OAAOA,EAAQH,QAAQ,KAAM,KAuChBI,MApCf,SAAoBC,GAClB,IAAMC,EAAW,CAAC,QAAQC,OAAOF,EAAMG,SAASC,SAASxF,UAAU,GAAGH,MAAM,KAAK4F,QAAO,SAAAC,GAAG,MAAY,KAARA,MAC3Fd,EAAO,IACLe,EAASN,EAASvF,KAAI,SAAUC,EAAGqB,GACvC,IAAIwE,EAAOxE,IAAMiE,EAASzD,OAAS,EAE/BR,EAAI,IACNwD,GAAQ,IAAM7E,GAGhB,IAAIsB,EAAQ,uBAAGuD,KAAMA,GAAOK,EAAalF,IAErC8F,EAAa,kCAMjB,OALID,IACFC,GAAc,UACdxE,EAAQ4D,EAAalF,IAIrB,wBAAI8E,IAAKD,EAAMvG,UAAWwH,GACvBxE,MAKP,OACE,yBAAK3D,MAAO,CAAEoI,gBAAiB,YAC7B,yBAAKzH,UAAU,aACb,wBAAIA,UAAU,aAAaX,MAAO,CAAEqI,aAAc,MAC/CJ,MC9BX,SAASX,EAAYvF,EAAQC,EAAML,GACjC,IACMuF,EAAO,gBAAkBnF,EAAS,IAAMC,EAAO,IAAML,EAE3D,OACE,yBAAKwF,IAAKD,EAAMvG,UAAU,mCACxB,uBAAGuG,KAAMA,EAAME,KAAK,SAASzG,UALjB,qDAKsCgB,IAmCzC2G,MA9Bf,YAAmE,IAS7D7B,EAT4D,IAAvCC,MAASC,OAAU5E,EAAoB,EAApBA,OAAQC,EAAY,EAAZA,KAAY,EACxB4E,IAAMC,SAAS,GADS,mBACzDjC,EADyD,KAC3C2D,EAD2C,KAE1DxB,EAAiB,IAAI/C,EAQ3B,GANA4C,IAAMI,WAAU,WACdD,EAAeyB,gBAAgBzG,EAAQC,EAAMuG,KAE5C,IAGkB,IAAjB3D,EACF6B,EAAU,kBAAC,EAAD,UAEP,CACHA,EAAU,GACV,IAAK,IAAIJ,EAAI,EAAGA,GAAKzB,EAAcyB,IACjCI,EAAQgC,KAAKnB,EAAYvF,EAAQC,EAAMqE,IAI3C,OACE,6BACE,wBAAI1F,UAAU,mBAAmBqB,EAAKqF,QAAQ,KAAM,MACpD,yBAAK1G,UAAU,OACZ8F,KCpCMiC,EAFe9B,IAAM+B,cAAc,ICmDnCC,MA9Cf,YAA4C,IAStCC,EATiBvD,EAAoB,EAApBA,MAAOwD,EAAa,EAAbA,UAAa,EACTlC,IAAMC,WADG,mBAClCkC,EADkC,KACxBC,EADwB,KAEnCC,EAAmBrC,IAAMsC,WAAWR,GAEtCS,EAAW,mBAUf,GATIL,IACFK,GAAY,oBAIVL,IACFD,EAAe,kBAAMG,EAAY1D,EAAM8D,kBAGxB1E,IAAbqE,EACF,OAAO,kBAAC,IAAD,CAAUM,GAAIN,IAGvB,IAAIO,EAAehE,EAAMzD,KACnB0H,EAAIN,EAAiBO,UAC3B,QAAU9E,IAAN6E,GAAmBA,EAAEE,QAAUF,EAAErB,KAAM,CACzC,IAAMwB,EAAQpE,EAAMzD,KAAKM,MAAM,KAC/BmH,EAAe,CACb,0BAAMnC,IAAI,UAAUuC,EAAMC,MAAM,EAAGJ,EAAEE,OAAOvH,KAAK,KAAO,KACxD,0BAAMiF,IAAI,cAAcxG,UAAU,2BAC/B+I,EAAMC,MAAMJ,EAAEE,MAAOF,EAAErB,MAAMhG,KAAK,MAErC,0BAAMiF,IAAI,SAAS,IAAMuC,EAAMC,MAAMJ,EAAErB,MAAMhG,KAAK,OAItD,OACE,yBAAKvB,UAAWwI,EAAUS,QAASf,GACjC,uBAAGlI,UAAU,gBACX,0BAAMA,UAAU,yBAAyB2E,EAAMrD,GAC/C,8BAAOqH,MCPAO,MA7Bf,YAA4E,IAStEpD,EATqE,IAAhDC,MAASC,OAAU5E,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,KAAML,EAAe,EAAfA,QAAe,EAC7CiF,IAAMC,SAAS,IAD8B,mBAClE1D,EADkE,KAC1D2G,EAD0D,KAEnE/C,EAAiB,IAAI/C,EAe3B,OAbA4C,IAAMI,WAAU,WACdD,EAAexB,UAAUxD,EAAQC,EAAML,EAASmI,KAE/C,IAIDrD,EADoB,IAAlBtD,EAAOe,OACC,kBAAC,EAAD,MAGAf,EAAOf,KAAI,SAAA2H,GAAC,OAAI,kBAAC,EAAD,CAAa5C,IAAK4C,EAAEX,UAAW9D,MAAOyE,EAAGjB,WAAW,OAI9E,6BACE,wBAAInI,UAAU,mBAAmBqB,EAAKqF,QAAQ,KAAM,KAApD,IAA2D1F,GAC3D,yBAAKhB,UAAU,OACb,yBAAKA,UAAU,UACf,yBAAKA,UAAU,YAAY8F,GAC3B,yBAAK9F,UAAU,aCtBjBkC,G,MAAKvB,IAASwB,UAAUzB,IAoB9B,SAAS2I,EAAoBC,EAAOC,GAClC,OAAQA,EAAOC,MACb,IAAK,aACH,MAAO,CACLC,KAAM,KACNC,OAAQ,cAEZ,IAAK,UACH,MAAO,CACLD,KAAMF,EAAOE,KACbC,OAAQ,WAEZ,IAAK,YACH,MAAO,CACLD,KAAMF,EAAOE,KACbC,OAAQ,aAEZ,IAAK,eACH,MAAO,CACLD,KAAMF,EAAOE,KACbC,OAAQ,gBAEZ,QACE,MAAM,IAAIC,OAmCDC,MA5Bf,WAA4B,IAAD,EACC3D,IAAM4D,WAAWR,EAAqB,CAC9DI,KAAM,KACNC,OAAQ,eAHe,mBAClBJ,EADkB,KACXQ,EADW,KAyBzB,OAnBA7D,IAAMI,WAAU,WACd,OAAO1F,IAASoJ,OAAOC,oBAAmB,SAACP,GAC5B,OAATA,EACFK,EAAS,CAAEN,KAAM,gBAGjBM,EAAS,CAAEN,KAAM,UAAWC,SA5DpC,SAA0BQ,GACxB,IAAMC,EAAShI,EAAGoC,WAAW,SAASzB,IAAIoH,GAE1C,OAAO,IAAIE,SAAQ,SAACC,EAASC,GAC3BH,EAAO1G,MAAMC,MAAK,SAACZ,GACbA,EAAIyH,SAAkC,IAAxBzH,EAAIC,OAAJ,MAChBsH,GAAQ,GAGRA,GAAQ,MAET1G,OAAM,SAACG,GACRD,QAAQC,MAAM,2BAA4BA,GAC1CwG,EAAOxG,SAgDL0G,CAAiBd,EAAKQ,OAAOxG,MAAK,SAAC+G,GAE/BV,EADEU,EACO,CAAEhB,KAAM,YAAaC,QAGrB,CAAED,KAAM,eAAgBC,kBAKxC,IAEIH,GCpDMmB,mBA1Bf,SAAgB1D,GAEd,IAII2D,EAJEC,EAAYf,IAEZrD,EAAO,kBAAoBQ,EAAMG,SAASC,SAOhD,MAJyB,eAArBwD,EAAUjB,SACZgB,EAAc,uBAAG1K,UAAU,aAAauG,KAAMA,GAAhC,UAId,4BAAQvG,UAAU,gDAChB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,qCACb,0BAAMA,UAAU,QAAhB,wBACA,uBAAGuG,KAAMqE,uCAAyBA,sCAAuBlE,QAAQ,WAAY,MAE/E,yBAAK1G,UAAU,oBACZ0K,QCnBIG,MAJf,WACE,OAAO,M,mmBCoHMC,MA5Gf,YAA6D,IAAvCnG,EAAsC,EAAtCA,MAAOM,EAA+B,EAA/BA,QAAS8F,EAAsB,EAAtBA,WAAYC,EAAU,EAAVA,OAC1C1C,EAAmBrC,IAAMsC,WAAWR,GAEpCkD,EAAYhF,IAAMiF,YAClBC,EAAYlF,IAAMiF,YAJkC,EAMpBjF,IAAMC,UAAS,GANK,mBAMnDkF,EANmD,KAMrCC,EANqC,KAQpDjF,EAAiB,IAAI/C,EA0D3B,OAzCA4C,IAAMI,WAAU,WACd,IAAMiF,EAAW3G,EAAMzD,KAAKM,MAAM,KAAK+B,OAEtBgI,EAAeN,EAAxBO,QAERC,IAAWC,OAAOH,EAAY,CAC5BI,MAAO1G,EAAQjD,SACf4J,SAAS,EACTC,MAAO,CACL,IAAO,EACP,IAAOP,GAETQ,KAAM,IAGRP,EAAWE,WAAWM,GAAG,UAAU,SAAUC,EAAQC,GACnDlB,GAAW,SAAAhI,GAAC,YAAUA,EAAV,CAAaf,SAAUgK,EAAOvK,KAAI,SAAAH,GAAC,OAAQ,EAAJA,UACnDgH,EAAiB4D,gBAAgBF,EAAO,GAAIA,EAAO,OAGrD,IAAIG,EAAQ,IAAIC,IAAMjB,EAAUK,QAAS,CACvCa,MAAO,OACPC,YAAa,+BAWf,OARIrH,EAAQlD,UACVoK,EAAMI,YAAYtH,EAAQlD,UAG5BoK,EAAMJ,GAAG,eAAe,SAAUS,EAAGC,EAAI/K,GACvCqJ,GAAW,SAAAhI,GAAC,YAAUA,EAAV,CAAahB,SAAUoK,EAAMO,cAAcC,YAGlD,WACLpB,EAAWE,WAAWmB,aAKvB,IAGD,6BACE,2CACA,0BAAMC,SA3DV,SAAsBC,GACpBzB,GAAc,GAEdpG,EAAQnD,QAAU6C,EAAMG,aACxBsB,EAAe2G,YAAY9H,GAASxB,MAAK,WACvC4H,GAAc,GACdL,OACCtH,OAAM,SAAUC,GACjBC,QAAQC,MAAM,2CAA4CF,GAC1D0H,GAAc,MAGhByB,EAAME,mBAgDF,yBAAKhN,UAAU,cACb,2BAAOiN,QAAQ,UAAf,oBACA,yBAAKC,IAAKjC,KAGZ,yBAAKjL,UAAU,cACb,2BAAOiN,QAAQ,gBAAf,gBACA,2BAAOzD,KAAK,OAAO3H,GAAG,eAAe7B,UAAU,eAAemN,UAAQ,EACpEC,MAAOnI,EAAQhD,OAAOe,MACtBqK,SAAU,SAAAP,GAAK,OAAI/B,EAAW,EAAD,GAAM9F,EAAN,CAAehD,OAAO,EAAD,GAAOgD,EAAQhD,OAAf,CAAuBe,MAAO8J,EAAMQ,OAAOF,eAGjG,yBAAKpN,UAAU,cACb,2BAAOiN,QAAQ,eAAf,eACA,2BAAOzD,KAAK,MAAM3H,GAAG,cAAc7B,UAAU,eAC3CoN,MAAOnI,EAAQhD,OAAOgB,KACtBoK,SAAU,SAAAP,GAAK,OAAI/B,EAAW,EAAD,GAAM9F,EAAN,CAAehD,OAAO,EAAD,GAAOgD,EAAQhD,OAAf,CAAuBgB,KAAM6J,EAAMQ,OAAOF,eAGhG,yBAAKpN,UAAU,cACb,2BAAOiN,QAAQ,gBAAf,WACA,yBAAKC,IAAK/B,EAAWtJ,GAAG,kBAG1B,4BAAQ2H,KAAK,SAASxJ,UAAU,sBAAsBiJ,QAAS+B,EAAQuC,SAAUnC,GAAjF,UACA,4BAAQ5B,KAAK,SAASxJ,UAAU,kBAAkBuN,SAAUnC,GAA5D,WCxGR,SAASoC,EAAmClI,EAAGmI,GAC7C,SAASC,EAAWpI,EAAGmI,GACrB,OAAOnI,EAAImI,GAAK,EAAInI,EAAImI,EAAI,EAAI,EAGlC,IAAIE,EAAID,EAAWpI,EAAEtD,SAAS,GAAIyL,EAAEzL,SAAS,IAU7C,OATU,IAAN2L,IACFA,EAAID,EAAWpI,EAAEtD,SAAS,GAAIyL,EAAEzL,SAAS,KAIjC,IAAN2L,IACFA,EAAIrI,EAAErD,OAAOe,MAAM4K,cAAcH,EAAExL,OAAOe,QAGrC2K,EAuCME,MALf,SAAuBC,GAErB,OADAA,EAASC,KAAKP,GA5BhB,SAAiCM,GAC/B,GAAwB,IAApBA,EAASvK,OACX,OAAOuK,EAGT,IAAIE,EAAS,GAET5I,EAAI0I,EAAS,GAAG9L,SAChBiM,EAAI,GAgBR,OAfAH,EAASrJ,SAAQ,SAAA1B,GAbnB,IAAoBmL,EAAIC,EAAJD,EAcD9I,EAdK+I,EAcFpL,EAAEf,SAbfkM,EAAG,KAAOC,EAAG,IAAMD,EAAG,KAAOC,EAAG,GAcnCF,EAAEnG,KAAK/E,IAGPiL,EAAOlG,KAAKsG,MAAMC,KAAKJ,IACvB7I,EAAIrC,EAAEf,SACNiM,EAAI,CAAClL,OAIQ,IAAbkL,EAAE1K,QACJyK,EAAOlG,KAAKmG,GAGPD,EAKAM,CAAwBR,I,4BCblBS,OA7Bf,YAA2C,EAAlB5J,MAAmB,IAAZM,EAAW,EAAXA,QACxBqD,EAAmBrC,IAAMsC,WAAWR,GAEtC9F,EAASgD,EAAQhD,OAAOe,WACAe,IAAxBkB,EAAQhD,OAAOgB,MAA8C,KAAxBgC,EAAQhD,OAAOgB,OACtDhB,EAAS,uBAAGjC,UAAU,cAAcuG,KAAMtB,EAAQhD,OAAOgB,KAAMqK,OAAO,SAASkB,IAAI,uBAAuBvJ,EAAQhD,OAAOe,QAG3H,IAAMyL,EAAc,IAAIC,4BAA0BzJ,EAAQlD,SAAU,IAAI4M,UAExE,OACE,yBAAK3O,UAAU,kBACb4O,aAAc,kBAAMtG,EAAiB4D,gBAAgBjH,EAAQjD,SAAS,GAAIiD,EAAQjD,SAAS,KAC3F6M,aAAc,kBAAMvG,EAAiB4D,gBAAgB,EAAG,KACxD,yBAAKlM,UAAU,gBACZiC,GAAU,0BAAMjC,UAAU,oBAAhB,IAAqCiC,EAArC,KACV6M,KAAML,GACP,6BACCxJ,EAAQ/B,SAAW,0BAAMlD,UAAU,oCAAoCiF,EAAQ/B,QAAQ6L,WAAa,EAAjF,IAAqF9J,EAAQ/B,QAAQ8L,UAArG,IAAiH/J,EAAQ/B,QAAQ+L,kBCyB9IC,OAxBf,YAAoE,IAA5CvK,EAA2C,EAA3CA,MAAOwK,EAAoC,EAApCA,aAAcnE,EAAsB,EAAtBA,OAAQD,EAAc,EAAdA,WAC7CtB,EAAOG,IAETxE,EAAI+J,EAAa,GAAGnN,SACpBoN,EAASzK,EAAMzD,KAAKM,MAAM,KAAKwH,MAAM5D,EAAE,GAAIA,EAAE,IAAI7D,KAAK,KAE1D,OACE,oCACE,yBAAKiF,IAAKpB,GACR,6BACA,uBAAGpF,UAAU,4BAA4BoP,IAE3C,4BACGD,EAAa1N,KAAI,SAACsB,EAAGsM,GAAJ,OAjC1B,SAAsB5F,EAAM9E,EAAO5B,EAAGiI,EAAQD,EAAYsE,GAMxD,IAAMC,EAAM,4BACV9I,IAAK,QAAUzD,EAAElB,GACjB2H,KAAK,SACLxJ,UAAU,kBACViJ,QATF,WACE8B,EAAWhI,GACXiI,MAGU,gBAMZ,OACE,wBAAIxE,IAAK6I,GACP,kBAAC,GAAD,CAAe7I,IAAKzD,EAAElB,GAAI8C,MAAOA,EAAOM,QAASlC,IAChC,cAAhB0G,EAAKC,OAAyB4F,EAAM,MAkBL1M,CAAa6G,EAAM9E,EAAO5B,EAAGiI,EAAQD,EAAYsE,SCLxEE,OA3Bf,YAA+D,IAEzDC,EAFiB7K,EAAuC,EAAvCA,MAAOmJ,EAAgC,EAAhCA,SAAU9C,EAAsB,EAAtBA,OAAQD,EAAc,EAAdA,WAc9C,OAVEyE,OADezL,IAAb+J,EACe,kBAAC,EAAD,MAIKD,EAAcC,GACLrM,KAAI,SAAUgO,EAAIJ,GAC/C,OAAO,kBAAC,GAAD,CAAc7I,IAAK6I,EAAK1K,MAAOA,EAAOwK,aAAcM,EAAIzE,OAAQA,EAAQD,WAAYA,OAK7F,oCACE,wBAAI/K,UAAU,mBAAd,YACCwP,ICdDE,GAAkB,CACtBzN,OAAQ,CACNe,MAAO,GACPC,KAAM,IAERlB,SAAU,GACVC,SAAU,CAAC,EAAG,IAsED2N,OAnEf,YAAgG,IAAD,IAApE5J,MAASC,OAAU5E,EAAiD,EAAjDA,OAAQC,EAAyC,EAAzCA,KAAML,EAAmC,EAAnCA,QAAgB4O,EAAmB,EAA1BjL,MAC7D8E,EAAOG,IADgF,EAGnE3D,IAAMC,WAH6D,mBAGtFvB,EAHsF,KAG/EkL,EAH+E,OAI7D5J,IAAMC,WAJuD,mBAItF4H,EAJsF,KAI5EgC,EAJ4E,OAKzD7J,IAAMC,SAASwJ,IAL0C,mBAKtFK,EALsF,KAK1EC,EAL0E,OAM/D/J,IAAMC,UAAS,GANgD,mBAMtF+J,EANsF,KAM7EC,EAN6E,OAO3DjK,IAAMC,SAAS,CAAE4C,MAAO,EAAGvB,KAAM,IAP0B,mBAOtFsB,EAPsF,KAO3EsH,EAP2E,KASvFC,EAAe,CACnBvH,YACAqD,gBAAiB,SAAC9G,EAAGC,GAAJ,OAAU8K,EAAa,CAAErH,MAAO1D,EAAGmC,KAAMlC,MAG5D,SAASgL,IACPH,GAAYD,GAGd,IAAM7J,EAAiB,IAAI/C,EAiB3B,OAfA4C,IAAMI,WAAU,WACdD,EAAekK,SAASlP,EAAQC,EAAML,EAAS4O,EAAaC,KAE3D,IAEH5J,IAAMI,WAAU,WACdD,EAAemK,YAAYnP,EAAQC,EAAML,EAAS4O,EAAaE,KAE9D,CAACG,IAQF,kBAAC,EAAsBO,SAAvB,CAAgCpD,MAAOgD,GACrC,yBAAKpQ,UAAU,OACb,yBAAKA,UAAU,+BACb,wBAAIA,UAAU,mBAAmBqB,EAAKqF,QAAQ,KAAM,KAApD,IAA2D1F,EAA3D,IAAqE4O,GACrE,6BACA,yBAAK5P,UAAU,cACZ2E,EAAQ,kBAAC,EAAD,CAAaA,MAAOA,IAAY,kBAAC,EAAD,MACzC,8BACEsL,GAAWtL,GAAyB,cAAhB8E,EAAKC,QAA0B,4BAAQF,KAAK,SAASxJ,UAAU,kBAAkBiJ,QAdjH,WACE+G,EAAcN,IACdW,MAY6D,eACpDJ,GAAWtL,EAAQ,kBAAC,EAAD,CAAYA,MAAOA,EAAOM,QAAS8K,EAAYhF,WAAYiF,EAAehF,OAAQqF,IAAoB,OAG9H,yBAAKrQ,UAAU,+BACZ2E,EAAQ,KAAO,kBAAC,EAAD,OAEdsL,GAAWtL,EACX,kBAAC,GAAD,CAAaA,MAAOA,EAAOmJ,SAAUA,EAAU9C,OAAQqF,EAAetF,WAAYiF,IAChF,KAEHC,GAAWtL,EACV,oCACE,uCACA,kBAAC,GAAD,CAAeA,MAAOA,EAAOM,QAAS,IAAIrD,EAAQ,KAAM+C,EAAMG,aAAciL,EAAWhO,SAAUgO,EAAW/N,SAAU+N,EAAW9N,WAEjI,S,oBC3ERwO,GAAW,CACfC,WAAY,QACZC,cAAe,CACbhQ,IAASoJ,KAAK6G,mBAAmBC,aAEnCC,UAAW,CACTC,4BAA6B,kBAAM,KAmCxBC,OA/Bf,SAAqBjK,GACnB,IAAM4D,EAAYf,IAElB3D,IAAMI,WAAU,WACW,iBAArBsE,EAAUjB,QACZiB,EAAUlB,KAAKwH,SAASvN,OAAM,SAACG,GAC7BD,QAAQsN,IAAI,0DAA2DrN,QAG1E,CAAC8G,IAEJ,IAAIwG,EAAWpK,EAAMG,SAASkK,OAAO5P,MAAM,KAAK,GAKhD,YAJiBuC,IAAboN,GAAuC,KAAbA,IAC5BA,EAAW,KAGY,iBAArBxG,EAAUjB,OACL,kBAAC,IAAD,CAAUhB,GAAG,kBAEQ,cAArBiC,EAAUjB,OACV,kBAAC,IAAD,CAAUhB,GAAIyI,IAInB,6BACE,kBAAC,KAAD,CAAoBV,SAAUA,GAAUY,aAAc1Q,IAASoJ,WCnBxDuH,OAlBf,WAEE,IAAM3G,EAAYf,IAElB,MAAyB,cAArBe,EAAUjB,OAEV,0BAAM1J,UAAU,4BACd,0BAAMA,UAAU,2BAA2B2K,EAAUlB,KAAKQ,OAC1D,4BAAQjK,UAAU,+BAA+BiJ,QAAS,kBAAMtI,IAASoJ,OAAOwH,WAAW/H,KAAK,UAAhG,WAMJ,sCCcWgI,OA7Bf,WACE,OACE,yBAAKxR,UAAU,kDACb,yBAAKA,UAAU,aACb,uBAAGA,UAAU,eAAeuG,KAAK,MAAjC,wBAEA,4BAAQvG,UAAU,iBAAiBwJ,KAAK,SAASiI,cAAY,WAAWC,cAAY,0BAA0BC,gBAAc,yBAAyBC,gBAAc,QAAQC,aAAW,qBACpL,0BAAM7R,UAAU,yBAGlB,yBAAKA,UAAU,2BAA2B6B,GAAG,0BAC3C,wBAAI7B,UAAU,sBACZ,wBAAIA,UAAU,YACZ,uBAAGA,UAAU,WAAWuG,KAAK,gBAA7B,eAEF,wBAAIvG,UAAU,YACZ,uBAAGA,UAAU,WAAWuG,KAAK,YAA7B,WAEF,wBAAIvG,UAAU,YACZ,uBAAGA,UAAU,WAAWuG,KAAK,WAA7B,WAGJ,kBAAC,GAAD,UCbKuL,OAVf,WACE,OACE,yBAAK9R,UAAU,uBACb,wBAAIA,UAAU,iBAAd,aACA,uBAAGA,UAAU,QAAb,sCACA,uBAAGuG,KAAK,KAAKvG,UAAU,cAAvB,iBCKS+R,OAVf,WACE,OACE,yBAAK/R,UAAU,sBACb,wBAAIA,UAAU,iBAAd,kBACA,uBAAGA,UAAU,QAAb,mDACA,uBAAGA,UAAU,aAAauG,KAAK,MAA/B,iBCFN,SAASI,GAAY3D,GACnB,IACMuD,EAAO,gBAAkBvD,EAE/B,OACE,yBAAKwD,IAAKD,EAAMvG,UAAU,sCACxB,uBAAGuG,KAAMA,EAAME,KAAK,SAASzG,UALjB,qDAKsCgD,EAAM0D,QAAQ,KAAM,OAiC7DsL,OA5Bf,WAA2B,IASrBlM,EAToB,EACMG,IAAMC,SAAS,IADrB,mBACjB9D,EADiB,KACR6P,EADQ,KAElB7L,EAAiB,IAAI/C,EAe3B,OAbA4C,IAAMI,WAAU,WACdD,EAAe8L,WAAWD,KAEzB,IAIDnM,EADqB,IAAnB1D,EAAQmB,OACA,kBAAC,EAAD,MAGAnB,EAAQX,IAAIkF,IAItB,6BACE,0CAEA,yBAAK3G,UAAU,OACZ8F,KCnBT,SAASqM,KACP,OACE,4BAAQnS,UAAU,eAChB,wBAAIA,UAAU,yBAAd,wBACA,uBAAGA,UAAU,yBAAb,gBA+DSoS,OA1Df,WAGE,MAAyB,eAFPxI,IAEJF,OAEV,kBAAC,IAAD,CAAY2I,SAAS,KACnB,yBAAKrS,UAAU,OACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOsS,OAAK,EAACC,KAAK,SAASC,UAAWxB,KACtC,kBAAC,IAAD,CAAOwB,UAAWL,QAQ1B,kBAAC,IAAD,CAAYE,SAAS,KACnB,yBAAKrS,UAAU,OACb,kBAAC,GAAD,MACA,kBAAC,IAAD,CAAOuS,KAAK,IAAIC,UAAW1L,IAE3B,kBAAC,IAAD,CAAOwL,OAAK,EAACC,KAAK,IAAIC,UAAWtT,IAEjC,yBAAKc,UAAU,kBACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOsS,OAAK,EAACC,KAAK,IAAIC,UAAW3H,IACjC,kBAAC,IAAD,CAAOyH,OAAK,EAACC,KAAK,SAASC,UAAWvT,IAGtC,kBAAC,IAAD,CAAOqT,OAAK,EAACC,KAAK,cAAcC,UAAWR,KAC3C,kBAAC,IAAD,CAAOM,OAAK,EAACC,KAAK,sBAAsBC,UAAW3M,IACnD,kBAAC,IAAD,CAAOyM,OAAK,EAACC,KAAK,4BAA4BC,UAAW7K,IACzD,kBAAC,IAAD,CAAO2K,OAAK,EAACC,KAAK,qCAAqCC,UAAWtJ,IAClE,kBAAC,IAAD,CAAOoJ,OAAK,EAACC,KAAK,4CAA4CC,UAAW7C,KAGzE,kBAAC,IAAD,CAAO2C,OAAK,EAACC,KAAK,YAGlB,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,SAASC,UAAWxB,KACtC,kBAAC,IAAD,CAAOsB,OAAK,EAACC,KAAK,gBAAgBC,UAAWT,KAG7C,kBAAC,IAAD,CAAOO,OAAK,EAACC,KAAK,aAAaC,UAAWV,KAC1C,kBAAC,IAAD,CAAUpJ,GAAG,iBAKjB,yBAAK1I,UAAU,SAEf,kBAAC,EAAD,SCnERyS,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.0e4ecbbc.chunk.js","sourcesContent":["import React from 'react';\n\nfunction About() {\n  return (\n    <div>\n      <h2>About</h2>\n      <p>\n        Enjoy the Scriptures.\n      </p>\n    </div>\n  )\n}\n\nexport default About\n","import React from 'react';\n\nfunction Background() {\n  const style = {\n    position: 'fixed',\n    top: 0,\n    zIndex: -1,\n    width: '100%',\n    height: '100%',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover',\n    opacity: '0.9'\n  }\n\n  return (\n    <img alt=\"A pathway with trees on either side in autumn\" src=\"/background.jpg\" style={style} />\n  )\n}\n\nexport default Background\n","import React from 'react'\n\nfunction LoadingBar() {\n  return (\n    <div className=\"col text-center\">\n      <img alt=\"loading\" src=\"loader.gif\" />\n    </div>\n  )\n}\n\nexport default LoadingBar\n","import firebase from 'firebase/app'\n\nvar devFirebaseConfig = {\n  apiKey: \"AIzaSyDkKbOrGudHylmvFiRMW4SkwxXlFxQt-l4\",\n  authDomain: \"enjoy-the-scriptures-dev.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures-dev.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures-dev\",\n  storageBucket: \"\",\n  messagingSenderId: \"160411774173\",\n  appId: \"1:160411774173:web:24609264832f2816d1ff34\",\n  measurementId: \"G-JWEZ0Y38BM\"\n};\n\nvar testFirebaseConfig = {\n  apiKey: \"AIzaSyDcWkM-EwFO9BrLbHAiZf_NcPKT1jg_B4M\",\n  authDomain: \"enjoy-the-scriptures-test.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures-test.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures-test\",\n  storageBucket: \"\",\n  messagingSenderId: \"854443437513\",\n  appId: \"1:854443437513:web:b0f58f35a8d4a823c64c18\",\n  measurementId: \"G-EDCKCQPLL0\"\n};\n\nvar prodFirebaseConfig = {\n  apiKey: \"AIzaSyCJ8QdL00_QZlNHsdlLo_z_ROHV550HN20\",\n  authDomain: \"enjoy-the-scriptures.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures\",\n  storageBucket: \"enjoy-the-scriptures.appspot.com\",\n  messagingSenderId: \"812786960298\",\n  appId: \"1:812786960298:web:5692ec20094481a1304dd3\",\n  measurementId: \"G-Q6Q0Z99K1H\"\n};\n\nfunction getFirebaseConfig() {\n  const config = process.env.REACT_APP_FIREBASE_CONFIG\n  if (config === 'production') {\n    return prodFirebaseConfig\n  }\n  else if (config === 'test') {\n    return testFirebaseConfig\n  }\n  else {\n    return devFirebaseConfig\n  }\n}\n\nconst firebaseConfig = getFirebaseConfig()\nconst firebaseApp = firebase.initializeApp(firebaseConfig)\n\nexport default firebaseApp\n","class Verse {\n  constructor(volumeName, bookName, chapter, number, text) {\n    this.volume = volumeName\n    this.book = bookName\n    this.chapter = chapter\n    this.n = number\n    this.text = text\n  }\n\n  getHref() {\n    return ['/scriptures', this.volume, this.book, this.chapter, this.n].join('/')\n  }\n\n  getVerseId() {\n    return [\n      this.volume.split('_').map(s => s[0]).join(''),\n      this.book.split(/[_-]+/).map(s => s.substring(0, 3)).join('-'),\n      this.chapter,\n      this.n\n    ].join('/')\n  }\n}\n\nexport default Verse\n","class Insight {\n  constructor(id, verseId, deltaOps, fragment, source) {\n    this.id = id\n    this.verseId = verseId\n    this.deltaOps = deltaOps\n    this.fragment = fragment\n    this.source = source\n  }\n}\n\nexport default Insight\n","import firebase from 'firebase/app'\nimport firebaseApp from './FirebaseConfig'\n\nimport 'firebase/firestore'\nimport Verse from '../model/Verse'\nimport Insight from '../model/Insight'\n\nconst db = firebase.firestore(firebaseApp)\n\nlet volumes = []\nlet books = {}\nlet chapterCounts = {}\nlet verseCounts = {}\nlet verses = {}\n\nfunction fetchVolumes(cb) {\n  db.doc('scriptures/index').get().then(function (doc) {\n    volumes = doc.data()['volumes']\n    cb(volumes)\n  }).catch(function (err) {\n    console.error('Error fetching volumes: ', err)\n  })\n}\n\nfunction fetchBooks(volume, cb) {\n  db.doc('scriptures/index/volumes/' + volume).get().then(function (doc) {\n    books[volume] = doc.data()['books']\n    cb(books[volume])\n  }).catch(function (err) {\n    console.error('Error fetching books for volume: ', volume, err)\n  })\n}\n\nfunction fetchChapterCount(volume, book, cb) {\n  db.doc('scriptures/index/volumes/' + volume + '/books/' + book).get().then(function (doc) {\n    const chapterCount = doc.data()['chapters']\n    chapterCounts[volume] = {}\n    chapterCounts[volume][book] = chapterCount\n    cb(chapterCount)\n  }).catch(function (err) {\n    console.error('Error fetching chapter count for ' + volume + ', ' + book, err)\n  })\n}\n\nfunction fetchVerseCount(volume, book, chapter, cb) {\n  db.doc('scriptures/index/volumes/' + volume + '/books/' + book + '/chapters/' + chapter).get().then(function (doc) {\n    const verseCount = doc.data()['verses']\n    verseCounts[volume] = {}\n    verseCounts[volume][book] = {}\n    verseCounts[volume][book][chapter.toString()] = verseCount\n    cb(verseCount)\n  }).catch(function (err) {\n    console.error('Error fetching verse count for ' + volume + ', ' + book + ', chapter ' + chapter, err)\n  })\n}\n\nfunction fetchVerses(volume, book, chapter, cb) {\n  if (verses[volume] === undefined) verses[volume] = {}\n  if (verses[volume][book] === undefined) verses[volume][book] = {}\n  if (verses[volume][book][chapter] === undefined) verses[volume][book][chapter] = {}\n\n  db.collection('scriptures/index/volumes/' + volume + '/books/' + book + '/chapters/' + chapter + '/verses').get().then(function (querySnapshot) {\n    querySnapshot.docs.forEach(function (doc) {\n      verses[volume][book][chapter][doc.id] = doc.data()['text']\n    })\n\n    cb(buildVerseList(volume, book, chapter))\n  }).catch(function (err) {\n    console.error('Error fetching verses for ' + volume + ', ' + book + ', chapter ' + chapter, err)\n  })\n}\n\nfunction buildVerseList(volume, book, chapter) {\n  return Object.keys(verses[volume][book][chapter]).map(function (n) {\n    return new Verse(volume, book, chapter, n, verses[volume][book][chapter][n])\n  })\n}\n\nfunction buildInsight(doc) {\n  let data = doc.data()\n  let i = new Insight(doc.id, data['vid'], data['o'], data['f'], {\n    label: data['s']['l'],\n    link: data['s']['a']\n  })\n\n  i.created = data['c'] ? data['c'].toDate() : null\n  i.updated = data['u'] ? data['u'].toDate() : null\n\n  return i\n}\n\nfunction fetchInsights(verse, cb) {\n  const verseId = verse.getVerseId()\n  db.collection('insights').where('vid', '==', verseId).get().then(function (querySnapshot) {\n    cb(querySnapshot.docs.map(buildInsight))\n  }).catch(function (err) {\n    console.error('Error fetching insights for verse. verseId: ', verseId, err)\n  })\n}\n\nclass ScriptureCache {\n\n  getVolumes(cb) {\n    if (volumes.length === 0) {\n      fetchVolumes(cb)\n    }\n    else {\n      cb(volumes)\n    }\n  }\n\n  getBooks(volume, cb) {\n    if (books[volume] === undefined || books[volume].length === 0) {\n      fetchBooks(volume, cb)\n    }\n    else {\n      cb(books[volume])\n    }\n  }\n\n  getChapterCount(volume, book, cb) {\n    if (chapterCounts[volume] === undefined || chapterCounts[volume][book] === undefined) {\n      fetchChapterCount(volume, book, cb)\n    }\n    else {\n      cb(chapterCounts[volume][book])\n    }\n  }\n\n  getVerseCount(volume, book, chapter, cb) {\n    if (verseCounts[volume] === undefined ||\n      verseCounts[volume][book] === undefined ||\n      verseCounts[volume][book][chapter] === undefined) {\n      fetchVerseCount(volume, book, chapter, cb)\n    }\n    else {\n      cb(verseCounts[volume][book][chapter])\n    }\n  }\n\n  getVerses(volume, book, chapter, cb) {\n    if (verses[volume] === undefined ||\n      verses[volume][book] === undefined ||\n      verses[volume][book][chapter] === undefined) {\n      fetchVerses(volume, book, chapter, cb)\n    }\n    else {\n      cb(buildVerseList(volume, book, chapter))\n    }\n  }\n\n  getVerse(volume, book, chapter, verse, cb) {\n    this.getVerses(volume, book, chapter, function (verseList) {\n      cb(verseList[verse - 1])\n    })\n  }\n\n  getInsights(volume, book, chapter, verse, cb) {\n    fetchInsights(new Verse(volume, book, chapter, verse), cb)\n  }\n\n  saveInsight(insight) {\n    let data = {\n      vid: insight.verseId,\n      o: insight.deltaOps,\n      f: insight.fragment,\n      s: {\n        l: insight.source.label,\n        a: insight.source.link\n      },\n      u: firebase.firestore.FieldValue.serverTimestamp()\n    }\n\n    if (insight.id === undefined) {\n      // CREATE\n      data.c = firebase.firestore.FieldValue.serverTimestamp()\n      return db.collection('insights').add(data)\n    }\n    else {\n      // UPDATE\n      data.c = insight.created\n      return db.collection('insights').doc(insight.id).set(data)\n    }\n  }\n}\n\nexport default ScriptureCache\n","import React from 'react'\n\nimport LoadingBar from './LoadingBar'\nimport ScriptureCache from '../firebase/ScriptureCache'\n\nfunction buildButton(volume, label) {\n  const classes = \"text-capitalize text-white btn btn-success btn-lg\"\n  const href = '#/scriptures/' + volume + '/' + label\n\n  return (\n    <div key={href} className=\"col-sm text-center text-nowrap p-3\">\n      <a href={href} role=\"button\" className={classes}>{label.replace(/_/g, ' ')}</a>\n    </div>\n  )\n}\n\nfunction BookListPage({ match: { params: { volume } } }) {\n  const [books, setBooks] = React.useState([])\n  const scriptureCache = new ScriptureCache()\n\n  React.useEffect(() => {\n    scriptureCache.getBooks(volume, setBooks)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  let content;\n  if (books.length === 0) {\n    content = <LoadingBar />\n  }\n  else {\n    content = books.map(label => buildButton(volume, label))\n  }\n\n  return (\n    <div>\n      <h2 className=\"text-capitalize\">{volume.replace(/_/g, ' ')}</h2>\n      <div className=\"row\">\n        {content}\n      </div>\n    </div>\n  )\n}\n\nexport default BookListPage\n","import React from 'react'\n\nfunction toBreadcrumb(segment) {\n  return segment.replace(/_/g, ' ')\n}\n\nfunction Breadcrumb(props) {\n  const segments = ['home'].concat(props.location.pathname.substring(1).split('/').filter(seg => seg !== \"\"))\n  let href = '#'\n  const crumbs = segments.map(function (s, i) {\n    let last = i === segments.length - 1\n\n    if (i > 0) {\n      href += '/' + s\n    }\n\n    let label = <a href={href}>{toBreadcrumb(s)}</a>\n\n    let classNames = \"breadcrumb-item text-capitalize\"\n    if (last) {\n      classNames += \" active\"\n      label = toBreadcrumb(s)\n    }\n\n    return (\n      <li key={href} className={classNames}>\n        {label}\n      </li>\n    )\n  })\n\n  return (\n    <div style={{ backgroundColor: '#e9ecef' }}>\n      <div className=\"container\">\n        <ol className=\"breadcrumb\" style={{ marginBottom: '0' }}>\n          {crumbs}\n        </ol>\n      </div>\n    </div>\n  )\n}\n\nexport default Breadcrumb\n","import React from 'react'\n\nimport LoadingBar from './LoadingBar'\nimport ScriptureCache from '../firebase/ScriptureCache'\n\nfunction buildButton(volume, book, chapter) {\n  const classes = \"text-capitalize text-white btn btn-success btn-lg\"\n  const href = '#/scriptures/' + volume + '/' + book + '/' + chapter\n\n  return (\n    <div key={href} className=\"col text-center text-nowrap p-3\">\n      <a href={href} role=\"button\" className={classes}>{chapter}</a>\n    </div>\n  )\n}\n\nfunction ChapterListPage({ match: { params: { volume, book } } }) {\n  const [chapterCount, setChapterCount] = React.useState(0)\n  const scriptureCache = new ScriptureCache()\n\n  React.useEffect(() => {\n    scriptureCache.getChapterCount(volume, book, setChapterCount)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  let content;\n  if (chapterCount === 0) {\n    content = <LoadingBar />\n  }\n  else {\n    content = []\n    for (let c = 1; c <= chapterCount; c++) {\n      content.push(buildButton(volume, book, c))\n    }\n  }\n\n  return (\n    <div>\n      <h3 className=\"text-capitalize\">{book.replace(/_/g, ' ')}</h3>\n      <div className=\"row\">\n        {content}\n      </div>\n    </div>\n  )\n}\n\nexport default ChapterListPage\n","import React from 'react'\n\nconst VerseHighlightContext = React.createContext({});\n\nexport default VerseHighlightContext\n","import { Redirect } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nimport Verse from '../model/Verse'\nimport VerseHighlightContext from './VerseHighlightContext'\n\nfunction SingleVerse({ verse, clickable }) {\n  const [redirect, setRedirect] = React.useState()\n  const highlightContext = React.useContext(VerseHighlightContext)\n\n  let divStyle = \"m-1 p-1 rounded \"\n  if (clickable) {\n    divStyle += \" clickable-verse\"\n  }\n\n  let clickHandler;\n  if (clickable) {\n    clickHandler = () => setRedirect(verse.getHref())\n  }\n\n  if (redirect !== undefined) {\n    return <Redirect to={redirect} />\n  }\n\n  let verseContent = verse.text\n  const h = highlightContext.highlight\n  if (h !== undefined && h.first !== h.last) {\n    const words = verse.text.split(' ')\n    verseContent = [\n      <span key=\"before\">{words.slice(0, h.first).join(' ') + ' '}</span>,\n      <span key=\"highlighted\" className=\"verse-highlight rounded\">\n        {words.slice(h.first, h.last).join(' ')}\n      </span>,\n      <span key=\"after\">{' ' + words.slice(h.last).join(' ')}</span>\n    ]\n  }\n\n  return (\n    <div className={divStyle} onClick={clickHandler}>\n      <p className=\"text-justify\">\n        <span className=\"font-weight-bold mr-1\">{verse.n}</span>\n        <span>{verseContent}</span>\n      </p>\n    </div>\n  )\n}\n\nSingleVerse.propTypes = {\n  verse: PropTypes.instanceOf(Verse).isRequired,\n  clickable: PropTypes.bool\n}\n\nexport default SingleVerse\n","import React from 'react'\n\nimport LoadingBar from './LoadingBar'\nimport ScriptureCache from '../firebase/ScriptureCache'\nimport SingleVerse from './SingleVerse'\n\nfunction ChapterTextPage({ match: { params: { volume, book, chapter } } }) {\n  const [verses, setVerses] = React.useState([])\n  const scriptureCache = new ScriptureCache()\n\n  React.useEffect(() => {\n    scriptureCache.getVerses(volume, book, chapter, setVerses)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  let content;\n  if (verses.length === 0) {\n    content = <LoadingBar />\n  }\n  else {\n    content = verses.map(v => <SingleVerse key={v.getHref()} verse={v} clickable={true}/>)\n  }\n\n  return (\n    <div>\n      <h4 className=\"text-capitalize\">{book.replace(/_/g, ' ')} {chapter}</h4>\n      <div className=\"row\">\n        <div className=\"col-3\"></div>\n        <div className=\"col-sm-6\">{content}</div>\n        <div className=\"col-3\"></div>\n      </div>\n    </div>\n  )\n}\n\nexport default ChapterTextPage\n","import React from 'react'\nimport firebase from 'firebase/app'\nimport firebaseApp from '../firebase/FirebaseConfig'\n\nimport 'firebase/auth'\nimport 'firebase/firestore'\n\nconst db = firebase.firestore(firebaseApp)\n\nfunction userIsAuthorized(email) {\n  const docRef = db.collection('users').doc(email)\n\n  return new Promise((resolve, reject) => {\n    docRef.get().then((doc) => {\n      if (doc.exists && doc.data()['admin'] === true) {\n        resolve(true)\n      }\n      else {\n        resolve(false)\n      }\n    }).catch((error) => {\n      console.error(\"Error getting document: \", error)\n      reject(error)\n    })\n  })\n}\n\nfunction firebaseUserReducer(state, action) {\n  switch (action.type) {\n    case 'LOGGED_OUT':\n      return {\n        user: null,\n        status: 'LOGGED_OUT'\n      }\n    case 'PENDING':\n      return {\n        user: action.user,\n        status: 'PENDING'\n      }\n    case 'LOGGED_IN':\n      return {\n        user: action.user,\n        status: 'LOGGED_IN'\n      }\n    case 'UNAUTHORIZED':\n      return {\n        user: action.user,\n        status: 'UNAUTHORIZED'\n      }\n    default:\n      throw new Error()\n  }\n}\n\n/**\n * Custom hook for accessing the current firebase user, if one is logged in.\n */\nfunction useFirebaseUser() {\n  const [state, dispatch] = React.useReducer(firebaseUserReducer, {\n    user: null,\n    status: 'LOGGED_OUT'\n  })\n\n  React.useEffect(() => {\n    return firebase.auth().onAuthStateChanged((user) => {\n      if (user === null) {\n        dispatch({ type: 'LOGGED_OUT' })\n      }\n      else {\n        dispatch({ type: 'PENDING', user })\n        userIsAuthorized(user.email).then((isAuthorized) => {\n          if (isAuthorized) {\n            dispatch({ type: 'LOGGED_IN', user })\n          }\n          else {\n            dispatch({ type: 'UNAUTHORIZED', user })\n          }\n        })\n      }\n    });\n  }, [])\n\n  return state\n}\n\nexport default useFirebaseUser\n","import React from 'react'\nimport { withRouter } from 'react-router-dom';\nimport useFirebaseUser from '../firebase/FirebaseUser'\n\nfunction Footer(props) {\n\n  const userState = useFirebaseUser()\n\n  const href = \"#/login?return=\" + props.location.pathname\n\n  let loginButton\n  if (userState.status === 'LOGGED_OUT') {\n    loginButton = <a className=\"text-muted\" href={href}>Login</a>\n  }\n\n  return (\n    <footer className=\"page-footer font-small bg-light fixed-bottom\">\n      <div className=\"container\">\n        <div className=\"footer-copyright text-center py-2\">\n          <span className=\"mr-1\">© 2019 Copyright:</span>\n          <a href={process.env.PUBLIC_URL}>{process.env.PUBLIC_URL.replace('https://', '')}</a>\n        </div>\n        <div className=\"text-center py-2\">\n          {loginButton}\n        </div>\n      </div>\n    </footer>\n  )\n}\n\nexport default withRouter(Footer)\n","function Home() {\n  return null\n}\n\nexport default Home\n","import React from 'react'\nimport noUiSlider from 'nouislider'\nimport Quill from 'quill'\n\nimport PropTypes from 'prop-types'\nimport Verse from '../model/Verse'\nimport VerseHighlightContext from './VerseHighlightContext'\nimport ScriptureCache from '../firebase/ScriptureCache'\n\nfunction AddInsight({ verse, insight, setInsight, toggle }) {\n  const highlightContext = React.useContext(VerseHighlightContext)\n\n  const sliderRef = React.createRef()\n  const editorRef = React.createRef()\n\n  const [isSubmitting, setSubmitting] = React.useState(false)\n\n  const scriptureCache = new ScriptureCache()\n\n  function handleSubmit(event) {\n    setSubmitting(true)\n\n    insight.verseId = verse.getVerseId()\n    scriptureCache.saveInsight(insight).then(function () {\n      setSubmitting(false);\n      toggle()\n    }).catch(function (err) {\n      console.error('An error occurred while saving insight: ', err)\n      setSubmitting(false);\n    })\n\n    event.preventDefault()\n  }\n\n  React.useEffect(() => {\n    const lastWord = verse.text.split(' ').length\n\n    const { current: sliderNode } = sliderRef\n\n    noUiSlider.create(sliderNode, {\n      start: insight.fragment,\n      connect: true,\n      range: {\n        'min': 0,\n        'max': lastWord\n      },\n      step: 1\n    })\n\n    sliderNode.noUiSlider.on('update', function (values, handle) {\n      setInsight(i => ({ ...i, fragment: values.map(n => n | 0) })) // Force ints\n      highlightContext.updateHighlight(values[0], values[1])\n    })\n\n    let quill = new Quill(editorRef.current, {\n      theme: 'snow',\n      placeholder: 'Record the insight here...'\n    })\n\n    if (insight.deltaOps) {\n      quill.setContents(insight.deltaOps)\n    }\n\n    quill.on('text-change', function (d, od, s) {\n      setInsight(i => ({ ...i, deltaOps: quill.getContents().ops }))\n    });\n\n    return () => {\n      sliderNode.noUiSlider.destroy()\n      // No cleanup necessary for Quill.\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <div>\n      <h4>New Insight</h4>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"phrase\">Phrase Highlight</label>\n          <div ref={sliderRef} />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"source-label\">Source Label</label>\n          <input type=\"text\" id=\"source-label\" className=\"form-control\" required\n            value={insight.source.label}\n            onChange={event => setInsight({ ...insight, source: { ...insight.source, label: event.target.value } })} />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"source-link\">Source Link</label>\n          <input type=\"url\" id=\"source-link\" className=\"form-control\"\n            value={insight.source.link}\n            onChange={event => setInsight({ ...insight, source: { ...insight.source, link: event.target.value } })} />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"insight-text\">Insight</label>\n          <div ref={editorRef} id=\"insight-text\"></div>\n        </div>\n\n        <button type=\"button\" className=\"btn btn-danger mr-3\" onClick={toggle} disabled={isSubmitting}>Cancel</button>\n        <button type=\"submit\" className=\"btn btn-success\" disabled={isSubmitting}>Save</button>\n      </form>\n    </div>\n  )\n}\n\nAddInsight.propTypes = {\n  verse: PropTypes.instanceOf(Verse).isRequired,\n  insight: PropTypes.object.isRequired,\n  setInsight: PropTypes.func.isRequired,\n  toggle: PropTypes.func.isRequired\n}\n\nexport default AddInsight\n","function compareInsightsByFragmentAndSource(a, b) {\n  function compareIdx(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0\n  }\n\n  let r = compareIdx(a.fragment[0], b.fragment[0])\n  if (r === 0) {\n    r = compareIdx(a.fragment[1], b.fragment[1])\n  }\n\n  // If the fragments are equivalent, sort by the source label.\n  if (r === 0) {\n    r = a.source.label.localeCompare(b.source.label)\n  }\n\n  return r\n}\n\nfunction fragmentEq(f1, f2) {\n  return f1[0] === f2[0] && f1[1] === f2[1]\n}\n\nfunction groupInsightsByFragment(insights) {\n  if (insights.length === 0) {\n    return insights\n  }\n\n  let groups = []\n\n  let f = insights[0].fragment\n  let g = []\n  insights.forEach(i => {\n    if (fragmentEq(f, i.fragment)) {\n      g.push(i)\n    }\n    else {\n      groups.push(Array.from(g))\n      f = i.fragment\n      g = [i]\n    }\n  })\n\n  if (g.length !== 0) {\n    groups.push(g)\n  }\n\n  return groups\n}\n\nfunction groupInsights(insights) {\n  insights.sort(compareInsightsByFragmentAndSource)\n  return groupInsightsByFragment(insights)\n}\n\nexport default groupInsights\n","import PropTypes from 'prop-types'\nimport React from 'react'\nimport { QuillDeltaToHtmlConverter } from 'quill-delta-to-html'\nimport parse from 'html-react-parser'\n\nimport Insight from '../model/Insight'\nimport Verse from '../model/Verse'\nimport VerseHighlightContext from './VerseHighlightContext'\n\nfunction SingleInsight({ verse, insight }) {\n  const highlightContext = React.useContext(VerseHighlightContext)\n\n  let source = insight.source.label\n  if (insight.source.link !== undefined && insight.source.link !== '') {\n    source = <a className=\"text-danger\" href={insight.source.link} target=\"_blank\" rel=\"noopener noreferrer\">{insight.source.label}</a>\n  }\n\n  const insightHtml = new QuillDeltaToHtmlConverter(insight.deltaOps, {}).convert()\n\n  return (\n    <div className=\"insight m-1 p-1\"\n      onMouseEnter={() => highlightContext.updateHighlight(insight.fragment[0], insight.fragment[1])}\n      onMouseLeave={() => highlightContext.updateHighlight(0, 0)}>\n      <div className=\"text-justify\">\n        {source && <span className=\"text-danger pr-2\">({source})</span>}\n        {parse(insightHtml)}\n        <br />\n        {insight.created && <span className=\"text-secondary small float-right\">{insight.created.getMonth() + 1}/{insight.created.getDate()}/{insight.created.getFullYear()}</span>}\n      </div>\n    </div>\n  )\n}\n\nSingleInsight.propTypes = {\n  verse: PropTypes.instanceOf(Verse).isRequired,\n  insight: PropTypes.instanceOf(Insight).isRequired\n}\n\nexport default SingleInsight\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Insight from '../model/Insight'\nimport SingleInsight from './SingleInsight'\nimport Verse from '../model/Verse'\nimport useFirebaseUser from '../firebase/FirebaseUser'\n\nfunction buildInsight(user, verse, i, toggle, setInsight, idx) {\n  function editInsight() {\n    setInsight(i)\n    toggle()\n  }\n\n  const btn = <button\n    key={'edit-' + i.id}\n    type=\"button\"\n    className=\"btn btn-warning\"\n    onClick={editInsight}>Edit Insight</button>\n\n  return (\n    <li key={idx}>\n      <SingleInsight key={i.id} verse={verse} insight={i} />\n      {user.status === 'LOGGED_IN' ? btn : null}\n    </li>\n  )\n}\n\nfunction InsightGroup({ verse, insightGroup, toggle, setInsight }) {\n  const user = useFirebaseUser()\n\n  let f = insightGroup[0].fragment\n  let phrase = verse.text.split(' ').slice(f[0], f[1]).join(' ')\n\n  return (\n    <>\n      <div key={f}>\n        <hr />\n        <p className=\"text-primary font-italic\">{phrase}</p>\n      </div>\n      <ol>\n        {insightGroup.map((i, idx) => buildInsight(user, verse, i, toggle, setInsight, idx))}\n      </ol>\n    </>\n  )\n}\n\nInsightGroup.propTypes = {\n  verse: PropTypes.instanceOf(Verse).isRequired,\n  insightGroup: PropTypes.arrayOf(PropTypes.instanceOf(Insight)),\n}\n\nexport default InsightGroup\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Insight from '../model/Insight'\nimport LoadingBar from './LoadingBar'\nimport Verse from '../model/Verse'\nimport groupInsights from '../util/InsightGroups'\nimport InsightGroup from './InsightGroup'\n\nfunction InsightList({ verse, insights, toggle, setInsight }) {\n\n  let insightContent\n  if (insights === undefined) {\n    insightContent = <LoadingBar />\n  }\n  else {\n    // Sort insights by fragment\n    const insightGroups = groupInsights(insights)\n    insightContent = insightGroups.map(function (ig, idx) {\n      return <InsightGroup key={idx} verse={verse} insightGroup={ig} toggle={toggle} setInsight={setInsight} />\n    })\n  }\n\n  return (\n    <>\n      <h4 className=\"text-capitalize\">insights</h4>\n      {insightContent}\n    </>\n  )\n}\n\nInsightList.propTypes = {\n  verse: PropTypes.instanceOf(Verse).isRequired,\n  insights: PropTypes.arrayOf(PropTypes.instanceOf(Insight)),\n}\n\nexport default InsightList\n","import React from 'react'\n\nimport AddInsight from './AddInsight'\nimport Insight from '../model/Insight'\nimport InsightList from './InsightList'\nimport LoadingBar from './LoadingBar'\nimport ScriptureCache from '../firebase/ScriptureCache'\nimport SingleInsight from './SingleInsight'\nimport SingleVerse from './SingleVerse'\nimport useFirebaseUser from '../firebase/FirebaseUser'\nimport VerseHighlightContext from './VerseHighlightContext'\n\nconst DEFAULT_INSIGHT = {\n  source: {\n    label: '',\n    link: ''\n  },\n  deltaOps: [],\n  fragment: [0, 0]\n}\n\nfunction InsightListPage({ match: { params: { volume, book, chapter, verse: verseNumber } } }) {\n  const user = useFirebaseUser()\n\n  const [verse, setVerse] = React.useState()\n  const [insights, setInsights] = React.useState()\n  const [newInsight, setNewInsight] = React.useState(DEFAULT_INSIGHT)\n  const [editing, setEditing] = React.useState(false)\n  const [highlight, setHighlight] = React.useState({ first: 0, last: 0 })\n\n  const contextState = {\n    highlight,\n    updateHighlight: (f, l) => setHighlight({ first: f, last: l })\n  }\n\n  function toggleEditing() {\n    setEditing(!editing)\n  }\n\n  const scriptureCache = new ScriptureCache()\n\n  React.useEffect(() => {\n    scriptureCache.getVerse(volume, book, chapter, verseNumber, setVerse)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  React.useEffect(() => {\n    scriptureCache.getInsights(volume, book, chapter, verseNumber, setInsights)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editing])\n\n  function addNewInsight() {\n    setNewInsight(DEFAULT_INSIGHT)\n    toggleEditing()\n  }\n\n  return (\n    <VerseHighlightContext.Provider value={contextState}>\n      <div className=\"row\">\n        <div className=\"col-lg-6 col-md-6 col-sm-12\">\n          <h4 className=\"text-capitalize\">{book.replace(/_/g, ' ')} {chapter}:{verseNumber}</h4>\n          <hr />\n          <div className=\"sticky-top\">\n            {verse ? <SingleVerse verse={verse} /> : <LoadingBar />}\n            <hr />\n            {!editing && verse && user.status === 'LOGGED_IN' && <button type=\"button\" className=\"btn btn-warning\" onClick={addNewInsight}>Add Insight</button>}\n            {editing && verse ? <AddInsight verse={verse} insight={newInsight} setInsight={setNewInsight} toggle={toggleEditing} /> : null}\n          </div>\n        </div>\n        <div className=\"col-lg-6 col-md-6 col-sm-12\">\n          {verse ? null : <LoadingBar />}\n\n          {!editing && verse ?\n            <InsightList verse={verse} insights={insights} toggle={toggleEditing} setInsight={setNewInsight} />\n            : null}\n\n          {editing && verse ?\n            <>\n              <h4>Preview</h4>\n              <SingleInsight verse={verse} insight={new Insight(null, verse.getVerseId(), newInsight.deltaOps, newInsight.fragment, newInsight.source)} />\n            </>\n            : null}\n        </div>\n      </div>\n    </VerseHighlightContext.Provider>\n  )\n}\n\nexport default InsightListPage\n","import React from 'react';\nimport { Redirect } from 'react-router-dom'\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport firebase from 'firebase/app';\nimport useFirebaseUser from '../firebase/FirebaseUser';\n\nconst uiConfig = {\n  signInFlow: 'popup',\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID\n  ],\n  callbacks: {\n    signInSuccessWithAuthResult: () => false\n  }\n}\n\nfunction LoginScreen(props) {\n  const userState = useFirebaseUser()\n\n  React.useEffect(() => {\n    if (userState.status === 'UNAUTHORIZED') {\n      userState.user.delete().catch((error) => {\n        console.log(\"An error occurred while deleting an unauthorized user. \", error);\n      })\n    }\n  }, [userState])\n\n  let returnTo = props.location.search.split('=')[1]\n  if (returnTo === undefined || returnTo === '') {\n    returnTo = '/'\n  }\n\n  if (userState.status === 'UNAUTHORIZED') {\n    return <Redirect to=\"/unauthorized\" />\n  }\n  else if (userState.status === 'LOGGED_IN') {\n    return <Redirect to={returnTo} />\n  }\n  else {\n    return (\n      <div>\n        <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n      </div>\n    )\n  }\n}\n\nexport default LoginScreen\n","import React from 'react';\nimport firebase from 'firebase/app';\nimport useFirebaseUser from '../firebase/FirebaseUser';\n\nfunction UserStatus() {\n\n  const userState = useFirebaseUser()\n\n  if (userState.status === 'LOGGED_IN') {\n    return (\n      <form className=\"form-inline my-2 my-lg-0\">\n        <span className=\"text-light my-2 mr-sm-2\">{userState.user.email}</span>\n        <button className=\"btn btn-success my-2 my-sm-0\" onClick={() => firebase.auth().signOut()} type=\"submit\">Logout</button>\n      </form>\n    )\n  }\n\n  return (\n    <></>\n  )\n}\n\nexport default UserStatus\n","import React from 'react'\nimport UserStatus from './UserStatus'\n\nfunction Navbar() {\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-dark bg-primary\">\n      <div className=\"container\">\n        <a className=\"navbar-brand\" href=\"#/\">Enjoy the Scriptures</a>\n\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul className=\"navbar-nav mr-auto\">\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/scriptures\">Scriptures</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/topics\">Topics</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/about\">About</a>\n            </li>\n          </ul>\n          <UserStatus />\n        </div>\n      </div>\n    </nav>\n  )\n}\n\nexport default Navbar\n","import React from 'react'\n\nfunction NotFound() {\n  return (\n    <div className=\"alert alert-warning\">\n      <h4 className=\"alert-heading\">Not Found</h4>\n      <p className=\"mb-0\">The requested page does not exist.</p>\n      <a href=\"#/\" className=\"alert-link\">Return Home</a>\n    </div>\n  )\n}\n\nexport default NotFound\n","import React from 'react'\n\nfunction Unauthorized() {\n  return (\n    <div className=\"alert alert-danger\">\n      <h4 className=\"alert-heading\">User Not Found</h4>\n      <p className=\"mb-0\">You are not authorized to access this resource.</p>\n      <a className=\"alert-link\" href=\"#/\">Return Home</a>\n    </div>\n  )\n}\n\nexport default Unauthorized\n","import React from 'react'\n\nimport LoadingBar from './LoadingBar'\nimport ScriptureCache from '../firebase/ScriptureCache'\n\nfunction buildButton(label) {\n  const classes = \"text-capitalize text-white btn btn-success btn-lg\"\n  const href = '#/scriptures/' + label\n\n  return (\n    <div key={href} className=\"col-sm text-center text-nowrap p-3\">\n      <a href={href} role=\"button\" className={classes}>{label.replace(/_/g, ' ')}</a>\n    </div>\n  )\n}\n\nfunction VolumeListPage() {\n  const [volumes, setVolumes] = React.useState([])\n  const scriptureCache = new ScriptureCache()\n\n  React.useEffect(() => {\n    scriptureCache.getVolumes(setVolumes)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  let content;\n  if (volumes.length === 0) {\n    content = <LoadingBar />\n  }\n  else {\n    content = volumes.map(buildButton)\n  }\n\n  return (\n    <div>\n      <h1>Scriptures</h1>\n\n      <div className=\"row\">\n        {content}\n      </div>\n    </div>\n  )\n}\n\nexport default VolumeListPage\n","import React from 'react'\nimport { HashRouter, Route, Switch, Redirect } from 'react-router-dom'\n\nimport About from './About'\nimport Background from './Background'\nimport BookListPage from './BookListPage'\nimport Breadcrumb from './Breadcrumb'\nimport ChapterListPage from './ChapterListPage'\nimport ChapterTextPage from './ChapterTextPage'\nimport Footer from './Footer'\nimport Home from './Home'\nimport InsightListPage from './InsightListPage'\nimport LoginScreen from './LoginScreen'\nimport Navbar from './Navbar'\nimport NotFound from './NotFound'\nimport Unauthorized from './Unauthorized'\nimport VolumeListPage from './VolumeListPage'\nimport useFirebaseUser from '../firebase/FirebaseUser'\n\nfunction ComingSoon() {\n  return (\n    <header className=\"coming-soon\">\n      <h1 className=\"py-4 font-weight-bold\">Enjoy the Scriptures</h1>\n      <p className=\"py-4 font-weight-bold\">Coming Soon</p>\n    </header>\n  )\n}\n\nfunction App() {\n  const userState = useFirebaseUser()\n\n  if (userState.status === 'LOGGED_OUT') {\n    return (\n      <HashRouter basename='/'>\n        <div className=\"App\">\n          <Switch>\n            <Route exact path=\"/login\" component={LoginScreen} />\n            <Route component={ComingSoon} />\n          </Switch>\n        </div>\n      </HashRouter>\n    )\n  }\n\n  return (\n    <HashRouter basename='/'>\n      <div className=\"App\">\n        <Navbar />\n        <Route path='/' component={Breadcrumb} />\n\n        <Route exact path=\"/\" component={Background} />\n\n        <div className=\"container py-5\">\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path=\"/about\" component={About} />\n\n            {/* Scripture Notebook */}\n            <Route exact path=\"/scriptures\" component={VolumeListPage} />\n            <Route exact path=\"/scriptures/:volume\" component={BookListPage} />\n            <Route exact path=\"/scriptures/:volume/:book\" component={ChapterListPage} />\n            <Route exact path=\"/scriptures/:volume/:book/:chapter\" component={ChapterTextPage} />\n            <Route exact path=\"/scriptures/:volume/:book/:chapter/:verse\" component={InsightListPage} />\n\n            {/* Topical Index */}\n            <Route exact path=\"/topics\" />\n\n            {/* Login Related */}\n            <Route exact path=\"/login\" component={LoginScreen} />\n            <Route exact path=\"/unauthorized\" component={Unauthorized} />\n\n            {/* 404 */}\n            <Route exact path=\"/not_found\" component={NotFound} />\n            <Redirect to=\"/not_found\" />\n          </Switch>\n        </div>\n\n        {/* Invisble placeholder to prevent the sticky footer from covering content */}\n        <div className=\"my-5\"></div>\n\n        <Footer />\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default App\n","import 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js'\nimport 'nouislider/distribute/nouislider.min.css'\nimport 'quill/dist/quill.snow.css'\n\nimport './ets.css'\nimport './litera.min.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './components/App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}