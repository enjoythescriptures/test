{"version":3,"sources":["firebase/FirebaseConfig.js","firebase/FirebaseUser.js","components/LoginScreen.js","components/Home.js","components/About.js","components/UserStatus.js","components/Navbar.js","components/Footer.js","components/App.js","index.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","firebase","initializeApp","db","firestore","firebaseUserReducer","state","action","type","user","status","Error","useFirebaseUser","React","useReducer","dispatch","useEffect","auth","onAuthStateChanged","email","docRef","collection","doc","Promise","resolve","reject","get","then","exists","data","catch","error","console","userIsAuthorized","isAuthorized","uiConfig","signInFlow","signInOptions","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","LoginScreen","userState","delete","log","to","firebaseAuth","Home","alt","src","style","width","height","backgroundPosition","backgroundRepeat","backgroundSize","About","UserStatus","className","onClick","signOut","Navbar","href","Footer","loginButton","process","replace","Unauthorized","App","basename","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"sSAgDA,IAAMA,EAnCmB,CACvBC,OAAQ,0CACRC,WAAY,4CACZC,YAAa,mDACbC,UAAW,4BACXC,cAAe,GACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gBA8BFC,EAFKC,IAASC,cAAcX,GC1CrCY,G,YAAKF,IAASG,UAAUJ,IAoB9B,SAASK,EAAoBC,EAAOC,GAClC,OAAQA,EAAOC,MACb,IAAK,aACH,MAAO,CACLC,KAAM,KACNC,OAAQ,cAEZ,IAAK,UACH,MAAO,CACLD,KAAMF,EAAOE,KACbC,OAAQ,WAEZ,IAAK,YACH,MAAO,CACLD,KAAMF,EAAOE,KACbC,OAAQ,aAEZ,IAAK,eACH,MAAO,CACLD,KAAMF,EAAOE,KACbC,OAAQ,gBAEZ,QACE,MAAM,IAAIC,OAmCDC,MA5Bf,WAA4B,IAAD,EACCC,IAAMC,WAAWT,EAAqB,CAC9DI,KAAM,KACNC,OAAQ,eAHe,mBAClBJ,EADkB,KACXS,EADW,KAyBzB,OAnBAF,IAAMG,WAAU,WACd,OAAOf,IAASgB,OAAOC,oBAAmB,SAACT,GAC5B,OAATA,EACFM,EAAS,CAAEP,KAAM,gBAGjBO,EAAS,CAAEP,KAAM,UAAWC,SA5DpC,SAA0BU,GACxB,IAAMC,EAASjB,EAAGkB,WAAW,SAASC,IAAIH,GAE1C,OAAO,IAAII,SAAQ,SAACC,EAASC,GAC3BL,EAAOM,MAAMC,MAAK,SAACL,GACbA,EAAIM,SAAkC,IAAxBN,EAAIO,OAAJ,MAChBL,GAAQ,GAGRA,GAAQ,MAETM,OAAM,SAACC,GACRC,QAAQD,MAAM,2BAA4BA,GAC1CN,EAAOM,SAgDLE,CAAiBxB,EAAKU,OAAOQ,MAAK,SAACO,GAE/BnB,EADEmB,EACO,CAAE1B,KAAM,YAAaC,QAGrB,CAAED,KAAM,eAAgBC,kBAKxC,IAEIH,GC5EH6B,EAAW,CACfC,WAAY,QACZC,cAAe,CACbpC,IAASgB,KAAKqB,mBAAmBC,aAEnCC,UAAW,CACTC,4BAA6B,kBAAM,KA8BxBC,MA1Bf,WACE,IAAMC,EAAY/B,IAUlB,OARAC,IAAMG,WAAU,WACW,iBAArB2B,EAAUjC,QACZiC,EAAUlC,KAAKmC,SAASd,OAAM,SAACC,GAC7BC,QAAQa,IAAI,0DAA2Dd,QAG1E,CAACY,IAEqB,iBAArBA,EAAUjC,OACL,kBAAC,IAAD,CAAUoC,GAAG,kBAEQ,cAArBH,EAAUjC,OACV,kBAAC,IAAD,CAAUoC,GAAG,MAIlB,6BACE,kBAAC,IAAD,CAAoBX,SAAUA,EAAUY,aAAc9C,IAASgB,WCpBxD+B,MAdf,WASE,OACE,yBAAKC,IAAI,gDAAgDC,IAAI,kBAAkBC,MATnE,CACZC,MAAO,OACPC,OAAQ,OACRC,mBAAoB,SACpBC,iBAAkB,YAClBC,eAAgB,YCJLC,EAFD,kBAAM,6BAAK,6CCoBVC,MAlBf,WAEE,IAAMf,EAAY/B,IAElB,MAAyB,cAArB+B,EAAUjC,OAEV,0BAAMiD,UAAU,4BACd,0BAAMA,UAAU,2BAA2BhB,EAAUlC,KAAKU,OAC1D,4BAAQwC,UAAU,+BAA+BC,QAAS,kBAAM3D,IAASgB,OAAO4C,WAAWrD,KAAK,UAAhG,WAMJ,sCC6BWsD,MA5Cf,WACE,OACE,oCACE,yBAAKH,UAAU,kDACb,yBAAKA,UAAU,aACb,uBAAGA,UAAU,eAAeI,KAAK,MAAjC,wBACA,wBAAIJ,UAAU,sBACZ,wBAAIA,UAAU,YACZ,uBAAGA,UAAU,WAAWI,KAAK,MAA7B,SAEF,wBAAIJ,UAAU,YACZ,uBAAGA,UAAU,WAAWI,KAAK,WAA7B,WAGJ,kBAAC,EAAD,QAIJ,yBAAKJ,UAAU,kDACb,yBAAKA,UAAU,aACb,wBAAIA,UAAU,iCACZ,wBAAIA,UAAU,YACZ,uBAAGA,UAAU,WAAWI,KAAK,YAA7B,kBAEF,wBAAIJ,UAAU,YACZ,uBAAGA,UAAU,WAAWI,KAAK,YAA7B,kBAEF,wBAAIJ,UAAU,YACZ,uBAAGA,UAAU,WAAWI,KAAK,YAA7B,mBAEF,wBAAIJ,UAAU,YACZ,uBAAGA,UAAU,WAAWI,KAAK,YAA7B,yBAEF,wBAAIJ,UAAU,YACZ,uBAAGA,UAAU,WAAWI,KAAK,YAA7B,0BAGJ,kBAAC,EAAD,UCdKC,MAvBf,WAEE,IAEIC,EAKJ,MAJyB,eAHPrD,IAGJF,SACZuD,EAAc,uBAAGN,UAAU,aAAaI,KAAK,WAA/B,UAId,4BAAQJ,UAAU,gDAChB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,qCAAf,2BACE,uBAAGI,KAAMG,uCAAyBA,sCAAuBC,QAAQ,WAAY,MAE/E,yBAAKR,UAAU,oBACZM,MCSX,SAASG,IACP,OACE,yBAAKT,UAAU,sBACb,wBAAIA,UAAU,iBAAd,kBACA,uBAAGA,UAAU,QAAb,mDACA,uBAAGA,UAAU,aAAaI,KAAK,MAA/B,gBAKSM,MA7Bf,WACE,OACE,kBAAC,IAAD,CAAYC,SAAS,KACnB,yBAAKX,UAAU,OACb,kBAAC,EAAD,MAEA,kBAAC,IAAD,CAAOY,OAAK,EAACC,KAAK,IAAIC,UAAWzB,IACjC,yBAAKW,UAAU,kBACb,kBAAC,IAAD,CAAOa,KAAK,SAASC,UAAWhB,IAChC,kBAAC,IAAD,CAAOe,KAAK,SAASC,UAAW/B,IAChC,kBAAC,IAAD,CAAO8B,KAAK,gBAAgBC,UAAWL,KAGzC,kBAAC,EAAD,SCdRM,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.147bfbff.chunk.js","sourcesContent":["import firebase from 'firebase/app'\n\nvar devFirebaseConfig = {\n  apiKey: \"AIzaSyDkKbOrGudHylmvFiRMW4SkwxXlFxQt-l4\",\n  authDomain: \"enjoy-the-scriptures-dev.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures-dev.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures-dev\",\n  storageBucket: \"\",\n  messagingSenderId: \"160411774173\",\n  appId: \"1:160411774173:web:24609264832f2816d1ff34\",\n  measurementId: \"G-JWEZ0Y38BM\"\n};\n\nvar testFirebaseConfig = {\n  apiKey: \"AIzaSyDcWkM-EwFO9BrLbHAiZf_NcPKT1jg_B4M\",\n  authDomain: \"enjoy-the-scriptures-test.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures-test.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures-test\",\n  storageBucket: \"\",\n  messagingSenderId: \"854443437513\",\n  appId: \"1:854443437513:web:b0f58f35a8d4a823c64c18\",\n  measurementId: \"G-EDCKCQPLL0\"\n};\n\nvar prodFirebaseConfig = {\n  apiKey: \"AIzaSyCJ8QdL00_QZlNHsdlLo_z_ROHV550HN20\",\n  authDomain: \"enjoy-the-scriptures.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures\",\n  storageBucket: \"enjoy-the-scriptures.appspot.com\",\n  messagingSenderId: \"812786960298\",\n  appId: \"1:812786960298:web:5692ec20094481a1304dd3\",\n  measurementId: \"G-Q6Q0Z99K1H\"\n};\n\nfunction getFirebaseConfig() {\n  const config = process.env.REACT_APP_FIREBASE_CONFIG\n  if (config === 'production') {\n    return prodFirebaseConfig\n  }\n  else if (config === 'test') {\n    return testFirebaseConfig\n  }\n  else {\n    return devFirebaseConfig\n  }\n}\n\nconst firebaseConfig = getFirebaseConfig()\nconst firebaseApp = firebase.initializeApp(firebaseConfig)\n\nexport default firebaseApp\n","import React from 'react'\nimport firebase from 'firebase/app'\nimport firebaseApp from '../firebase/FirebaseConfig'\n\nimport 'firebase/auth'\nimport 'firebase/firestore'\n\nconst db = firebase.firestore(firebaseApp)\n\nfunction userIsAuthorized(email) {\n  const docRef = db.collection('users').doc(email)\n\n  return new Promise((resolve, reject) => {\n    docRef.get().then((doc) => {\n      if (doc.exists && doc.data()['admin'] === true) {\n        resolve(true)\n      }\n      else {\n        resolve(false)\n      }\n    }).catch((error) => {\n      console.error(\"Error getting document: \", error)\n      reject(error)\n    })\n  })\n}\n\nfunction firebaseUserReducer(state, action) {\n  switch (action.type) {\n    case 'LOGGED_OUT':\n      return {\n        user: null,\n        status: 'LOGGED_OUT'\n      }\n    case 'PENDING':\n      return {\n        user: action.user,\n        status: 'PENDING'\n      }\n    case 'LOGGED_IN':\n      return {\n        user: action.user,\n        status: 'LOGGED_IN'\n      }\n    case 'UNAUTHORIZED':\n      return {\n        user: action.user,\n        status: 'UNAUTHORIZED'\n      }\n    default:\n      throw new Error()\n  }\n}\n\n/**\n * Custom hook for accessing the current firebase user, if one is logged in.\n */\nfunction useFirebaseUser() {\n  const [state, dispatch] = React.useReducer(firebaseUserReducer, {\n    user: null,\n    status: 'LOGGED_OUT'\n  })\n\n  React.useEffect(() => {\n    return firebase.auth().onAuthStateChanged((user) => {\n      if (user === null) {\n        dispatch({ type: 'LOGGED_OUT' })\n      }\n      else {\n        dispatch({ type: 'PENDING', user })\n        userIsAuthorized(user.email).then((isAuthorized) => {\n          if (isAuthorized) {\n            dispatch({ type: 'LOGGED_IN', user })\n          }\n          else {\n            dispatch({ type: 'UNAUTHORIZED', user })\n          }\n        })\n      }\n    });\n  }, [])\n\n  return state\n}\n\nexport default useFirebaseUser\n","import React from 'react';\nimport { Redirect } from 'react-router-dom'\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport firebase from 'firebase/app';\nimport useFirebaseUser from '../firebase/FirebaseUser';\n\nconst uiConfig = {\n  signInFlow: 'popup',\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID\n  ],\n  callbacks: {\n    signInSuccessWithAuthResult: () => false\n  }\n}\n\nfunction LoginScreen() {\n  const userState = useFirebaseUser()\n\n  React.useEffect(() => {\n    if (userState.status === 'UNAUTHORIZED') {\n      userState.user.delete().catch((error) => {\n        console.log(\"An error occurred while deleting an unauthorized user. \", error);\n      })\n    }\n  }, [userState])\n\n  if (userState.status === 'UNAUTHORIZED') {\n    return <Redirect to=\"/unauthorized\" />\n  }\n  else if (userState.status === 'LOGGED_IN') {\n    return <Redirect to=\"/\" />\n  }\n  else {\n    return (\n      <div>\n        <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n      </div>\n    )\n  }\n}\n\nexport default LoginScreen\n","import React from 'react';\n\nfunction Home() {\n  const style = {\n    width: '100%',\n    height: '100%',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover'\n  }\n\n  return (\n    <img alt=\"A pathway with trees on either side in autumn\" src=\"/background.jpg\" style={style} />\n  )\n}\n\nexport default Home\n","import React from 'react';\n\nconst About = () => <div><h2>This is me.</h2></div>\n\nexport default About\n","import React from 'react';\nimport firebase from 'firebase/app';\nimport useFirebaseUser from '../firebase/FirebaseUser';\n\nfunction UserStatus() {\n\n  const userState = useFirebaseUser()\n\n  if (userState.status === 'LOGGED_IN') {\n    return (\n      <form className=\"form-inline my-2 my-lg-0\">\n        <span className=\"text-light my-2 mr-sm-2\">{userState.user.email}</span>\n        <button className=\"btn btn-success my-2 my-sm-0\" onClick={() => firebase.auth().signOut()} type=\"submit\">Logout</button>\n      </form>\n    )\n  }\n\n  return (\n    <></>\n  )\n}\n\nexport default UserStatus\n","import React from 'react'\nimport UserStatus from './UserStatus'\n\nfunction Navbar() {\n  return (\n    <>\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-primary\">\n        <div className=\"container\">\n          <a className=\"navbar-brand\" href=\"#/\">Enjoy the Scriptures</a>\n          <ul className=\"navbar-nav mr-auto\">\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/\">Home</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/about\">About</a>\n            </li>\n          </ul>\n          <UserStatus />\n        </div>\n      </nav>\n\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-success\">\n        <div className=\"container\">\n          <ul className=\"navbar-nav m-auto text-center\">\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/volume\">Old Testament</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/volume\">New Testament</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/volume\">Book of Mormon</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/volume\">Doctrine & Covenants</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/volume\">Pearl of Great Price</a>\n            </li>\n          </ul>\n          <UserStatus />\n        </div>\n      </nav>\n    </>\n  )\n}\n\nexport default Navbar\n","import React from 'react'\nimport useFirebaseUser from '../firebase/FirebaseUser'\n\nfunction Footer() {\n\n  const userState = useFirebaseUser()\n\n  let loginButton\n  if (userState.status === 'LOGGED_OUT') {\n    loginButton = <a className=\"text-muted\" href=\"#/login\">Login</a>\n  }\n\n  return (\n    <footer className=\"page-footer font-small bg-light fixed-bottom\">\n      <div className=\"container\">\n        <div className=\"footer-copyright text-center py-2\">© 2019 Copyright:&nbsp;\n          <a href={process.env.PUBLIC_URL}>{process.env.PUBLIC_URL.replace('https://', '')}</a>\n        </div>\n        <div className=\"text-center py-2\">\n          {loginButton}\n        </div>\n      </div>\n    </footer>\n  )\n}\n\nexport default Footer\n","import React from 'react';\nimport { HashRouter, Route } from 'react-router-dom';\n\nimport LoginScreen from './LoginScreen';\nimport Home from './Home'\nimport About from './About'\nimport Navbar from './Navbar';\nimport Footer from './Footer'\n\nfunction App() {\n  return (\n    <HashRouter basename='/'>\n      <div className=\"App\">\n        <Navbar />\n\n        <Route exact path=\"/\" component={Home} />\n        <div className=\"container py-5\">\n          <Route path=\"/about\" component={About} />\n          <Route path=\"/login\" component={LoginScreen} />\n          <Route path=\"/unauthorized\" component={Unauthorized} />\n        </div>\n\n        <Footer />\n      </div>\n    </HashRouter>\n  );\n}\n\nfunction Unauthorized() {\n  return (\n    <div className=\"alert alert-danger\">\n      <h4 className=\"alert-heading\">User Not Found</h4>\n      <p className=\"mb-0\">You are not authorized to access this resource.</p>\n      <a className=\"alert-link\" href=\"#/\">Return Home</a>\n    </div>\n  )\n}\n\nexport default App\n","import 'bootstrap-css-only/css/bootstrap.min.css';\nimport './litera.min.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}