{"version":3,"sources":["components/pages/AboutPage.js","components/Background.js","components/LoadingBar.js","firebase/FirebaseConfig.js","model/Verse.js","util/LocalStorageCache.js","util/ContentId.js","firebase/Scriptures.js","components/pages/BookListPage.js","components/Breadcrumb.js","components/pages/ChapterListPage.js","components/VerseHighlightContext.js","components/SingleVerse.js","firebase/Insights.js","components/SingleInsight.js","components/EditableInsight.js","components/FragmentSelector.js","components/InsightEditor.js","components/InsightEditorModal.js","firebase/Files.js","components/ScriptureTagSelector.js","components/FileUploader.js","components/FileUploaderModal.js","firebase/FirebaseUser.js","components/FilesTable.js","components/pages/ChapterTextPage.js","components/Footer.js","components/pages/HomePage.js","util/InsightGroups.js","components/InsightGroup.js","components/InsightList.js","components/pages/InsightListPage.js","components/pages/LoginPage.js","components/UserStatus.js","components/Navbar.js","components/pages/NotFoundPage.js","components/pages/UnauthorizedPage.js","components/pages/VolumeListPage.js","components/App.js","index.js"],"names":["AboutPage","Background","alt","src","style","position","top","zIndex","width","height","backgroundPosition","backgroundRepeat","backgroundSize","opacity","LoadingBar","className","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseApp","firebase","initializeApp","Verse","volumeName","bookName","chapter","number","text","this","volume","book","n","join","LocalStorageCache","storage","window","localStorage","x","setItem","removeItem","e","DOMException","code","name","length","key","ttl","item","getItem","JSON","parse","Date","now","w","v","value","obj","stringify","console","error","assemble","pieces","getContentId","content","undefined","push","split","map","s","substring","db","firestore","lsc","available","buildVerseList","verses","Object","keys","curry","fn","args","_arg","cacheResult","cb","Scriptures","volumes","doc","get","then","data","catch","err","fetchVolumes","books","fetchBooks","chapterCount","fetchChapterCount","verseCount","fetchVerseCount","getVerseCount","verseTexts","Array","includes","collection","querySnapshot","docs","forEach","id","fetchVerses","verse","getVerses","verseList","BookListPage","match","params","React","useState","setBooks","scriptures","useEffect","getBooks","label","href","role","replace","buildButton","toBreadcrumb","segment","Breadcrumb","props","segments","concat","location","pathname","filter","seg","crumbs","i","last","classNames","backgroundColor","marginBottom","ChapterListPage","setChapterCount","getChapterCount","c","VerseHighlightContext","createContext","SingleVerse","clickHandler","clickable","redirect","setRedirect","highlightContext","useContext","divStyle","getHref","to","verseContent","h","highlight","first","words","slice","onClick","buildInsight","deltaOps","source","link","created","toDate","updated","fragment","Insights","cid","where","insight","o","l","a","u","FieldValue","serverTimestamp","f","add","set","delete","SingleInsight","updateHighlight","start","end","target","rel","insightHtml","QuillDeltaToHtmlConverter","convert","onMouseEnter","onMouseLeave","getMonth","getDate","getFullYear","EditableInsight","user","toggle","setInsight","btn","type","status","clear","FragmentSelector","sliderRef","createRef","lastWord","sliderNode","current","noUiSlider","create","connect","range","step","on","values","handle","destroy","htmlFor","ref","InsightEditor","editorRef","isSubmitting","setSubmitting","insights","quill","Quill","theme","placeholder","setContents","d","od","getContents","ops","onSubmit","event","saveInsight","preventDefault","required","onChange","disabled","InsightEditorModal","editing","isOpen","onRequestClose","buildFile","getDownloadURL","url","uuid","extension","scriptureTags","size","Files","Promise","all","fileObj","metadata","progressCb","uuidv4","fileData","b","cids","dbRef","put","snapshot","bytesTransferred","totalBytes","log","update","getLabel","toUpperCase","ScriptureTagSelector","onScriptureTagChange","setData","initialCid","getVolumes","bookChildren","chapterChildren","verseChildren","child","children","buildDataTree","texts","_","selectedNodes","clearSearchOnChange","extScriptureTags","FileUploader","files","progress","setProgress","localTags","saveFile","file","tags","aria-valuenow","aria-valuemin","aria-valuemax","FileUploaderModal","uploading","firebaseUserReducer","state","action","Error","useFirebaseUser","useReducer","dispatch","auth","onAuthStateChanged","email","docRef","resolve","reject","exists","userIsAuthorized","isAuthorized","FilesTable","fileRows","prettyBytes","scope","DEFAULT_INSIGHT","ChapterTextPage","chapterContent","insightContent","filesContent","setVerses","setInsights","setFiles","setEditing","setUploading","newInsight","setNewInsight","insightsStore","filesStore","toggleEditing","toggleUploading","getInsights","getFiles","withRouter","loginButton","userState","process","HomePage","compareInsightsByFragmentAndSource","compareIdx","r","localeCompare","groupInsights","sort","groups","g","f1","f2","from","groupInsightsByFragment","InsightGroup","insightGroup","phrase","idx","InsightList","ig","InsightListPage","verseNumber","setVerse","getVerse","getContent","uiConfig","signInFlow","signInOptions","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","LoginPage","returnTo","search","firebaseAuth","UserStatus","signOut","Navbar","data-toggle","data-target","aria-controls","aria-expanded","aria-label","NotFoundPage","UnauthorizedPage","VolumeListPage","setVolumes","ComingSoonPage","App","setHighlight","contextState","basename","exact","path","component","Provider","ReactModal","setAppElement","ReactDOM","render","document","getElementById"],"mappings":"kQAaeA,MAXf,WACE,OACE,6BACE,qCACA,sDCcSC,MAlBf,WAaE,OACE,yBAAKC,IAAI,gDAAgDC,IAAI,kBAAkBC,MAbnE,CACZC,SAAU,QACVC,IAAK,EACLC,QAAS,EACTC,MAAO,OACPC,OAAQ,OACRC,mBAAoB,SACpBC,iBAAkB,YAClBC,eAAgB,QAChBC,QAAS,UCFEC,MARf,WACE,OACE,yBAAKC,UAAU,mBACb,yBAAKb,IAAI,UAAUC,IAAI,iB,uCC2C7B,IAAMa,EAnCmB,CACvBC,OAAQ,0CACRC,WAAY,4CACZC,YAAa,mDACbC,UAAW,4BACXC,cAAe,GACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gBA8BFC,EAFKC,IAASC,cAAcX,GC/B5BY,G,iBAjBb,WAAYC,EAAYC,EAAUC,EAASC,EAAQC,GAAO,oBACxDC,KAAKC,OAASN,EACdK,KAAKE,KAAON,EACZI,KAAKH,QAAUA,EACfG,KAAKG,EAAIL,EACTE,KAAKD,KAAOA,E,sDAIZ,MAAO,CAAC,cAAeC,KAAKC,OAAQD,KAAKE,KAAMF,KAAKH,QAASG,KAAKG,GAAGC,KAAK,O,mCAI1E,MAAO,CAACJ,KAAKC,OAAQD,KAAKE,KAAMF,KAAKH,QAASG,KAAKG,O,MCkDxCE,E,WA/Db,aAAe,oBACbL,KAAKM,QAAU,K,wDAKf,IACEN,KAAKM,QAAUC,OAAOC,aACtB,IAAIC,EAAI,mBAGR,OAFAT,KAAKM,QAAQI,QAAQD,EAAGA,GACxBT,KAAKM,QAAQK,WAAWF,IACjB,EAET,MAAMG,GACJ,OAAOA,aAAaC,eAEL,KAAXD,EAAEE,MAES,OAAXF,EAAEE,MAGS,uBAAXF,EAAEG,MAES,+BAAXH,EAAEG,OAEDf,KAAKM,SAAmC,IAAxBN,KAAKM,QAAQU,U,8BAI9BC,EAAKC,GACXD,EAAM,OAASA,EACf,IAAIE,EAAOX,aAAaY,QAAQH,GAEhC,OAAY,MAARE,EACK,MAGTA,EAAOE,KAAKC,MAAMH,GACdI,KAAKC,MAAQL,EAAKM,EAAIP,GACxBV,aAAaG,WAAWM,GACjB,MAGFE,EAAKO,K,8BAGNT,EAAKU,GACXV,EAAM,OAASA,EACf,IAAIW,EAAM,CACRF,EAAGC,EACHF,EAAGF,KAAKC,OAGV,IACEhB,aAAaE,QAAQO,EAAKI,KAAKQ,UAAUD,IAE3C,MAAOhB,GACLkB,QAAQC,MAAM,mDAAqDH,EAAM,UAAYhB,Q,KC1D3F,SAASoB,EAASC,GAChB,OAAOA,EAAO7B,KAAK,KA4BN8B,MAzBf,SAAsBC,GACpB,IAAIF,EAAS,GAEb,YAAmBG,IAAfD,EAAQ,GAGAH,EAASC,IAFnBA,EAAOI,KAAKF,EAAQ,GAAGG,MAAM,KAAKC,KAAI,SAAAC,GAAC,OAAIA,EAAE,MAAIpC,KAAK,UAIrCgC,IAAfD,EAAQ,GAGAH,EAASC,IAFnBA,EAAOI,KAAKF,EAAQ,GAAGG,MAAM,SAASC,KAAI,SAAAC,GAAC,OAAIA,EAAEC,UAAU,EAAG,MAAIrC,KAAK,WAItDgC,IAAfD,EAAQ,GAGAH,EAASC,IAFnBA,EAAOI,KAAKF,EAAQ,SAIHC,IAAfD,EAAQ,IACVF,EAAOI,KAAKF,EAAQ,IAGfH,EAASC,OClBZS,EAAKlD,IAASmD,UAAUpD,GAGxBqD,GAAM,IAAIvC,GAAoBwC,YAAc,IAAIxC,EAAsB,KAgD5E,SAASyC,EAAe7C,EAAQC,EAAML,EAASkD,GAC7C,OAAOC,OAAOC,KAAKF,GAAQR,KAAI,SAAUpC,GACvC,OAAO,IAAIT,EAAMO,EAAQC,EAAML,EAASM,EAAG4C,EAAO5C,OAItD,SAAS+C,EAAMC,GAAc,IAAD,uBAANC,EAAM,iCAANA,EAAM,kBAC1B,OAAO,WAAc,IAAD,uBAATC,EAAS,yBAATA,EAAS,gBAChB,OAAOF,EAAE,WAAF,EAAMC,EAAN,OAAeC,KAI5B,SAASC,EAAYC,EAAItC,EAAKU,GAC5BiB,EAAIlC,QAAQO,EAAKU,GACjB4B,EAAG5B,G,IAsFU6B,E,mGAlFFD,GACT,IACIE,EAAUb,EAAIxB,QADN,YApEE,QAuEE,OAAZqC,EACFF,EAAGE,GArET,SAAsBF,GACpBb,EAAGgB,IAAI,oBAAoBC,MAAMC,MAAK,SAAUF,GAC9CH,EAAGG,EAAIG,OAAJ,YACFC,OAAM,SAAUC,GACjBjC,QAAQC,MAAM,2BAA4BgC,MAoExCC,CAAad,EAAMI,EAAaC,EAPtB,gB,+BAWLtD,EAAQsD,GACf,IAAMtC,EAAM,KAAOiB,EAAa,CAACjC,IAC7BgE,EAAQrB,EAAIxB,QAAQH,EAjFV,QAmFA,OAAVgD,EACFV,EAAGU,GAzET,SAAoBhE,EAAQsD,GAC1Bb,EAAGgB,IAAI,4BAA8BzD,GAAQ0D,MAAMC,MAAK,SAAUF,GAChEH,EAAGG,EAAIG,OAAJ,UACFC,OAAM,SAAUC,GACjBjC,QAAQC,MAAM,oCAAqC9B,EAAQ8D,MAwEzDG,CAAWjE,EAAQiD,EAAMI,EAAaC,EAAItC,M,sCAI9BhB,EAAQC,EAAMqD,GAC5B,IAAMtC,EAAM,KAAOiB,EAAa,CAACjC,EAAQC,IACrCiE,EAAevB,EAAIxB,QAAQH,EA7FjB,QA+FO,OAAjBkD,EACFZ,EAAGY,GA7ET,SAA2BlE,EAAQC,EAAMqD,GACvCb,EAAGgB,IAAI,4BAA8BzD,EAAS,UAAYC,GAAMyD,MAAMC,MAAK,SAAUF,GACnFH,EAAGG,EAAIG,OAAJ,aACFC,OAAM,SAAUC,GACjBjC,QAAQC,MAAM,oCAAsC9B,EAAS,KAAOC,EAAM6D,MA4ExEK,CAAkBnE,EAAQC,EAAMgD,EAAMI,EAAaC,EAAItC,M,oCAI7ChB,EAAQC,EAAML,EAAS0D,GACnC,IAAMtC,EAAM,KAAOiB,EAAa,CAACjC,EAAQC,EAAML,IAC3CwE,EAAazB,EAAIxB,QAAQH,EAzGf,QA0GK,OAAfoD,EACFd,EAAGc,GAhFT,SAAyBpE,EAAQC,EAAML,EAAS0D,GAC9Cb,EAAGgB,IAAI,4BAA8BzD,EAAS,UAAYC,EAAO,aAAeL,GAAS8D,MAAMC,MAAK,SAAUF,GAC5GH,EAAGG,EAAIG,OAAJ,WACFC,OAAM,SAAUC,GACjBjC,QAAQC,MAAM,kCAAoC9B,EAAS,KAAOC,EAAO,aAAeL,EAASkE,MA+E/FO,CAAgBrE,EAAQC,EAAML,EAASqD,EAAMI,EAAaC,EAAItC,M,gCAIxDhB,EAAQC,EAAML,EAAS0D,GAC/BvD,KAAKuE,cAActE,EAAQC,EAAML,GAAS,SAAUwE,GAClD,IAAIG,EAAa,YAAIC,MAAMJ,GAAYpB,QAAQV,KAAI,SAAApC,GACjD,IAAMc,EAAM,KAAOiB,EAAa,CAACjC,EAAQC,EAAML,EAASM,EAAI,IAC5D,OAAOyC,EAAIxB,QAAQH,EAtHT,WAyHZ,GAAKuD,EAAWE,SAAS,OAtF/B,SAAqBzE,EAAQC,EAAML,EAAS0D,GAC1C,IAAIR,EAAS,GAEbL,EAAGiC,WAAW,4BAA8B1E,EAAS,UAAYC,EAAO,aAAeL,EAAU,WAAW8D,MAAMC,MAAK,SAAUgB,GAC/HA,EAAcC,KAAKC,SAAQ,SAAUpB,GACnCX,EAAOW,EAAIqB,IAAMrB,EAAIG,OAAJ,QAGnBN,EAAGR,MACFe,OAAM,SAAUC,GACjBjC,QAAQC,MAAM,6BAA+B9B,EAAS,KAAOC,EAAO,aAAeL,EAASkE,MAqFxFiB,CAAY/E,EAAQC,EAAML,GAAS,SAASkD,GAC1C,IAAK,IAAM5C,KAAK4C,EAAQ,CACtB,IAAM9B,EAAM,KAAOiB,EAAa,CAACjC,EAAQC,EAAML,EAASM,IACxDyC,EAAIlC,QAAQO,EAAK8B,EAAO5C,IAG1BoD,EAAGT,EAAe7C,EAAQC,EAAML,EAASkD,WAfb,CAC9B,IAAIA,EAAS,GACb,YAAI0B,MAAMJ,GAAYpB,QAAQ6B,SAAQ,SAAA3E,GACpC4C,EAAO5C,EAAI,GAAKqE,EAAWrE,MAG7BoD,EAAGT,EAAe7C,EAAQC,EAAML,EAASkD,U,+BAetC9C,EAAQC,EAAML,EAASoF,EAAO1B,GACrCvD,KAAKkF,UAAUjF,EAAQC,EAAML,GAAS,SAAUsF,GAC9C5B,EAAG4B,EAAUF,EAAQ,W,KC/GZG,MA3Bf,YAA0D,IASpDjD,EATqClC,EAAc,EAAjCoF,MAASC,OAAUrF,OAAc,EAC7BsF,IAAMC,SAAS,IADc,mBAChDvB,EADgD,KACzCwB,EADyC,KAEjDC,EAAa,IAAIlC,EAevB,OAbA+B,IAAMI,WAAU,WACdD,EAAWE,SAAS3F,EAAQwF,KAE3B,IAIDtD,EADmB,IAAjB8B,EAAMjD,OACE,kBAAC,EAAD,MAGAiD,EAAM1B,KAAI,SAAAsD,GAAK,OAzB7B,SAAqB5F,EAAQ4F,GAC3B,IACMC,EAAO,gBAAkB7F,EAAS,IAAM4F,EAE9C,OACE,yBAAK5E,IAAK6E,EAAMjH,UAAU,2DACxB,uBAAGiH,KAAMA,EAAMC,KAAK,SAASlH,UALjB,qDAKsCgH,EAAMG,QAAQ,KAAM,OAmB3CC,CAAYhG,EAAQ4F,MAIjD,6BACE,wBAAIhH,UAAU,mBAAmBoB,EAAO+F,QAAQ,KAAM,MACtD,yBAAKnH,UAAU,OACZsD,KCnCT,SAAS+D,EAAaC,GACpB,OAAOA,EAAQH,QAAQ,KAAM,KAuChBI,MApCf,SAAoBC,GAClB,IAAMC,EAAW,CAAC,QAAQC,OAAOF,EAAMG,SAASC,SAAShE,UAAU,GAAGH,MAAM,KAAKoE,QAAO,SAAAC,GAAG,MAAY,KAARA,MAC3Fb,EAAO,IACLc,EAASN,EAAS/D,KAAI,SAAUC,EAAGqE,GACvC,IAAIC,EAAOD,IAAMP,EAAStF,OAAS,EAE/B6F,EAAI,IACNf,GAAQ,IAAMtD,GAGhB,IAAIqD,EAAQ,uBAAGC,KAAMA,GAAOI,EAAa1D,IAErCuE,EAAa,kCAMjB,OALID,IACFC,GAAc,UACdlB,EAAQK,EAAa1D,IAIrB,wBAAIvB,IAAK6E,EAAMjH,UAAWkI,GACvBlB,MAKP,OACE,yBAAK3H,MAAO,CAAE8I,gBAAiB,YAC7B,yBAAKnI,UAAU,aACb,wBAAIA,UAAU,aAAaX,MAAO,CAAE+I,aAAc,MAC/CL,MC9BX,SAASX,EAAYhG,EAAQC,EAAML,GACjC,IACMiG,EAAO,gBAAkB7F,EAAS,IAAMC,EAAO,IAAML,EAE3D,OACE,yBAAKoB,IAAK6E,EAAMjH,UAAU,2DACxB,uBAAGiH,KAAMA,EAAMC,KAAK,SAASlH,UALjB,qDAKsCgB,IAmCzCqH,MA9Bf,YAAmE,IAS7D/E,EAT4D,IAAvCkD,MAASC,OAAUrF,EAAoB,EAApBA,OAAQC,EAAY,EAAZA,KAAY,EACxBqF,IAAMC,SAAS,GADS,mBACzDrB,EADyD,KAC3CgD,EAD2C,KAE1DzB,EAAa,IAAIlC,EAQvB,GANA+B,IAAMI,WAAU,WACdD,EAAW0B,gBAAgBnH,EAAQC,EAAMiH,KAExC,IAGkB,IAAjBhD,EACFhC,EAAU,kBAAC,EAAD,UAEP,CACHA,EAAU,GACV,IAAK,IAAIkF,EAAI,EAAGA,GAAKlD,EAAckD,IACjClF,EAAQE,KAAK4D,EAAYhG,EAAQC,EAAMmH,IAI3C,OACE,6BACE,wBAAIxI,UAAU,mBAAmBqB,EAAK8F,QAAQ,KAAM,MACpD,yBAAKnH,UAAU,OACZsD,K,OCpCMmF,EAFe/B,IAAMgC,cAAc,ICmDnCC,MA9Cf,YAA4C,IAStCC,EATiBxC,EAAoB,EAApBA,MAAOyC,EAAa,EAAbA,UAAa,EACTnC,IAAMC,WADG,mBAClCmC,EADkC,KACxBC,EADwB,KAEnCC,EAAmBtC,IAAMuC,WAAWR,GAEtCS,EAAW,mBAUf,GATIL,IACFK,GAAY,oBAIVL,IACFD,EAAe,kBAAMG,EAAY3C,EAAM+C,kBAGxB5F,IAAbuF,EACF,OAAO,kBAAC,IAAD,CAAUM,GAAIN,IAGvB,IAAIO,EAAejD,EAAMlF,KACnBoI,EAAIN,EAAiBO,UAC3B,QAAUhG,IAAN+F,GAAmBA,EAAEE,QAAUF,EAAErB,KAAM,CACzC,IAAMwB,EAAQrD,EAAMlF,KAAKuC,MAAM,KAC/B4F,EAAe,CACb,0BAAMjH,IAAI,UAAUqH,EAAMC,MAAM,EAAGJ,EAAEE,OAAOjI,KAAK,KAAO,KACxD,0BAAMa,IAAI,cAAcpC,UAAU,2BAC/ByJ,EAAMC,MAAMJ,EAAEE,MAAOF,EAAErB,MAAM1G,KAAK,MAErC,0BAAMa,IAAI,SAAS,IAAMqH,EAAMC,MAAMJ,EAAErB,MAAM1G,KAAK,OAItD,OACE,yBAAKvB,UAAWkJ,EAAUS,QAASf,GACjC,uBAAG5I,UAAU,gBACX,0BAAMA,UAAU,yBAAyBoG,EAAM9E,GAC/C,8BAAO+H,MCpCTxF,EAAKlD,IAASmD,UAAUpD,GAE9B,SAASkJ,EAAa/E,GACpB,IAAIG,EAAOH,EAAIG,OAEXgD,EAAI,CACN9B,GAAIrB,EAAIqB,GACR2D,SAAU7E,EAAI,EACd8E,OAAQ,CACN9C,MAAOhC,EAAI,EAAJ,EACP+E,KAAM/E,EAAI,EAAJ,GAERgF,QAAShF,EAAI,EAAQA,EAAI,EAAMiF,SAAW,KAC1CC,QAASlF,EAAI,EAAQA,EAAI,EAAMiF,SAAW,MAO5C,YAJkB1G,IAAdyB,EAAI,IACNgD,EAAEmC,SAAWnF,EAAI,GAGZgD,E,IA+CMoC,E,oGA1CD9G,EAASoB,GACnB,IAAM2F,EAAMhH,EAAaC,GACzBO,EAAGiC,WAAW,YAAYwE,MAAM,MAAO,KAAMD,GAAKvF,MAAMC,MAAK,SAAUgB,GACrErB,EAAGqB,EAAcC,KAAKtC,IAAIkG,OACzB3E,OAAM,SAAUC,GACjBjC,QAAQC,MAAM,6CAA8CmH,EAAKnF,Q,kCAIzDqF,GACV,IAAIvF,EAAO,CACTqF,IAAKhH,EAAakH,EAAQjH,SAC1BkH,EAAGD,EAAQV,SACXlG,EAAG,CACD8G,EAAGF,EAAQT,OAAO9C,MAClB0D,EAAGH,EAAQT,OAAOC,MAEpBY,EAAGhK,IAASmD,UAAU8G,WAAWC,mBAOnC,YAJyBtH,IAArBgH,EAAQJ,WACVnF,EAAK8F,EAAIP,EAAQJ,eAGA5G,IAAfgH,EAAQrE,IAEVlB,EAAKwD,EAAI7H,IAASmD,UAAU8G,WAAWC,kBAChChH,EAAGiC,WAAW,YAAYiF,IAAI/F,KAIrCA,EAAKwD,EAAI+B,EAAQP,QACVnG,EAAGiC,WAAW,YAAYjB,IAAI0F,EAAQrE,IAAI8E,IAAIhG,M,oCAI3CuF,GACZ,OAAO1G,EAAGiC,WAAW,YAAYjB,IAAI0F,EAAQrE,IAAI+E,a,8BC3BtCC,MAlCf,YAAqC,IAAZX,EAAW,EAAXA,QACjBvB,EAAmBtC,IAAMuC,WAAWR,GAEtCqB,EAASS,EAAQT,OAAO9C,MAK5B,SAASmE,EAAgBC,EAAOC,GAC1Bd,EAAQJ,UACVnB,EAAiBmC,gBAAgBC,EAAOC,QANhB9H,IAAxBgH,EAAQT,OAAOC,MAA8C,KAAxBQ,EAAQT,OAAOC,OACtDD,EAAS,uBAAG9J,UAAU,cAAciH,KAAMsD,EAAQT,OAAOC,KAAMuB,OAAO,SAASC,IAAI,uBAAuBhB,EAAQT,OAAO9C,QAS3H,IAAMwE,EAAc,IAAIC,4BAA0BlB,EAAQV,SAAU,IAAI6B,UAExE,OACE,yBAAK1L,UAAU,kBACb2L,aAAc,kBAAMpB,EAAQJ,SAAWgB,EAAgBZ,EAAQJ,SAAS,GAAII,EAAQJ,SAAS,IAAM,MACnGyB,aAAc,kBAAMT,EAAgB,EAAG,KACvC,yBAAKnL,UAAU,gBACZ8J,GAAU,0BAAM9J,UAAU,oBAAhB,IAAqC8J,EAArC,KACVrH,IAAM+I,GACNjB,EAAQP,SAAW,0BAAMhK,UAAU,oCAAoCuK,EAAQP,QAAQ6B,WAAa,EAAjF,IAAqFtB,EAAQP,QAAQ8B,UAArG,IAAiHvB,EAAQP,QAAQ+B,eACrJ,yBAAK/L,UAAU,gBCLRgM,MAtBf,YAAwE,IAA7CC,EAA4C,EAA5CA,KAAM7F,EAAsC,EAAtCA,MAAOmE,EAA+B,EAA/BA,QAAS2B,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,WAOjDC,EAAM,4BACVhK,IAAK,QAAUmI,EAAQrE,GACvBmG,KAAK,SACLrM,UAAU,mCACV2J,QATF,WACEwC,EAAW5B,GACX2B,MAGU,gBAMZ,OACE,wBAAI9J,IAAKmI,EAAQrE,IACf,kBAAC,EAAD,CAAe9D,IAAKmI,EAAQrE,GAAIE,MAAOA,EAAOmE,QAASA,IACtC,cAAhB0B,EAAKK,OAAyBF,EAAM,KACrC,yBAAK/M,MAAO,CAAEkN,MAAO,Y,wQCuBZC,OAvCf,YAAwD,IAA7BtL,EAA4B,EAA5BA,KAAMqJ,EAAsB,EAAtBA,QAAS4B,EAAa,EAAbA,WAClCnD,EAAmBtC,IAAMuC,WAAWR,GACpCgE,EAAY/F,IAAMgG,YA4BxB,OA1BAhG,IAAMI,WAAU,WACd,IAAM6F,EAAWzL,EAAKuC,MAAM,KAAKtB,OAEhByK,EAAeH,EAAxBI,QAgBR,OAfAC,IAAWC,OAAOH,EAAY,CAC5BxB,MAAOb,EAAQJ,SACf6C,SAAS,EACTC,MAAO,CACL,IAAO,EACP,IAAON,GAETO,KAAM,IAGRN,EAAWE,WAAWK,GAAG,UAAU,SAAUC,EAAQC,GACnDlB,GAAW,SAAAnE,GAAC,O,yVAAA,IAAUA,EAAV,CAAamC,SAAUiD,EAAO1J,KAAI,SAAApC,GAAC,OAAQ,EAAJA,UACnD0H,EAAiBmC,gBAAgBiC,EAAO,GAAIA,EAAO,OAG9C,WACLR,EAAWE,WAAWQ,aAIvB,IAGD,yBAAKtN,UAAU,cACb,2BAAOuN,QAAQ,UAAf,oBACA,yBAAKC,IAAKf,M,6jBCuDDgB,OArFf,YAAyE,IAAhDnK,EAA+C,EAA/CA,QAAS8C,EAAsC,EAAtCA,MAAOmE,EAA+B,EAA/BA,QAAS4B,EAAsB,EAAtBA,WAAYD,EAAU,EAAVA,OACtDwB,EAAYhH,IAAMgG,YAD8C,EAGhChG,IAAMC,UAAS,GAHiB,mBAG/DgH,EAH+D,KAGjDC,EAHiD,KAKhEC,EAAW,IAAIzD,EAsCrB,OArBA1D,IAAMI,WAAU,WACd,IAAIgH,EAAQ,IAAIC,IAAML,EAAUb,QAAS,CACvCmB,MAAO,OACPC,YAAa,+BAWf,OARI1D,EAAQV,UACViE,EAAMI,YAAY3D,EAAQV,UAG5BiE,EAAMX,GAAG,eAAe,SAAUgB,EAAGC,EAAIzK,GACvCwI,GAAW,SAAAnE,GAAC,aAAUA,EAAV,CAAa6B,SAAUiE,EAAMO,cAAcC,YAGlD,eAKN,IAGD,6BACE,0BAAMC,SAtCV,SAAsBC,GACpBZ,GAAc,GAEdrD,EAAQjH,QAAUA,EAClBuK,EAASY,YAAYlE,GAASxF,MAAK,WACjC6I,GAAc,GACd1B,OACCjH,OAAM,SAAUC,GACjBjC,QAAQC,MAAM,2CAA4CgC,GAC1D0I,GAAc,MAGhBY,EAAME,mBA2BDtI,GAAS,wCACTA,GAAS,kBAAC,EAAD,CAAaA,MAAOA,IAE7BA,GAAS,kBAAC,GAAD,CAAkBmE,QAASA,EAAS4B,WAAYA,EAAYjL,KAAMkF,EAAMlF,OAElF,yBAAKlB,UAAU,cACb,2BAAOuN,QAAQ,gBAAf,gBACA,2BAAOlB,KAAK,OAAOnG,GAAG,eAAelG,UAAU,eAAe2O,UAAQ,EACpE7L,MAAOyH,EAAQT,OAAO9C,MACtB4H,SAAU,SAAAJ,GAAK,OAAIrC,EAAW,MAAK5B,EAAN,CAAeT,OAAO,MAAMS,EAAQT,OAAf,CAAuB9C,MAAOwH,EAAMlD,OAAOxI,eAGjG,yBAAK9C,UAAU,cACb,2BAAOuN,QAAQ,eAAf,eACA,2BAAOlB,KAAK,MAAMnG,GAAG,cAAclG,UAAU,eAC3C8C,MAAOyH,EAAQT,OAAOC,KACtB6E,SAAU,SAAAJ,GAAK,OAAIrC,EAAW,MAAK5B,EAAN,CAAeT,OAAO,MAAMS,EAAQT,OAAf,CAAuBC,KAAMyE,EAAMlD,OAAOxI,eAGhG,yBAAK9C,UAAU,cACb,2BAAOuN,QAAQ,gBAAf,WACA,yBAAKC,IAAKE,EAAWxH,GAAG,kBAG1B,4BAAQmG,KAAK,SAASrM,UAAU,8BAA8B6O,SAAUlB,GAAxE,QACA,4BAAQtB,KAAK,SAASrM,UAAU,kCAAkC2J,QAASuC,EAAQ2C,SAAUlB,GAA7F,aC9COmB,OA3Bf,YAAuF,IAAzDC,EAAwD,EAAxDA,QAASzL,EAA+C,EAA/CA,QAAS8C,EAAsC,EAAtCA,MAAOmE,EAA+B,EAA/BA,QAAS4B,EAAsB,EAAtBA,WAAYD,EAAU,EAAVA,OAE1E,OACE,kBAAC,IAAD,CACE8C,OAAQD,EACRE,eAAgB,kBAAM/C,MACtB,yBAAKlM,UAAU,OACb,yBAAKA,UAAU,+BACb,4CACA,6BACA,kBAAC,GAAD,CACEsD,QAASA,EACT8C,MAAOA,EACPmE,QAASA,EACT4B,WAAYA,EACZD,OAAQA,KAEZ,yBAAKlM,UAAU,+BACb,uCACA,6BACA,kBAAC,EAAD,CAAeuK,QAASA,Q,6BClB5B9I,I,OAAUd,IAASc,QAAQf,IAC3BmD,GAAKlD,IAASmD,UAAUpD,GAG9B,SAASwO,GAAUrK,GACjB,IAAIG,EAAOH,EAAIG,OAEf,OAAOvD,GACJ+L,IAAI,WAAaxI,EAAI,KAAW,IAAMA,EAAI,GAC1CmK,iBACApK,MAAK,SAAUqK,GACd,MAAO,CACLlJ,GAAIrB,EAAIqB,GACRmJ,KAAMrK,EAAI,KACV9C,KAAM8C,EAAI,EACVsK,UAAWtK,EAAI,EACfuK,cAAevK,EAAI,KACnBoK,IAAKA,EACLI,KAAMxK,EAAI,EACVgF,QAAShF,EAAI,EAAQA,EAAI,EAAMiF,SAAW,KAC1CC,QAASlF,EAAI,EAAQA,EAAI,EAAMiF,SAAW,S,IA8DnCwF,G,iGAvDJnM,GACP,IAAM+G,EAAMhH,EAAaC,GACzB,OAAOO,GACJiC,WAAW,WACXwE,MAAM,OAAQ,iBAAkBD,GAChCC,MAAM,IAAK,KAAM,GACjBxF,MACAC,MAAK,SAAUgB,GACd,OAAO2J,QAAQC,IAAI5J,EAAcC,KAAKtC,IAAIwL,QACzCjK,OAAM,SAAUC,GACjBjC,QAAQC,MAAM,yCAA0CmH,EAAKnF,Q,+BAI1D0K,EAASC,EAAUC,EAAYpL,GACtC,IAAM2K,EAAOU,OAGTC,EAAW,CACbX,KAAMA,EACN/N,EAAGuO,EAAS3N,KACZyB,EAAG,EACHsM,EAAGL,EAAQJ,KACXzN,EAAG8N,EAASP,UACZY,KAAML,EAASN,cACf/G,EAAG7H,IAASmD,UAAU8G,WAAWC,kBACjCF,EAAGhK,IAASmD,UAAU8G,WAAWC,mBAGnChH,GAAGiC,WAAW,WAAWiF,IAAIiF,GAAUjL,MAAK,SAAUoL,GAEjC1O,GAAQ+L,IAAI,WAAa6B,EAAO,IAAMQ,EAAS3N,MAEtCkO,IAAIR,GACrBzC,GAAG,iBAAiB,SAAUkD,GACvCP,EAAW,EAAIO,EAASC,iBAAmBD,EAASE,WAAa,QAChE,SAAUrN,GACXD,QAAQuN,IAAI,+BAAgCR,EAAU9M,GACtDwB,EAAG,KAAMxB,MACR,WACDiN,EAAMM,OAAO,CACX9M,EAAG,IACFoB,KAAKL,GAAIO,OAAM,SAAU/B,GAC1BD,QAAQC,MAAM,kCAAmCA,GACjDwB,EAAG,KAAMxB,YAGZ+B,OAAM,SAAU/B,GACjBD,QAAQC,MAAM,qCAAsCA,GACpDwB,EAAG,KAAMxB,U,yBC7Ef,SAASwN,GAASxK,GAChB,OAAOA,EAAGiB,QAAQ,KAAM,KAAKA,QAAQ,iBAAiB,SAAAqB,GAAC,OAAIA,EAAEmI,iBAkGhDC,OAlCf,YAAkE,IAAlCtN,EAAiC,EAAjCA,QAASuN,EAAwB,EAAxBA,qBAEjChK,EAAa,IAAIlC,EAFwC,EAGvC+B,IAAMC,SAAS,MAHwB,mBAGxD3B,EAHwD,KAGlD8L,EAHkD,KAKzDzG,EAAMhH,EAAaC,GAezB,OAbAoD,IAAMI,WAAU,YApElB,SAAuBiK,EAAYlK,EAAYiK,GAC7C,IAAI3C,EAAI,GACRtH,EAAWmK,YAAW,SAAApM,GACpBA,EAAQqB,SAAQ,SAAApD,GACd,IAAIoO,EAAe,GACnBpK,EAAWE,SAASlE,GAAG,SAAAuC,GACrBA,EAAMa,SAAQ,SAAAgK,GACZ,IAAIiB,EAAkB,GACtBrK,EAAW0B,gBAAgB1F,EAAGoN,GAAG,SAAA3K,GAC/B,IADgD,IAAD,WACtCkD,GACP,IAAI2I,EAAgB,GACpBtK,EAAWnB,cAAc7C,EAAGoN,EAAGzH,GAAG,SAAAhD,GAChC,IAAK,IAAIlE,EAAI,EAAGA,GAAKkE,EAAYlE,IAAK,CACpC,IAAI+I,EAAMhH,EAAa,CAACR,EAAGoN,EAAGzH,EAAGlH,IAC7B8P,EAAQ,CACVpK,MAAO0J,GAAST,EAAI,IAAMzH,EAAI,IAAMlH,GACpCwB,MAAOuH,GAGL0G,IAAe1G,IACjB+G,EAAK,SAAc,GAGrBD,EAAc3N,KAAK4N,GAGrB,IAAI/G,EAAMhH,EAAa,CAACR,EAAGoN,EAAGzH,IAC1B4I,EAAQ,CACVpK,MAAO0J,GAAST,EAAI,IAAMzH,GAC1B1F,MAAOuH,EACPgH,SAAUF,GAGRJ,IAAe1G,IACjB+G,EAAK,SAAc,GAGrBF,EAAgB1N,KAAK4N,OA5BhB5I,EAAI,EAAGA,GAAKlD,EAAckD,IAAM,EAAhCA,MAiCXyI,EAAazN,KAAK,CAChBwD,MAAO0J,GAAST,GAChBnN,MAAOO,EAAa,CAACR,EAAGoN,IACxBoB,SAAUH,UAKhB/C,EAAE3K,KAAK,CACLwD,MAAO0J,GAAS7N,GAChBC,MAAOO,EAAa,CAACR,IACrBwO,SAAUJ,OAIdH,EAAQ3C,MAYRmD,CAAcjH,EAAKxD,EAAYiK,KAE9B,IAQHD,EAAqB,CAACxG,IAGpB,oCACGrF,EACC,kBAAC,KAAD,CACEhF,UAAU,cACVuR,MAAO,CAAEtD,YAAa,UACtBjJ,KAAMA,EACN4J,SAfS,SAAC4C,EAAGC,GACnBZ,EAAqBY,EAAc/N,KAAI,SAAApC,GAAC,OAAIA,EAAEwB,WAexC4O,qBAAqB,IACvB,kBAAC,EAAD,Q,6jBC9FR,IAAIC,GAAmB,GAmHRC,OAjHf,YAA6C,IAArB1F,EAAoB,EAApBA,OAAW1E,EAAS,2BAEpCqK,EAAQ,IAAIpC,GAFwB,EAIlB/I,IAAMC,SAAS,CACrCkL,MAAO,GACP3P,KAAM,GACNoN,UAAW,KAP6B,mBAInCtK,EAJmC,KAI7B8L,EAJ6B,OASVpK,IAAMC,SAAS,GATL,mBASnCmL,EATmC,KASzBC,EATyB,OAUJrL,IAAMC,UAAS,GAVX,mBAUnCgH,EAVmC,KAUrBC,EAVqB,KAoC1C,OACE,6BACE,0BAAMW,SAtBV,SAAsBC,GACpB,IAAIwD,EAAYL,GAChBA,GAAmB,GAEnB/D,GAAc,GACdiE,EAAMI,SAASjN,EAAKkN,KAAM,CACxBhQ,KAAM8C,EAAK9C,KACXoN,UAAWtK,EAAKsK,UAChBC,cAAeyC,GACdD,GAAa,SAAU/M,EAAM9B,GAC1BA,GACFD,QAAQC,MAAM,4BAA6BA,GAE7C0K,GAAc,GACd1B,OAGFsC,EAAME,mBAOF,yBAAK1O,UAAU,cACb,2BAAOuN,QAAQ,gBAAf,QACA,2BACElB,KAAK,OACLnG,GAAG,YACHlG,UAAU,oBACV4O,SAAU,SAAA7M,GACR,IAAM0F,EAAW1F,EAAEuJ,OAAOuG,MAAM,GAAG3P,KAAKuB,MAAM,KAC9CqN,EAAQ,MACH9L,EADE,CAELkN,KAAMnQ,EAAEuJ,OAAOuG,MAAM,GACrBvC,UAAW7H,EAASA,EAAStF,OAAS,GACtCD,KAAMH,EAAEuJ,OAAOuG,MAAM,GAAG3P,SAG5ByM,UAAQ,KAGZ,yBAAK3O,UAAU,cACb,2BAAOuN,QAAQ,aAAf,gBACA,2BACElB,KAAK,OACLnG,GAAG,YACHlG,UAAU,eACV8C,MAAOkC,EAAK9C,KACZ0M,SAAU,SAAA7M,GACR+O,EAAQ,MAAK9L,EAAN,CAAY9C,KAAMH,EAAEuJ,OAAOxI,UAEpC6L,UAAQ,IACV,2BAAOzI,GAAG,YAAYlG,UAAU,wBAAhC,oDAKF,yBAAKA,UAAU,cACb,2BAAOuN,QAAQ,kBAAf,kBACA,kBAAC,GAAD,eAAsBsD,qBAhE9B,SAA8BsB,GAC5BR,GAAmBQ,IA+DyD3K,IACtE,2BAAOtB,GAAG,sBAAsBlG,UAAU,wBAA1C,kEAKF,yBAAKA,UAAU,cACb,2BAAOuN,QAAQ,cAAf,cAEA,2BAAOrH,GAAG,kBAAkBlG,UAAU,wBAAtC,oDAKF,4BAAQqM,KAAK,SAASrM,UAAU,8BAA8B6O,SAAUlB,GAAxE,QACA,4BAAQtB,KAAK,SAASrM,UAAU,kCAAkC2J,QAASuC,EAAQ2C,SAAUlB,GAA7F,UACA,yBAAK3N,UAAU,aAEf,yBAAKA,UAAU,SACd2N,EACC,6BACE,mDAAyBmE,EAAzB,KACA,yBAAK9R,UAAU,YACb,yBACEA,UAAU,0DACVkH,KAAK,cACLkL,gBAAeN,EACfO,gBAAc,IACdC,gBAAc,MACdjT,MAAO,CAAEI,MAAOqS,EAAW,SAExB,QC5FJS,OAnBf,YAA6D,IAAhCC,EAA+B,EAA/BA,UAAWtG,EAAoB,EAApBA,OAAW1E,EAAS,uCAE1D,OACE,kBAAC,IAAD,CACEwH,OAAQwD,EACRvD,eAAgB/C,GAChB,yBAAKlM,UAAU,OACb,yBAAKA,UAAU,+BACf,yBAAKA,UAAU,gCACb,2CACA,6BACA,kBAAC,GAAD,eAAckM,OAAQA,GAAY1E,KAEpC,yBAAKxH,UAAU,kCCXjB6D,I,MAAKlD,IAASmD,UAAUpD,IAoB9B,SAAS+R,GAAoBC,EAAOC,GAClC,OAAQA,EAAOtG,MACb,IAAK,aACH,MAAO,CACLJ,KAAM,KACNK,OAAQ,cAEZ,IAAK,UACH,MAAO,CACLL,KAAM0G,EAAO1G,KACbK,OAAQ,WAEZ,IAAK,YACH,MAAO,CACLL,KAAM0G,EAAO1G,KACbK,OAAQ,aAEZ,IAAK,eACH,MAAO,CACLL,KAAM0G,EAAO1G,KACbK,OAAQ,gBAEZ,QACE,MAAM,IAAIsG,OAmCDC,OA5Bf,WAA4B,IAAD,EACCnM,IAAMoM,WAAWL,GAAqB,CAC9DxG,KAAM,KACNK,OAAQ,eAHe,mBAClBoG,EADkB,KACXK,EADW,KAyBzB,OAnBArM,IAAMI,WAAU,WACd,OAAOnG,IAASqS,OAAOC,oBAAmB,SAAChH,GAC5B,OAATA,EACF8G,EAAS,CAAE1G,KAAM,gBAGjB0G,EAAS,CAAE1G,KAAM,UAAWJ,SA5DpC,SAA0BiH,GACxB,IAAMC,EAAStP,GAAGiC,WAAW,SAASjB,IAAIqO,GAE1C,OAAO,IAAIxD,SAAQ,SAAC0D,EAASC,GAC3BF,EAAOrO,MAAMC,MAAK,SAACF,GACbA,EAAIyO,SAAkC,IAAxBzO,EAAIG,OAAJ,MAChBoO,GAAQ,GAGRA,GAAQ,MAETnO,OAAM,SAAC/B,GACRD,QAAQC,MAAM,2BAA4BA,GAC1CmQ,EAAOnQ,SAgDLqQ,CAAiBtH,EAAKiH,OAAOnO,MAAK,SAACyO,GAE/BT,EADES,EACO,CAAEnH,KAAM,YAAaJ,QAGrB,CAAEI,KAAM,eAAgBJ,kBAKxC,IAEIyG,G,oBCxDMe,OAvBf,YAAgC,IAC1BC,EADyB,EAAT7B,MACCnO,KAAI,SAAAoH,GAAC,OACxB,wBAAI1I,IAAK0I,EAAE5E,IACT,4BAAI,uBAAGe,KAAM6D,EAAEsE,IAAK9D,OAAO,SAASC,IAAI,uBAAuBT,EAAE5I,OACjE,4BAAKyR,KAAY7I,EAAE0E,WAIvB,OACE,2BAAOxP,UAAU,qBACf,+BACE,wBAAIA,UAAU,iBACZ,wBAAI4T,MAAM,OAAV,QACA,wBAAIA,MAAM,OAAV,UAGJ,+BACGF,KCNHG,GAAkB,CACtB/J,OAAQ,CACN9C,MAAO,GACP+C,KAAM,IAERF,SAAU,IA6IGiK,OA1If,YAA4E,IA+BtEC,EAQAC,EAaAC,EApDqE,IAAhDzN,MAASC,OAAUrF,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,KAAML,EAAe,EAAfA,QACpDiL,EAAO4G,KACPvP,EAAU,CAAClC,EAAQC,EAAML,GAF0C,EAI7C0F,IAAMC,SAAS,IAJ8B,mBAIlEzC,EAJkE,KAI1DgQ,EAJ0D,OAKzCxN,IAAMC,SAAS,MAL0B,mBAKlEkH,EALkE,KAKxDsG,EALwD,OAM/CzN,IAAMC,SAAS,MANgC,mBAMlEkL,EANkE,KAM3DuC,EAN2D,OAQ3C1N,IAAMC,UAAS,GAR4B,mBAQlEoI,EARkE,KAQzDsF,EARyD,OASvC3N,IAAMC,UAAS,GATwB,mBASlE6L,EATkE,KASvD8B,EATuD,OAUrC5N,IAAMC,SAASkN,IAVsB,mBAUlEU,EAVkE,KAUtDC,EAVsD,KAYnE3N,EAAa,IAAIlC,EACjB8P,EAAgB,IAAIrK,EACpBsK,EAAa,IAAIjF,GA8CvB,SAASkF,IACPN,GAAYtF,GAQd,SAAS6F,IACPN,GAAc9B,GAOhB,OA7DA9L,IAAMI,WAAU,WACdD,EAAWR,UAAUjF,EAAQC,EAAML,EAASkT,KAE3C,IAEHxN,IAAMI,WAAU,WACd2N,EAAcI,YAAYvR,EAAS6Q,KAElC,CAACpF,IAEJrI,IAAMI,WAAU,WACd4N,EAAWI,SAASxR,GAASyB,MAAK,SAAA8M,GAAK,OAAIuC,EAASvC,QAEnD,CAACW,IAIFuB,EADoB,IAAlB7P,EAAO/B,OACQ,kBAAC,EAAD,MAGA+B,EAAOR,KAAI,SAAAb,GAAC,OAAI,kBAAC,EAAD,CAAaT,IAAKS,EAAEsG,UAAW/C,MAAOvD,EAAGgG,WAAW,OAKrFmL,EADe,OAAbnG,EACe,kBAAC,EAAD,MAGAA,EAASnK,KAAI,SAAAsE,GAAC,OAAI,kBAAC,EAAD,CACjC5F,IAAK4F,EAAE9B,GACP+F,KAAMA,EACN1B,QAASvC,EACTkE,OAAQyI,EACRxI,WAAYqI,OAKdP,EADY,OAAVpC,EACa,kBAAC,EAAD,MAGA,kBAAC,GAAD,CAAYA,MAAOA,IAqBlC,6BACG9C,EAAU,kBAAC,GAAD,CACTA,QAASA,EACTzL,QAASA,EACTiH,QAASgK,EACTpI,WAAYqI,EACZtI,OAAQyI,IAAoB,KAE7BnC,EAAY,kBAAC,GAAD,CACXA,UAAWA,EACXtG,OAAQ0I,EACRtR,QAASA,IAAc,KAEzB,kBAAC,IAAD,KACE,yBAAKtD,UAAU,OACb,yBAAKA,UAAU,+BACb,wBAAIA,UAAU,mBAAmBqB,EAAK8F,QAAQ,KAAM,KAApD,IAA2DnG,IAE7D,yBAAKhB,UAAU,+BACb,kBAAC,IAAD,KACE,kBAAC,IAAD,wBAEmB,cAAhBiM,EAAKK,QAA0B,4BAAQtM,UAAU,uBAAuB2J,QApCvF,WACE6K,EAAcX,IACdc,MAkC4C,QAElC,kBAAC,IAAD,4BAEmB,cAAhB1I,EAAKK,QAA0B,4BAAQtM,UAAU,uBAAuB2J,QA/BvF,WACEiL,MA8B4C,YAGpC,yBAAK5U,UAAU,eAGnB,yBAAKA,UAAU,OACb,yBAAKA,UAAU,+BACb,8BAEF,yBAAKA,UAAU,iCAIjB,yBAAKA,UAAU,OACb,yBAAKA,UAAU,+BACZ+T,GAEH,yBAAK/T,UAAU,+BACb,kBAAC,IAAD,KACE,4BACGgU,IAGL,kBAAC,IAAD,KACGC,QCzHAc,oBA1Bf,SAAgBvN,GAEd,IAIIwN,EAJEC,EAAYpC,KAEZ5L,EAAO,kBAAoBO,EAAMG,SAASC,SAOhD,MAJyB,eAArBqN,EAAU3I,SACZ0I,EAAc,uBAAGhV,UAAU,aAAaiH,KAAMA,GAAhC,UAId,4BAAQjH,UAAU,gDAChB,yBAAKA,UAAU,aACb,yBAAKA,UAAU,qCACb,0BAAMA,UAAU,QAAhB,wBACA,uBAAGiH,KAAMiO,uCAAyBA,sCAAuB/N,QAAQ,WAAY,MAE/E,yBAAKnH,UAAU,oBACZgV,QCnBIG,OAJf,WACE,OAAO,MCDT,SAASC,GAAmC1K,EAAGuF,GAC7C,SAASoF,EAAW3K,EAAGuF,GACrB,OAAOvF,EAAIuF,GAAK,EAAIvF,EAAIuF,EAAI,EAAI,EAGlC,IAAIqF,EAAID,EAAW3K,EAAEP,SAAS,GAAI8F,EAAE9F,SAAS,IAU7C,OATU,IAANmL,IACFA,EAAID,EAAW3K,EAAEP,SAAS,GAAI8F,EAAE9F,SAAS,KAIjC,IAANmL,IACFA,EAAI5K,EAAEZ,OAAO9C,MAAMuO,cAActF,EAAEnG,OAAO9C,QAGrCsO,EAuCME,OALf,SAAuB3H,GAErB,OADAA,EAAS4H,KAAKL,IA5BhB,SAAiCvH,GAC/B,GAAwB,IAApBA,EAAS1L,OACX,OAAO0L,EAGT,IAAI6H,EAAS,GAET5K,EAAI+C,EAAS,GAAG1D,SAChBwL,EAAI,GAgBR,OAfA9H,EAAS5H,SAAQ,SAAA+B,GAbnB,IAAoB4N,EAAIC,EAAJD,EAcD9K,EAdK+K,EAcF7N,EAAEmC,SAbfyL,EAAG,KAAOC,EAAG,IAAMD,EAAG,KAAOC,EAAG,GAcnCF,EAAEnS,KAAKwE,IAGP0N,EAAOlS,KAAKoC,MAAMkQ,KAAKH,IACvB7K,EAAI9C,EAAEmC,SACNwL,EAAI,CAAC3N,OAIQ,IAAb2N,EAAExT,QACJuT,EAAOlS,KAAKmS,GAGPD,EAKAK,CAAwBlI,ICXlBmI,OAvBf,YAAoE,IAA5C5P,EAA2C,EAA3CA,MAAO6P,EAAoC,EAApCA,aAAc/J,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,WAC7CF,EAAO4G,KAET/H,EAAImL,EAAa,GAAG9L,SACpB+L,EAAS9P,EAAMlF,KAAKuC,MAAM,KAAKiG,MAAMoB,EAAE,GAAIA,EAAE,IAAIvJ,KAAK,KAE1D,OACE,oCACE,yBAAKa,IAAK0I,GACR,uBAAG9K,UAAU,4BAA4BkW,IAE3C,4BACGD,EAAavS,KAAI,SAACsE,EAAGmO,GAAJ,OAtB1B,SAAsBlK,EAAM7F,EAAOmE,EAAS2B,EAAQC,GAClD,OAAO,kBAAC,EAAD,CACL/J,IAAKmI,EAAQrE,GACb+F,KAAMA,EACN7F,MAAOA,EACPmE,QAASA,EACT2B,OAAQA,EACRC,WAAYA,IAesBvC,CAAaqC,EAAM7F,EAAO4B,EAAGkE,EAAQC,OAErE,+BCESiK,OAzBf,YAA+D,IAEzDpC,EAFiB5N,EAAuC,EAAvCA,MAAOyH,EAAgC,EAAhCA,SAAU3B,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,WAc9C,OAVE6H,OADezQ,IAAbsK,EACe,kBAAC,EAAD,MAIK2H,GAAc3H,GACLnK,KAAI,SAAU2S,EAAIF,GAC/C,OAAO,kBAAC,GAAD,CAAc/T,IAAK+T,EAAK/P,MAAOA,EAAO6P,aAAcI,EAAInK,OAAQA,EAAQC,WAAYA,OAK7F,oCACG6H,ICVDH,GAAkB,CACtB/J,OAAQ,CACN9C,MAAO,GACP+C,KAAM,IAERF,SAAU,GACVM,SAAU,CAAC,EAAG,IA6HDmM,OA1Hf,YAAgG,IA+B1FrC,EA/ByF,IAApEzN,MAASC,OAAUrF,EAAiD,EAAjDA,OAAQC,EAAyC,EAAzCA,KAAML,EAAmC,EAAnCA,QAAgBuV,EAAmB,EAA1BnQ,MAC7D6F,EAAO4G,KACPvP,EAAU,CAAClC,EAAQC,EAAML,EAASuV,GAFqD,EAInE7P,IAAMC,WAJ6D,mBAItFP,EAJsF,KAI/EoQ,EAJ+E,OAK7D9P,IAAMC,WALuD,mBAKtFkH,EALsF,KAK5EsG,EAL4E,OAMnEzN,IAAMC,SAAS,MANoD,mBAMtFkL,EANsF,KAM/EuC,EAN+E,OAQ/D1N,IAAMC,UAAS,GARgD,mBAQtFoI,EARsF,KAQ7EsF,EAR6E,OAS3D3N,IAAMC,UAAS,GAT4C,mBAStF6L,EATsF,KAS3E8B,EAT2E,OAUzD5N,IAAMC,SAASkN,IAV0C,mBAUtFU,EAVsF,KAU1EC,EAV0E,KAYvF3N,EAAa,IAAIlC,EACjB8P,EAAgB,IAAIrK,EACpBsK,EAAa,IAAIjF,GAyBvB,SAASkF,IACPN,GAAYtF,GAQd,SAAS6F,IACPN,GAAc9B,GAOhB,OAxCA9L,IAAMI,WAAU,WACdD,EAAW4P,SAASrV,EAAQC,EAAML,EAASuV,EAAaC,KAEvD,IAEH9P,IAAMI,WAAU,WACd2N,EAAcI,YAAYvR,EAAS6Q,KAElC,CAACpF,IAEJrI,IAAMI,WAAU,WACd4N,EAAWI,SAASxR,GAASyB,MAAK,SAAA8M,GAAK,OAAIuC,EAASvC,QAEnD,CAACW,IAIFyB,EADY,OAAVpC,EACa,kBAAC,EAAD,MAGA,kBAAC,GAAD,CAAYA,MAAOA,IAqBlC,6BACGzL,EAAQ,kBAAC,GAAD,CACP2I,QAASA,EACTzL,QAAS8C,EAAMsQ,aACftQ,MAAOA,EACPmE,QAASgK,EACTpI,WAAYqI,EACZtI,OAAQyI,IAAoB,KAE7BnC,EAAY,kBAAC,GAAD,CACXA,UAAWA,EACXtG,OAAQ0I,EACRtR,QAASA,IAAc,KAEzB,kBAAC,IAAD,KACE,yBAAKtD,UAAU,OACb,yBAAKA,UAAU,+BACb,wBAAIA,UAAU,mBAAmBqB,EAAK8F,QAAQ,KAAM,KAApD,IAA2DnG,EAA3D,IAAqEuV,IAEvE,yBAAKvW,UAAU,+BACb,kBAAC,IAAD,KACE,kBAAC,IAAD,sBAEmB,cAAhBiM,EAAKK,QAA0B,4BAAQtM,UAAU,uBAAuB2J,QArCvF,WACE6K,EAAcX,IACdc,MAmC4C,QAElC,kBAAC,IAAD,4BAEmB,cAAhB1I,EAAKK,QAA0B,4BAAQtM,UAAU,uBAAuB2J,QAhCvF,WACEiL,MA+B4C,cAKxC,yBAAK5U,UAAU,OACb,yBAAKA,UAAU,+BACb,8BAEF,yBAAKA,UAAU,iCAIjB,yBAAKA,UAAU,OACb,yBAAKA,UAAU,+BACb,yBAAKA,UAAW+O,GAAWyD,EAAY,KAAO,cAC3CpM,EAAQ,kBAAC,EAAD,CAAaA,MAAOA,IAAY,kBAAC,EAAD,QAG7C,yBAAKpG,UAAU,+BACb,kBAAC,IAAD,KACGoG,EAAQ,KAAO,kBAAC,EAAD,MACfA,EAAQ,kBAAC,GAAD,CACPA,MAAOA,EACPyH,SAAUA,EACV3B,OAAQyI,EACRxI,WAAYqI,IAAoB,MAEpC,kBAAC,IAAD,KACGP,Q,oBClIT0C,GAAW,CACfC,WAAY,QACZC,cAAe,CACblW,IAASqS,KAAK8D,mBAAmBC,aAEnCC,UAAW,CACTC,4BAA6B,kBAAM,KAmCxBC,OA/Bf,SAAmB1P,GACjB,IAAMyN,EAAYpC,KAElBnM,IAAMI,WAAU,WACW,iBAArBmO,EAAU3I,QACZ2I,EAAUhJ,KAAKhB,SAAShG,OAAM,SAAC/B,GAC7BD,QAAQuN,IAAI,0DAA2DtN,QAG1E,CAAC+R,IAEJ,IAAIkC,EAAW3P,EAAMG,SAASyP,OAAO3T,MAAM,KAAK,GAKhD,YAJiBF,IAAb4T,GAAuC,KAAbA,IAC5BA,EAAW,KAGY,iBAArBlC,EAAU3I,OACL,kBAAC,IAAD,CAAUlD,GAAG,kBAEQ,cAArB6L,EAAU3I,OACV,kBAAC,IAAD,CAAUlD,GAAI+N,IAInB,6BACE,kBAAC,KAAD,CAAoBR,SAAUA,GAAUU,aAAc1W,IAASqS,WCnBxDsE,OAlBf,WAEE,IAAMrC,EAAYpC,KAElB,MAAyB,cAArBoC,EAAU3I,OAEV,0BAAMtM,UAAU,4BACd,0BAAMA,UAAU,2BAA2BiV,EAAUhJ,KAAKiH,OAC1D,4BAAQlT,UAAU,+BAA+B2J,QAAS,kBAAMhJ,IAASqS,OAAOuE,WAAWlL,KAAK,UAAhG,WAMJ,sCCcWmL,OA7Bf,WACE,OACE,yBAAKxX,UAAU,kDACb,yBAAKA,UAAU,aACb,uBAAGA,UAAU,eAAeiH,KAAK,MAAjC,wBAEA,4BAAQjH,UAAU,iBAAiBqM,KAAK,SAASoL,cAAY,WAAWC,cAAY,0BAA0BC,gBAAc,yBAAyBC,gBAAc,QAAQC,aAAW,qBACpL,0BAAM7X,UAAU,yBAGlB,yBAAKA,UAAU,2BAA2BkG,GAAG,0BAC3C,wBAAIlG,UAAU,sBACZ,wBAAIA,UAAU,YACZ,uBAAGA,UAAU,WAAWiH,KAAK,gBAA7B,eAEF,wBAAIjH,UAAU,YACZ,uBAAGA,UAAU,WAAWiH,KAAK,YAA7B,WAEF,wBAAIjH,UAAU,YACZ,uBAAGA,UAAU,WAAWiH,KAAK,WAA7B,WAGJ,kBAAC,GAAD,UCbK6Q,OAVf,WACE,OACE,yBAAK9X,UAAU,uBACb,wBAAIA,UAAU,iBAAd,aACA,uBAAGA,UAAU,QAAb,sCACA,uBAAGiH,KAAK,KAAKjH,UAAU,cAAvB,iBCKS+X,OAVf,WACE,OACE,yBAAK/X,UAAU,sBACb,wBAAIA,UAAU,iBAAd,kBACA,uBAAGA,UAAU,QAAb,mDACA,uBAAGA,UAAU,aAAaiH,KAAK,MAA/B,iBCFN,SAASG,GAAYJ,GACnB,IACMC,EAAO,gBAAkBD,EAE/B,OACE,yBAAK5E,IAAK6E,EAAMjH,UAAU,2DACxB,uBAAGiH,KAAMA,EAAMC,KAAK,SAASlH,UALjB,qDAKsCgH,EAAMG,QAAQ,KAAM,OAiC7D6Q,OA5Bf,WAA2B,IASrB1U,EAToB,EACMoD,IAAMC,SAAS,IADrB,mBACjB/B,EADiB,KACRqT,EADQ,KAElBpR,EAAa,IAAIlC,EAevB,OAbA+B,IAAMI,WAAU,WACdD,EAAWmK,WAAWiH,KAErB,IAID3U,EADqB,IAAnBsB,EAAQzC,OACA,kBAAC,EAAD,MAGAyC,EAAQlB,IAAI0D,IAItB,6BACE,0CAEA,yBAAKpH,UAAU,OACZsD,KClBT,SAAS4U,KACP,OACE,4BAAQlY,UAAU,eAChB,wBAAIA,UAAU,yBAAd,wBACA,uBAAGA,UAAU,yBAAb,gBAuESmY,OAlEf,WACE,IAAMlD,EAAYpC,KADL,EAEqBnM,IAAMC,SAAS,CAAE6C,MAAO,EAAGvB,KAAM,IAFtD,mBAENsB,EAFM,KAEK6O,EAFL,KAIPC,EAAe,CACnB9O,YACA4B,gBAAiB,SAACL,EAAGL,GAAJ,OAAU2N,EAAa,CAAE5O,MAAOsB,EAAG7C,KAAMwC,MAG5D,MAAyB,eAArBwK,EAAU3I,OAEV,kBAAC,IAAD,CAAYgM,SAAS,KACnB,yBAAKtY,UAAU,OACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOuY,OAAK,EAACC,KAAK,SAASC,UAAWvB,KACtC,kBAAC,IAAD,CAAOuB,UAAWP,QAQ1B,kBAAC,IAAD,CAAYI,SAAS,KACnB,yBAAKtY,UAAU,OACb,kBAAC,GAAD,MACA,kBAAC,IAAD,CAAOwY,KAAK,IAAIC,UAAWlR,IAE3B,kBAAC,IAAD,CAAOgR,OAAK,EAACC,KAAK,IAAIC,UAAWvZ,IAEjC,kBAAC,EAAsBwZ,SAAvB,CAAgC5V,MAAOuV,GACrC,yBAAKrY,UAAU,kBACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOuY,OAAK,EAACC,KAAK,IAAIC,UAAWtD,KACjC,kBAAC,IAAD,CAAOoD,OAAK,EAACC,KAAK,SAASC,UAAWxZ,IAGtC,kBAAC,IAAD,CAAOsZ,OAAK,EAACC,KAAK,cAAcC,UAAWT,KAC3C,kBAAC,IAAD,CAAOO,OAAK,EAACC,KAAK,sBAAsBC,UAAWlS,IACnD,kBAAC,IAAD,CAAOgS,OAAK,EAACC,KAAK,4BAA4BC,UAAWpQ,IACzD,kBAAC,IAAD,CAAOkQ,OAAK,EAACC,KAAK,qCAAqCC,UAAW3E,KAClE,kBAAC,IAAD,CAAOyE,OAAK,EAACC,KAAK,4CAA4CC,UAAWnC,KAGzE,kBAAC,IAAD,CAAOiC,OAAK,EAACC,KAAK,YAGlB,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,SAASC,UAAWvB,KACtC,kBAAC,IAAD,CAAOqB,OAAK,EAACC,KAAK,gBAAgBC,UAAWV,KAG7C,kBAAC,IAAD,CAAOQ,OAAK,EAACC,KAAK,aAAaC,UAAWX,KAC1C,kBAAC,IAAD,CAAU1O,GAAG,kBAMnB,yBAAKpJ,UAAU,SAEf,kBAAC,GAAD,SCzER2Y,IAAWC,cAAc,SACzBC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.f03b1454.chunk.js","sourcesContent":["import React from 'react';\n\nfunction AboutPage() {\n  return (\n    <div>\n      <h2>About</h2>\n      <p>\n        Enjoy the Scriptures.\n      </p>\n    </div>\n  )\n}\n\nexport default AboutPage\n","import React from 'react';\n\nfunction Background() {\n  const style = {\n    position: 'fixed',\n    top: 0,\n    zIndex: -1,\n    width: '100%',\n    height: '100%',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover',\n    opacity: '0.9'\n  }\n\n  return (\n    <img alt=\"A pathway with trees on either side in autumn\" src=\"/background.jpg\" style={style} />\n  )\n}\n\nexport default Background\n","import React from 'react'\n\nfunction LoadingBar() {\n  return (\n    <div className=\"col text-center\">\n      <img alt=\"loading\" src=\"loader.gif\" />\n    </div>\n  )\n}\n\nexport default LoadingBar\n","import firebase from 'firebase/app'\n\nvar devFirebaseConfig = {\n  apiKey: \"AIzaSyDkKbOrGudHylmvFiRMW4SkwxXlFxQt-l4\",\n  authDomain: \"enjoy-the-scriptures-dev.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures-dev.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures-dev\",\n  storageBucket: \"enjoy-the-scriptures-dev.appspot.com\",\n  messagingSenderId: \"160411774173\",\n  appId: \"1:160411774173:web:24609264832f2816d1ff34\",\n  measurementId: \"G-JWEZ0Y38BM\"\n};\n\nvar testFirebaseConfig = {\n  apiKey: \"AIzaSyDcWkM-EwFO9BrLbHAiZf_NcPKT1jg_B4M\",\n  authDomain: \"enjoy-the-scriptures-test.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures-test.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures-test\",\n  storageBucket: \"\",\n  messagingSenderId: \"854443437513\",\n  appId: \"1:854443437513:web:b0f58f35a8d4a823c64c18\",\n  measurementId: \"G-EDCKCQPLL0\"\n};\n\nvar prodFirebaseConfig = {\n  apiKey: \"AIzaSyCJ8QdL00_QZlNHsdlLo_z_ROHV550HN20\",\n  authDomain: \"enjoy-the-scriptures.firebaseapp.com\",\n  databaseURL: \"https://enjoy-the-scriptures.firebaseio.com\",\n  projectId: \"enjoy-the-scriptures\",\n  storageBucket: \"enjoy-the-scriptures.appspot.com\",\n  messagingSenderId: \"812786960298\",\n  appId: \"1:812786960298:web:5692ec20094481a1304dd3\",\n  measurementId: \"G-Q6Q0Z99K1H\"\n};\n\nfunction getFirebaseConfig() {\n  const config = process.env.REACT_APP_FIREBASE_CONFIG\n  if (config === 'production') {\n    return prodFirebaseConfig\n  }\n  else if (config === 'test') {\n    return testFirebaseConfig\n  }\n  else {\n    return devFirebaseConfig\n  }\n}\n\nconst firebaseConfig = getFirebaseConfig()\nconst firebaseApp = firebase.initializeApp(firebaseConfig)\n\nexport default firebaseApp\n","class Verse {\n  constructor(volumeName, bookName, chapter, number, text) {\n    this.volume = volumeName\n    this.book = bookName\n    this.chapter = chapter\n    this.n = number\n    this.text = text\n  }\n\n  getHref() {\n    return ['/scriptures', this.volume, this.book, this.chapter, this.n].join('/')\n  }\n\n  getContent() {\n    return [this.volume, this.book, this.chapter, this.n]\n  }\n}\n\nexport default Verse\n","class LocalStorageCache {\n  constructor() {\n    this.storage = null\n  }\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API\n  available() {\n    try {\n      this.storage = window.localStorage;\n      var x = '__storage_test__';\n      this.storage.setItem(x, x);\n      this.storage.removeItem(x);\n      return true;\n    }\n    catch(e) {\n      return e instanceof DOMException && (\n          // everything except Firefox\n          e.code === 22 ||\n          // Firefox\n          e.code === 1014 ||\n          // test name field too, because code might not be present\n          // everything except Firefox\n          e.name === 'QuotaExceededError' ||\n          // Firefox\n          e.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\n          // acknowledge QuotaExceededError only if there's something already stored\n          (this.storage && this.storage.length !== 0);\n    }\n  }\n\n  getItem(key, ttl) {\n    key = 'ets:' + key\n    let item = localStorage.getItem(key)\n\n    if (item == null) {\n      return null\n    }\n\n    item = JSON.parse(item)\n    if (Date.now() - item.w > ttl) {\n      localStorage.removeItem(key)\n      return null\n    }\n\n    return item.v\n  }\n\n  setItem(key, value) {\n    key = 'ets:' + key\n    let obj = {\n      v: value,\n      w: Date.now()\n    }\n\n    try {\n      localStorage.setItem(key, JSON.stringify(obj))\n    }\n    catch (e) {\n      console.error('An error occurred writing to local storage. obj=' + obj + ' error=' + e)\n    }\n  }\n\n}\n\nexport default LocalStorageCache\n","function assemble(pieces) {\n  return pieces.join('/')\n}\n\nfunction getContentId(content) {\n  let pieces = []\n\n  if (content[0] !== undefined) {\n    pieces.push(content[0].split('_').map(s => s[0]).join(''))\n  }\n  else return assemble(pieces)\n\n  if (content[1] !== undefined) {\n    pieces.push(content[1].split(/[_-]+/).map(s => s.substring(0, 3)).join('-'))\n  }\n  else return assemble(pieces)\n\n  if (content[2] !== undefined) {\n    pieces.push(content[2])\n  }\n  else return assemble(pieces)\n\n  if (content[3] !== undefined) {\n    pieces.push(content[3])\n  }\n\n  return assemble(pieces)\n}\n\nexport default getContentId\n","import firebase from 'firebase/app'\nimport firebaseApp from './FirebaseConfig'\n\nimport 'firebase/firestore'\nimport Verse from '../model/Verse'\nimport LocalStorageCache from '../util/LocalStorageCache'\nimport getContentId from '../util/ContentId'\n\nconst db = firebase.firestore(firebaseApp)\n\nconst CACHE_TTL = 90 * 24 * 60 * 60 * 1000\nconst lsc = new LocalStorageCache().available() ? new LocalStorageCache() : null\n\nfunction fetchVolumes(cb) {\n  db.doc('scriptures/index').get().then(function (doc) {\n    cb(doc.data()['volumes'])\n  }).catch(function (err) {\n    console.error('Error fetching volumes: ', err)\n  })\n}\n\nfunction fetchBooks(volume, cb) {\n  db.doc('scriptures/index/volumes/' + volume).get().then(function (doc) {\n    cb(doc.data()['books'])\n  }).catch(function (err) {\n    console.error('Error fetching books for volume: ', volume, err)\n  })\n}\n\nfunction fetchChapterCount(volume, book, cb) {\n  db.doc('scriptures/index/volumes/' + volume + '/books/' + book).get().then(function (doc) {\n    cb(doc.data()['chapters'])\n  }).catch(function (err) {\n    console.error('Error fetching chapter count for ' + volume + ', ' + book, err)\n  })\n}\n\nfunction fetchVerseCount(volume, book, chapter, cb) {\n  db.doc('scriptures/index/volumes/' + volume + '/books/' + book + '/chapters/' + chapter).get().then(function (doc) {\n    cb(doc.data()['verses'])\n  }).catch(function (err) {\n    console.error('Error fetching verse count for ' + volume + ', ' + book + ', chapter ' + chapter, err)\n  })\n}\n\nfunction fetchVerses(volume, book, chapter, cb) {\n  let verses = {}\n\n  db.collection('scriptures/index/volumes/' + volume + '/books/' + book + '/chapters/' + chapter + '/verses').get().then(function (querySnapshot) {\n    querySnapshot.docs.forEach(function (doc) {\n      verses[doc.id] = doc.data()['text']\n    })\n\n    cb(verses)\n  }).catch(function (err) {\n    console.error('Error fetching verses for ' + volume + ', ' + book + ', chapter ' + chapter, err)\n  })\n}\n\nfunction buildVerseList(volume, book, chapter, verses) {\n  return Object.keys(verses).map(function (n) {\n    return new Verse(volume, book, chapter, n, verses[n])\n  })\n}\n\nfunction curry(fn, ...args) {\n  return (..._arg) => {\n      return fn(...args, ..._arg);\n  }\n}\n\nfunction cacheResult(cb, key, value) {\n  lsc.setItem(key, value)\n  cb(value)\n}\n\nclass Scriptures {\n  getVolumes(cb) {\n    const key = 's/volumes'\n    let volumes = lsc.getItem(key, CACHE_TTL)\n\n    if (volumes !== null) {\n      cb(volumes)\n    }\n    else {\n      fetchVolumes(curry(cacheResult, cb, key))\n    }\n  }\n\n  getBooks(volume, cb) {\n    const key = 's/' + getContentId([volume])\n    let books = lsc.getItem(key, CACHE_TTL)\n\n    if (books !== null) {\n      cb(books)\n    }\n    else {\n      fetchBooks(volume, curry(cacheResult, cb, key))\n    }\n  }\n\n  getChapterCount(volume, book, cb) {\n    const key = 's/' + getContentId([volume, book])\n    let chapterCount = lsc.getItem(key, CACHE_TTL)\n\n    if (chapterCount !== null) {\n      cb(chapterCount)\n    }\n    else {\n      fetchChapterCount(volume, book, curry(cacheResult, cb, key))\n    }\n  }\n\n  getVerseCount(volume, book, chapter, cb) {\n    const key = 's/' + getContentId([volume, book, chapter])\n    let verseCount = lsc.getItem(key, CACHE_TTL)\n    if (verseCount !== null) {\n      cb(verseCount)\n    }\n    else {\n      fetchVerseCount(volume, book, chapter, curry(cacheResult, cb, key))\n    }\n  }\n\n  getVerses(volume, book, chapter, cb) {\n    this.getVerseCount(volume, book, chapter, function (verseCount) {\n      let verseTexts = [...Array(verseCount).keys()].map(n => {\n        const key = 's/' + getContentId([volume, book, chapter, n + 1])\n        return lsc.getItem(key, CACHE_TTL)\n      })\n\n      if (!verseTexts.includes(null)) {\n        let verses = {};\n        [...Array(verseCount).keys()].forEach(n => {\n          verses[n + 1] = verseTexts[n]\n        })\n\n        cb(buildVerseList(volume, book, chapter, verses))\n      }\n      else {\n        fetchVerses(volume, book, chapter, function(verses) {\n          for (const n in verses) {\n            const key = 's/' + getContentId([volume, book, chapter, n])\n            lsc.setItem(key, verses[n])\n          }\n\n          cb(buildVerseList(volume, book, chapter, verses))\n        })\n      }\n    })\n  }\n\n  getVerse(volume, book, chapter, verse, cb) {\n    this.getVerses(volume, book, chapter, function (verseList) {\n      cb(verseList[verse - 1])\n    })\n  }\n}\n\nexport default Scriptures\n","import React from 'react'\n\nimport LoadingBar from '../LoadingBar'\nimport Scriptures from '../../firebase/Scriptures'\n\nfunction buildButton(volume, label) {\n  const classes = \"text-capitalize text-white btn btn-success btn-lg\"\n  const href = '#/scriptures/' + volume + '/' + label\n\n  return (\n    <div key={href} className=\"col-lg-4 col-md-4 col-sm-12 text-center text-nowrap p-3\">\n      <a href={href} role=\"button\" className={classes}>{label.replace(/_/g, ' ')}</a>\n    </div>\n  )\n}\n\nfunction BookListPage({ match: { params: { volume } } }) {\n  const [books, setBooks] = React.useState([])\n  const scriptures = new Scriptures()\n\n  React.useEffect(() => {\n    scriptures.getBooks(volume, setBooks)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  let content;\n  if (books.length === 0) {\n    content = <LoadingBar />\n  }\n  else {\n    content = books.map(label => buildButton(volume, label))\n  }\n\n  return (\n    <div>\n      <h2 className=\"text-capitalize\">{volume.replace(/_/g, ' ')}</h2>\n      <div className=\"row\">\n        {content}\n      </div>\n    </div>\n  )\n}\n\nexport default BookListPage\n","import React from 'react'\n\nfunction toBreadcrumb(segment) {\n  return segment.replace(/_/g, ' ')\n}\n\nfunction Breadcrumb(props) {\n  const segments = ['home'].concat(props.location.pathname.substring(1).split('/').filter(seg => seg !== \"\"))\n  let href = '#'\n  const crumbs = segments.map(function (s, i) {\n    let last = i === segments.length - 1\n\n    if (i > 0) {\n      href += '/' + s\n    }\n\n    let label = <a href={href}>{toBreadcrumb(s)}</a>\n\n    let classNames = \"breadcrumb-item text-capitalize\"\n    if (last) {\n      classNames += \" active\"\n      label = toBreadcrumb(s)\n    }\n\n    return (\n      <li key={href} className={classNames}>\n        {label}\n      </li>\n    )\n  })\n\n  return (\n    <div style={{ backgroundColor: '#e9ecef' }}>\n      <div className=\"container\">\n        <ol className=\"breadcrumb\" style={{ marginBottom: '0' }}>\n          {crumbs}\n        </ol>\n      </div>\n    </div>\n  )\n}\n\nexport default Breadcrumb\n","import React from 'react'\n\nimport LoadingBar from '../LoadingBar'\nimport Scriptures from '../../firebase/Scriptures'\n\nfunction buildButton(volume, book, chapter) {\n  const classes = \"text-capitalize text-white btn btn-success btn-lg\"\n  const href = '#/scriptures/' + volume + '/' + book + '/' + chapter\n\n  return (\n    <div key={href} className=\"col-lg-1 col-md-1 col-sm-12 text-center text-nowrap p-3\">\n      <a href={href} role=\"button\" className={classes}>{chapter}</a>\n    </div>\n  )\n}\n\nfunction ChapterListPage({ match: { params: { volume, book } } }) {\n  const [chapterCount, setChapterCount] = React.useState(0)\n  const scriptures = new Scriptures()\n\n  React.useEffect(() => {\n    scriptures.getChapterCount(volume, book, setChapterCount)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  let content;\n  if (chapterCount === 0) {\n    content = <LoadingBar />\n  }\n  else {\n    content = []\n    for (let c = 1; c <= chapterCount; c++) {\n      content.push(buildButton(volume, book, c))\n    }\n  }\n\n  return (\n    <div>\n      <h3 className=\"text-capitalize\">{book.replace(/_/g, ' ')}</h3>\n      <div className=\"row\">\n        {content}\n      </div>\n    </div>\n  )\n}\n\nexport default ChapterListPage\n","import React from 'react'\n\nconst VerseHighlightContext = React.createContext({});\n\nexport default VerseHighlightContext\n","import { Redirect } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport React from 'react'\n\nimport Verse from '../model/Verse'\nimport VerseHighlightContext from './VerseHighlightContext'\n\nfunction SingleVerse({ verse, clickable }) {\n  const [redirect, setRedirect] = React.useState()\n  const highlightContext = React.useContext(VerseHighlightContext)\n\n  let divStyle = \"m-1 p-1 rounded \"\n  if (clickable) {\n    divStyle += \" clickable-verse\"\n  }\n\n  let clickHandler;\n  if (clickable) {\n    clickHandler = () => setRedirect(verse.getHref())\n  }\n\n  if (redirect !== undefined) {\n    return <Redirect to={redirect} />\n  }\n\n  let verseContent = verse.text\n  const h = highlightContext.highlight\n  if (h !== undefined && h.first !== h.last) {\n    const words = verse.text.split(' ')\n    verseContent = [\n      <span key=\"before\">{words.slice(0, h.first).join(' ') + ' '}</span>,\n      <span key=\"highlighted\" className=\"verse-highlight rounded\">\n        {words.slice(h.first, h.last).join(' ')}\n      </span>,\n      <span key=\"after\">{' ' + words.slice(h.last).join(' ')}</span>\n    ]\n  }\n\n  return (\n    <div className={divStyle} onClick={clickHandler}>\n      <p className=\"text-justify\">\n        <span className=\"font-weight-bold mr-1\">{verse.n}</span>\n        <span>{verseContent}</span>\n      </p>\n    </div>\n  )\n}\n\nSingleVerse.propTypes = {\n  verse: PropTypes.instanceOf(Verse).isRequired,\n  clickable: PropTypes.bool\n}\n\nexport default SingleVerse\n","import firebase from 'firebase/app'\nimport firebaseApp from './FirebaseConfig'\n\nimport 'firebase/firestore'\nimport getContentId from '../util/ContentId'\n\nconst db = firebase.firestore(firebaseApp)\n\nfunction buildInsight(doc) {\n  let data = doc.data()\n\n  let i = {\n    id: doc.id,\n    deltaOps: data['o'],\n    source: {\n      label: data['s']['l'],\n      link: data['s']['a']\n    },\n    created: data['c'] ? data['c'].toDate() : null,\n    updated: data['u'] ? data['u'].toDate() : null\n  }\n\n  if (data['f'] !== undefined) {\n    i.fragment = data['f']\n  }\n\n  return i\n}\n\nclass Insights {\n\n  getInsights(content, cb) {\n    const cid = getContentId(content)\n    db.collection('insights').where('cid', '==', cid).get().then(function (querySnapshot) {\n      cb(querySnapshot.docs.map(buildInsight))\n    }).catch(function (err) {\n      console.error('Error fetching insights for content. cid: ', cid, err)\n    })\n  }\n\n  saveInsight(insight) {\n    let data = {\n      cid: getContentId(insight.content),\n      o: insight.deltaOps,\n      s: {\n        l: insight.source.label,\n        a: insight.source.link\n      },\n      u: firebase.firestore.FieldValue.serverTimestamp()\n    }\n\n    if (insight.fragment !== undefined) {\n      data.f = insight.fragment\n    }\n\n    if (insight.id === undefined) {\n      // CREATE\n      data.c = firebase.firestore.FieldValue.serverTimestamp()\n      return db.collection('insights').add(data)\n    }\n    else {\n      // UPDATE\n      data.c = insight.created\n      return db.collection('insights').doc(insight.id).set(data)\n    }\n  }\n\n  deleteInsight(insight) {\n    return db.collection('insights').doc(insight.id).delete()\n  }\n\n}\n\nexport default Insights\n","import PropTypes from 'prop-types'\nimport React from 'react'\nimport { QuillDeltaToHtmlConverter } from 'quill-delta-to-html'\nimport parse from 'html-react-parser'\n\nimport VerseHighlightContext from './VerseHighlightContext'\n\nfunction SingleInsight({ insight }) {\n  const highlightContext = React.useContext(VerseHighlightContext)\n\n  let source = insight.source.label\n  if (insight.source.link !== undefined && insight.source.link !== '') {\n    source = <a className=\"text-danger\" href={insight.source.link} target=\"_blank\" rel=\"noopener noreferrer\">{insight.source.label}</a>\n  }\n\n  function updateHighlight(start, end) {\n    if (insight.fragment) {\n      highlightContext.updateHighlight(start, end)\n    }\n  }\n\n  const insightHtml = new QuillDeltaToHtmlConverter(insight.deltaOps, {}).convert()\n\n  return (\n    <div className=\"insight m-1 p-1\"\n      onMouseEnter={() => insight.fragment ? updateHighlight(insight.fragment[0], insight.fragment[1]) : null}\n      onMouseLeave={() => updateHighlight(0, 0)}>\n      <div className=\"text-justify\">\n        {source && <span className=\"text-danger pr-2\">({source})</span>}\n        {parse(insightHtml)}\n        {insight.created && <span className=\"text-secondary small float-right\">{insight.created.getMonth() + 1}/{insight.created.getDate()}/{insight.created.getFullYear()}</span>}\n        <div className=\"clearfix\" />\n      </div>\n    </div>\n  )\n}\n\nSingleInsight.propTypes = {\n  insight: PropTypes.object.isRequired\n}\n\nexport default SingleInsight\n","import React from 'react'\n\nimport SingleInsight from './SingleInsight'\n\nfunction EditableInsight({ user, verse, insight, toggle, setInsight }) {\n\n  function editInsight() {\n    setInsight(insight)\n    toggle()\n  }\n\n  const btn = <button\n    key={'edit-' + insight.id}\n    type=\"button\"\n    className=\"btn btn-success float-right ml-2\"\n    onClick={editInsight}>Edit Insight</button>\n\n  return (\n    <li key={insight.id}>\n      <SingleInsight key={insight.id} verse={verse} insight={insight} />\n      {user.status === 'LOGGED_IN' ? btn : null}\n      <div style={{ clear: 'both' }}></div>\n    </li>\n  )\n}\n\nexport default EditableInsight\n","import React from 'react'\n\nimport noUiSlider from 'nouislider'\nimport VerseHighlightContext from './VerseHighlightContext'\n\nfunction FragmentSelector({text, insight, setInsight}) {\n  const highlightContext = React.useContext(VerseHighlightContext)\n  const sliderRef = React.createRef()\n\n  React.useEffect(() => {\n    const lastWord = text.split(' ').length\n\n    const { current: sliderNode } = sliderRef\n    noUiSlider.create(sliderNode, {\n      start: insight.fragment,\n      connect: true,\n      range: {\n        'min': 0,\n        'max': lastWord\n      },\n      step: 1\n    })\n\n    sliderNode.noUiSlider.on('update', function (values, handle) {\n      setInsight(i => ({ ...i, fragment: values.map(n => n | 0) })) // Force ints\n      highlightContext.updateHighlight(values[0], values[1])\n    })\n\n    return () => {\n      sliderNode.noUiSlider.destroy()\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <div className=\"form-group\">\n      <label htmlFor=\"phrase\">Phrase Highlight</label>\n      <div ref={sliderRef} />\n    </div>\n  )\n\n}\n\nexport default FragmentSelector\n","import React from 'react'\nimport Quill from 'quill'\n\nimport PropTypes from 'prop-types'\nimport Insights from '../firebase/Insights'\nimport FragmentSelector from './FragmentSelector'\nimport SingleVerse from './SingleVerse'\n\nfunction InsightEditor({ content, verse, insight, setInsight, toggle }) {\n  const editorRef = React.createRef()\n\n  const [isSubmitting, setSubmitting] = React.useState(false)\n\n  const insights = new Insights()\n\n  function handleSubmit(event) {\n    setSubmitting(true)\n\n    insight.content = content\n    insights.saveInsight(insight).then(function () {\n      setSubmitting(false);\n      toggle()\n    }).catch(function (err) {\n      console.error('An error occurred while saving insight: ', err)\n      setSubmitting(false);\n    })\n\n    event.preventDefault()\n  }\n\n  React.useEffect(() => {\n    let quill = new Quill(editorRef.current, {\n      theme: 'snow',\n      placeholder: 'Record the insight here...'\n    })\n\n    if (insight.deltaOps) {\n      quill.setContents(insight.deltaOps)\n    }\n\n    quill.on('text-change', function (d, od, s) {\n      setInsight(i => ({ ...i, deltaOps: quill.getContents().ops }))\n    });\n\n    return () => {\n      // No cleanup necessary for Quill.\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n        {verse && <label>Verse</label>}\n        {verse && <SingleVerse verse={verse} />}\n\n        {verse && <FragmentSelector insight={insight} setInsight={setInsight} text={verse.text} />}\n\n        <div className=\"form-group\">\n          <label htmlFor=\"source-label\">Source Label</label>\n          <input type=\"text\" id=\"source-label\" className=\"form-control\" required\n            value={insight.source.label}\n            onChange={event => setInsight({ ...insight, source: { ...insight.source, label: event.target.value } })} />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"source-link\">Source Link</label>\n          <input type=\"url\" id=\"source-link\" className=\"form-control\"\n            value={insight.source.link}\n            onChange={event => setInsight({ ...insight, source: { ...insight.source, link: event.target.value } })} />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"insight-text\">Insight</label>\n          <div ref={editorRef} id=\"insight-text\"></div>\n        </div>\n\n        <button type=\"submit\" className=\"btn btn-success float-right\" disabled={isSubmitting}>Save</button>\n        <button type=\"button\" className=\"btn btn-danger mr-3 float-right\" onClick={toggle} disabled={isSubmitting}>Cancel</button>\n      </form>\n    </div>\n  )\n}\n\nInsightEditor.propTypes = {\n  content: PropTypes.array.isRequired,\n  verse: PropTypes.object,\n  insight: PropTypes.object.isRequired,\n  setInsight: PropTypes.func.isRequired,\n  toggle: PropTypes.func.isRequired\n}\n\nexport default InsightEditor\n","import React from 'react'\nimport ReactModal from 'react-modal'\n\nimport InsightEditor from './InsightEditor'\nimport SingleInsight from './SingleInsight'\n\nfunction InsightEditorModal({ editing, content, verse, insight, setInsight, toggle }) {\n\n  return (\n    <ReactModal\n      isOpen={editing}\n      onRequestClose={() => toggle()}>\n      <div className=\"row\">\n        <div className=\"col-lg-6 col-md-6 col-sm-12\">\n          <h4>Edit Insight</h4>\n          <hr />\n          <InsightEditor\n            content={content}\n            verse={verse}\n            insight={insight}\n            setInsight={setInsight}\n            toggle={toggle} />\n        </div>\n        <div className=\"col-lg-6 col-md-6 col-sm-12\">\n          <h4>Preview</h4>\n          <hr />\n          <SingleInsight insight={insight} />\n        </div>\n      </div>\n    </ReactModal>\n  )\n}\n\nexport default InsightEditorModal\n","import firebase from 'firebase/app'\nimport firebaseApp from './FirebaseConfig'\nimport uuidv4 from 'uuid/v4'\n\nimport 'firebase/firestore'\nimport 'firebase/storage'\nimport getContentId from '../util/ContentId'\n\nconst storage = firebase.storage(firebaseApp)\nconst db = firebase.firestore(firebaseApp)\n\n\nfunction buildFile(doc) {\n  let data = doc.data()\n\n  return storage\n    .ref('uploads/' + data['uuid'] + '/' + data['n'])\n    .getDownloadURL()\n    .then(function (url) {\n      return {\n        id: doc.id,\n        uuid: data['uuid'],\n        name: data['n'],\n        extension: data['e'],\n        scriptureTags: data['cids'],\n        url: url,\n        size: data['b'],\n        created: data['c'] ? data['c'].toDate() : null,\n        updated: data['u'] ? data['u'].toDate() : null\n      }\n    })\n}\n\nclass Files {\n\n  getFiles(content) {\n    const cid = getContentId(content)\n    return db\n      .collection('uploads')\n      .where('cids', 'array-contains', cid)\n      .where('s', '==', 1)\n      .get()\n      .then(function (querySnapshot) {\n        return Promise.all(querySnapshot.docs.map(buildFile))\n      }).catch(function (err) {\n        console.error('Error fetching files for content. cid:', cid, err)\n      })\n  }\n\n  saveFile(fileObj, metadata, progressCb, cb) {\n    const uuid = uuidv4()\n\n    // 1. Save DB record with incomplete upload status\n    let fileData = {\n      uuid: uuid,\n      n: metadata.name,    // Name, including extension\n      s: 0,                // Status: uploading\n      b: fileObj.size,     // Bytes\n      e: metadata.extension,\n      cids: metadata.scriptureTags,\n      c: firebase.firestore.FieldValue.serverTimestamp(),\n      u: firebase.firestore.FieldValue.serverTimestamp()\n    }\n\n    db.collection('uploads').add(fileData).then(function (dbRef) {\n      // 2. Upload file\n      const storageRef = storage.ref('uploads/' + uuid + '/' + metadata.name)\n\n      var uploadTask = storageRef.put(fileObj)\n      uploadTask.on('state_changed', function (snapshot) {\n        progressCb(0 | snapshot.bytesTransferred / snapshot.totalBytes * 100)\n      }, function (error) {\n        console.log('Error while uploading file. ', fileData, error)\n        cb(null, error)\n      }, function () {\n        dbRef.update({\n          s: 1\n        }).then(cb).catch(function (error) {\n          console.error(\"Error while finalizing upload: \", error)\n          cb(null, error)\n        })\n      })\n    }).catch(function (error) {\n      console.error(\"Error while precommitting upload: \", error)\n      cb(null, error)\n    })\n  }\n\n}\n\nexport default Files\n","import React from 'react'\n\nimport DropdownTreeSelect from 'react-dropdown-tree-select'\nimport LoadingBar from './LoadingBar'\nimport Scriptures from '../firebase/Scriptures'\nimport getContentId from '../util/ContentId'\n\nfunction getLabel(id) {\n  return id.replace(/_/g, ' ').replace(/(?:^|\\s|-)\\w/g, c => c.toUpperCase())\n}\n\nfunction buildDataTree(initialCid, scriptures, setData) {\n  let d = []\n  scriptures.getVolumes(volumes => {\n    volumes.forEach(v => {\n      let bookChildren = []\n      scriptures.getBooks(v, books => {\n        books.forEach(b => {\n          let chapterChildren = []\n          scriptures.getChapterCount(v, b, chapterCount => {\n            for (let c = 1; c <= chapterCount; c++) {\n              let verseChildren = []\n              scriptures.getVerseCount(v, b, c, verseCount => {\n                for (let n = 1; n <= verseCount; n++) {\n                  let cid = getContentId([v, b, c, n])\n                  let child = {\n                    label: getLabel(b + ' ' + c + ':' + n),\n                    value: cid\n                  }\n\n                  if (initialCid === cid) {\n                    child['checked'] = true\n                  }\n\n                  verseChildren.push(child)\n                }\n\n                let cid = getContentId([v, b, c])\n                let child = {\n                  label: getLabel(b + ' ' + c),\n                  value: cid,\n                  children: verseChildren\n                }\n\n                if (initialCid === cid) {\n                  child['checked'] = true\n                }\n\n                chapterChildren.push(child)\n              })\n            }\n          })\n\n          bookChildren.push({\n            label: getLabel(b),\n            value: getContentId([v, b]),\n            children: chapterChildren\n          })\n        })\n      })\n\n      d.push({\n        label: getLabel(v),\n        value: getContentId([v]),\n        children: bookChildren\n      })\n    })\n\n    setData(d)\n  })\n}\n\nfunction ScriptureTagSelector({ content, onScriptureTagChange }) {\n\n  const scriptures = new Scriptures()\n  const [data, setData] = React.useState(null)\n\n  const cid = getContentId(content)\n\n  React.useEffect(() => {\n    buildDataTree(cid, scriptures, setData)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const onChange = (_, selectedNodes) => {\n    onScriptureTagChange(selectedNodes.map(n => n.value))\n  }\n\n  // Because I don't yet see how you're supposed to manage state with this component,\n  // I have to bootstrap the initial state myself.\n  onScriptureTagChange([cid])\n\n  return (\n    <>\n      {data ?\n        <DropdownTreeSelect\n          className=\"tree-select\"\n          texts={{ placeholder: 'Search' }}\n          data={data}\n          onChange={onChange}\n          clearSearchOnChange={true} /> :\n        <LoadingBar />}\n    </>\n  )\n}\n\nexport default ScriptureTagSelector\n","import React from 'react'\n\nimport Files from '../firebase/Files'\nimport ScriptureTagSelector from './ScriptureTagSelector'\n\n// Have to manage tag state external to React lifecycle\n// https://github.com/dowjones/react-dropdown-tree-select/issues/32\nlet extScriptureTags = []\n\nfunction FileUploader({ toggle, ...props }) {\n\n  const files = new Files()\n\n  const [data, setData] = React.useState({\n    files: '',\n    name: '',\n    extension: ''\n  })\n  const [progress, setProgress] = React.useState(0)\n  const [isSubmitting, setSubmitting] = React.useState(false)\n\n  function onScriptureTagChange(tags) {\n    extScriptureTags = tags\n  }\n\n  function handleSubmit(event) {\n    let localTags = extScriptureTags\n    extScriptureTags = []\n\n    setSubmitting(true)\n    files.saveFile(data.file, {\n      name: data.name,\n      extension: data.extension,\n      scriptureTags: localTags\n    }, setProgress, function (data, error) {\n      if (error) {\n        console.error(\"Error while saving file: \", error)\n      }\n      setSubmitting(false)\n      toggle()\n    })\n\n    event.preventDefault()\n  }\n\n  return (\n    <div>\n      <form onSubmit={handleSubmit}>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"source-label\">File</label>\n          <input\n            type=\"file\"\n            id=\"file-item\"\n            className=\"form-control-file\"\n            onChange={e => {\n              const segments = e.target.files[0].name.split('.')\n              setData({\n                ...data,\n                file: e.target.files[0],\n                extension: segments[segments.length - 1],\n                name: e.target.files[0].name\n              })\n            }}\n            required />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"file-name\">Display Name</label>\n          <input\n            type=\"text\"\n            id=\"file-name\"\n            className=\"form-control\"\n            value={data.name}\n            onChange={e => {\n              setData({ ...data, name: e.target.value })\n            }}\n            required />\n          <small id=\"name-help\" className=\"form-text text-muted\">\n            This name will be used in the attachments list.\n          </small>\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"scripture-tags\">Scripture Tags</label>\n          <ScriptureTagSelector onScriptureTagChange={onScriptureTagChange} {...props} />\n          <small id=\"scripture-tags-help\" className=\"form-text text-muted\">\n            This file will be associated with these scripture references.\n          </small>\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"topic-tags\">Topic Tags</label>\n\n          <small id=\"topic-tags-help\" className=\"form-text text-muted\">\n            This file will be associated with these topics.\n          </small>\n        </div>\n\n        <button type=\"submit\" className=\"btn btn-success float-right\" disabled={isSubmitting}>Save</button>\n        <button type=\"button\" className=\"btn btn-danger mr-3 float-right\" onClick={toggle} disabled={isSubmitting}>Cancel</button>\n        <div className=\"clearfix\"></div>\n\n        <div className=\"my-3\"></div>\n        {isSubmitting ?\n          <div>\n            <label>Upload Progress: {progress}%</label>\n            <div className=\"progress\">\n              <div\n                className=\"progress-bar progress-bar-striped progress-bar-animated\"\n                role=\"progressbar\"\n                aria-valuenow={progress}\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                style={{ width: progress + '%' }} />\n            </div>\n          </div> : null}\n      </form>\n    </div>\n  )\n}\n\nexport default FileUploader\n","import React from 'react'\nimport ReactModal from 'react-modal'\n\nimport FileUploader from './FileUploader'\n\nfunction FileUploaderModal({ uploading, toggle, ...props }) {\n\n  return (\n    <ReactModal\n      isOpen={uploading}\n      onRequestClose={toggle}>\n      <div className=\"row\">\n        <div className=\"col-lg-3 col-md-0 col-sm-0\"></div>\n        <div className=\"col-lg-6 col-md-12 col-sm-12\">\n          <h4>Upload File</h4>\n          <hr />\n          <FileUploader toggle={toggle} {...props} />\n        </div>\n        <div className=\"col-lg-3 col-md-0 col-sm-0\"></div>\n      </div>\n    </ReactModal>\n  )\n}\n\nexport default FileUploaderModal\n","import React from 'react'\nimport firebase from 'firebase/app'\nimport firebaseApp from '../firebase/FirebaseConfig'\n\nimport 'firebase/auth'\nimport 'firebase/firestore'\n\nconst db = firebase.firestore(firebaseApp)\n\nfunction userIsAuthorized(email) {\n  const docRef = db.collection('users').doc(email)\n\n  return new Promise((resolve, reject) => {\n    docRef.get().then((doc) => {\n      if (doc.exists && doc.data()['admin'] === true) {\n        resolve(true)\n      }\n      else {\n        resolve(false)\n      }\n    }).catch((error) => {\n      console.error(\"Error getting document: \", error)\n      reject(error)\n    })\n  })\n}\n\nfunction firebaseUserReducer(state, action) {\n  switch (action.type) {\n    case 'LOGGED_OUT':\n      return {\n        user: null,\n        status: 'LOGGED_OUT'\n      }\n    case 'PENDING':\n      return {\n        user: action.user,\n        status: 'PENDING'\n      }\n    case 'LOGGED_IN':\n      return {\n        user: action.user,\n        status: 'LOGGED_IN'\n      }\n    case 'UNAUTHORIZED':\n      return {\n        user: action.user,\n        status: 'UNAUTHORIZED'\n      }\n    default:\n      throw new Error()\n  }\n}\n\n/**\n * Custom hook for accessing the current firebase user, if one is logged in.\n */\nfunction useFirebaseUser() {\n  const [state, dispatch] = React.useReducer(firebaseUserReducer, {\n    user: null,\n    status: 'LOGGED_OUT'\n  })\n\n  React.useEffect(() => {\n    return firebase.auth().onAuthStateChanged((user) => {\n      if (user === null) {\n        dispatch({ type: 'LOGGED_OUT' })\n      }\n      else {\n        dispatch({ type: 'PENDING', user })\n        userIsAuthorized(user.email).then((isAuthorized) => {\n          if (isAuthorized) {\n            dispatch({ type: 'LOGGED_IN', user })\n          }\n          else {\n            dispatch({ type: 'UNAUTHORIZED', user })\n          }\n        })\n      }\n    });\n  }, [])\n\n  return state\n}\n\nexport default useFirebaseUser\n","import React from 'react'\nimport prettyBytes from 'pretty-bytes'\n\nfunction FilesTable({ files }) {\n  let fileRows = files.map(f => (\n    <tr key={f.id}>\n      <td><a href={f.url} target=\"_blank\" rel=\"noopener noreferrer\">{f.name}</a></td>\n      <td>{prettyBytes(f.size)}</td>\n    </tr>\n  ))\n\n  return (\n    <table className=\"table table-hover\">\n      <thead>\n        <tr className=\"table-primary\">\n          <th scope=\"col\">File</th>\n          <th scope=\"col\">Size</th>\n        </tr>\n      </thead>\n      <tbody>\n        {fileRows}\n      </tbody>\n    </table>\n  )\n}\n\nexport default FilesTable\n","import React from 'react'\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\n\nimport LoadingBar from '../LoadingBar'\nimport Scriptures from '../../firebase/Scriptures'\nimport SingleVerse from '../SingleVerse'\nimport Insights from '../../firebase/Insights'\nimport EditableInsight from '../EditableInsight'\nimport InsightEditorModal from '../InsightEditorModal'\nimport FileUploaderModal from '../FileUploaderModal'\nimport useFirebaseUser from '../../firebase/FirebaseUser'\nimport Files from '../../firebase/Files';\nimport FilesTable from '../FilesTable';\n\nconst DEFAULT_INSIGHT = {\n  source: {\n    label: '',\n    link: ''\n  },\n  deltaOps: []\n}\n\nfunction ChapterTextPage({ match: { params: { volume, book, chapter } } }) {\n  const user = useFirebaseUser()\n  const content = [volume, book, chapter]\n\n  const [verses, setVerses] = React.useState([])\n  const [insights, setInsights] = React.useState(null)\n  const [files, setFiles] = React.useState(null)\n\n  const [editing, setEditing] = React.useState(false)\n  const [uploading, setUploading] = React.useState(false)\n  const [newInsight, setNewInsight] = React.useState(DEFAULT_INSIGHT)\n\n  const scriptures = new Scriptures()\n  const insightsStore = new Insights()\n  const filesStore = new Files()\n\n  React.useEffect(() => {\n    scriptures.getVerses(volume, book, chapter, setVerses)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  React.useEffect(() => {\n    insightsStore.getInsights(content, setInsights)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editing])\n\n  React.useEffect(() => {\n    filesStore.getFiles(content).then(files => setFiles(files))\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [uploading])\n\n  let chapterContent\n  if (verses.length === 0) {\n    chapterContent = <LoadingBar />\n  }\n  else {\n    chapterContent = verses.map(v => <SingleVerse key={v.getHref()} verse={v} clickable={true} />)\n  }\n\n  let insightContent\n  if (insights === null) {\n    insightContent = <LoadingBar />\n  }\n  else {\n    insightContent = insights.map(i => <EditableInsight\n      key={i.id}\n      user={user}\n      insight={i}\n      toggle={toggleEditing}\n      setInsight={setNewInsight} />)\n  }\n\n  let filesContent\n  if (files === null) {\n    filesContent = <LoadingBar />\n  }\n  else {\n    filesContent = <FilesTable files={files} />\n  }\n\n  function toggleEditing() {\n    setEditing(!editing)\n  }\n\n  function addNewInsight() {\n    setNewInsight(DEFAULT_INSIGHT)\n    toggleEditing()\n  }\n\n  function toggleUploading() {\n    setUploading(!uploading)\n  }\n\n  function addNewFile() {\n    toggleUploading()\n  }\n\n  return (\n    <div>\n      {editing ? <InsightEditorModal\n        editing={editing}\n        content={content}\n        insight={newInsight}\n        setInsight={setNewInsight}\n        toggle={toggleEditing} /> : null}\n\n      {uploading ? <FileUploaderModal\n        uploading={uploading}\n        toggle={toggleUploading}\n        content={content} /> : null}\n\n      <Tabs>\n        <div className=\"row\">\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <h4 className=\"text-capitalize\">{book.replace(/_/g, ' ')} {chapter}</h4>\n          </div>\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <TabList>\n              <Tab>\n                Chapter Insights\n                {user.status === 'LOGGED_IN' && <button className=\"ml-2 btn btn-success\" onClick={addNewInsight}>Add</button>}\n              </Tab>\n              <Tab>\n                Additional Resources\n                {user.status === 'LOGGED_IN' && <button className=\"ml-2 btn btn-success\" onClick={addNewFile}>Upload</button>}\n              </Tab>\n            </TabList>\n            <div className=\"clearfix\"></div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <hr />\n          </div>\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            {/* <hr /> */}\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            {chapterContent}\n          </div>\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <TabPanel>\n              <ol>\n                {insightContent}\n              </ol>\n            </TabPanel>\n            <TabPanel>\n              {filesContent}\n            </TabPanel>\n          </div>\n        </div>\n      </Tabs>\n    </div>\n  )\n}\n\nexport default ChapterTextPage\n","import React from 'react'\nimport { withRouter } from 'react-router-dom';\nimport useFirebaseUser from '../firebase/FirebaseUser'\n\nfunction Footer(props) {\n\n  const userState = useFirebaseUser()\n\n  const href = \"#/login?return=\" + props.location.pathname\n\n  let loginButton\n  if (userState.status === 'LOGGED_OUT') {\n    loginButton = <a className=\"text-muted\" href={href}>Login</a>\n  }\n\n  return (\n    <footer className=\"page-footer font-small bg-light fixed-bottom\">\n      <div className=\"container\">\n        <div className=\"footer-copyright text-center py-2\">\n          <span className=\"mr-1\"> 2019 Copyright:</span>\n          <a href={process.env.PUBLIC_URL}>{process.env.PUBLIC_URL.replace('https://', '')}</a>\n        </div>\n        <div className=\"text-center py-2\">\n          {loginButton}\n        </div>\n      </div>\n    </footer>\n  )\n}\n\nexport default withRouter(Footer)\n","function HomePage() {\n  return null\n}\n\nexport default HomePage\n","function compareInsightsByFragmentAndSource(a, b) {\n  function compareIdx(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0\n  }\n\n  let r = compareIdx(a.fragment[0], b.fragment[0])\n  if (r === 0) {\n    r = compareIdx(a.fragment[1], b.fragment[1])\n  }\n\n  // If the fragments are equivalent, sort by the source label.\n  if (r === 0) {\n    r = a.source.label.localeCompare(b.source.label)\n  }\n\n  return r\n}\n\nfunction fragmentEq(f1, f2) {\n  return f1[0] === f2[0] && f1[1] === f2[1]\n}\n\nfunction groupInsightsByFragment(insights) {\n  if (insights.length === 0) {\n    return insights\n  }\n\n  let groups = []\n\n  let f = insights[0].fragment\n  let g = []\n  insights.forEach(i => {\n    if (fragmentEq(f, i.fragment)) {\n      g.push(i)\n    }\n    else {\n      groups.push(Array.from(g))\n      f = i.fragment\n      g = [i]\n    }\n  })\n\n  if (g.length !== 0) {\n    groups.push(g)\n  }\n\n  return groups\n}\n\nfunction groupInsights(insights) {\n  insights.sort(compareInsightsByFragmentAndSource)\n  return groupInsightsByFragment(insights)\n}\n\nexport default groupInsights\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport EditableInsight from './EditableInsight'\nimport Verse from '../model/Verse'\nimport useFirebaseUser from '../firebase/FirebaseUser'\n\nfunction buildInsight(user, verse, insight, toggle, setInsight) {\n  return <EditableInsight\n    key={insight.id}\n    user={user}\n    verse={verse}\n    insight={insight}\n    toggle={toggle}\n    setInsight={setInsight} />\n}\n\nfunction InsightGroup({ verse, insightGroup, toggle, setInsight }) {\n  const user = useFirebaseUser()\n\n  let f = insightGroup[0].fragment\n  let phrase = verse.text.split(' ').slice(f[0], f[1]).join(' ')\n\n  return (\n    <>\n      <div key={f}>\n        <p className=\"text-primary font-italic\">{phrase}</p>\n      </div>\n      <ol>\n        {insightGroup.map((i, idx) => buildInsight(user, verse, i, toggle, setInsight, idx))}\n      </ol>\n      <hr />\n    </>\n  )\n}\n\nInsightGroup.propTypes = {\n  verse: PropTypes.instanceOf(Verse).isRequired\n}\n\nexport default InsightGroup\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport LoadingBar from './LoadingBar'\nimport Verse from '../model/Verse'\nimport groupInsights from '../util/InsightGroups'\nimport InsightGroup from './InsightGroup'\n\nfunction InsightList({ verse, insights, toggle, setInsight }) {\n\n  let insightContent\n  if (insights === undefined) {\n    insightContent = <LoadingBar />\n  }\n  else {\n    // Sort insights by fragment\n    const insightGroups = groupInsights(insights)\n    insightContent = insightGroups.map(function (ig, idx) {\n      return <InsightGroup key={idx} verse={verse} insightGroup={ig} toggle={toggle} setInsight={setInsight} />\n    })\n  }\n\n  return (\n    <>\n      {insightContent}\n    </>\n  )\n}\n\nInsightList.propTypes = {\n  verse: PropTypes.instanceOf(Verse).isRequired\n}\n\nexport default InsightList\n","import React from 'react'\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\n\nimport InsightEditorModal from '../InsightEditorModal'\nimport InsightList from '../InsightList'\nimport FileUploaderModal from '../FileUploaderModal'\nimport LoadingBar from '../LoadingBar'\nimport Scriptures from '../../firebase/Scriptures'\nimport Insights from '../../firebase/Insights'\nimport SingleVerse from '../SingleVerse'\nimport useFirebaseUser from '../../firebase/FirebaseUser'\nimport Files from '../../firebase/Files';\nimport FilesTable from '../FilesTable';\n\nconst DEFAULT_INSIGHT = {\n  source: {\n    label: '',\n    link: ''\n  },\n  deltaOps: [],\n  fragment: [0, 0]\n}\n\nfunction InsightListPage({ match: { params: { volume, book, chapter, verse: verseNumber } } }) {\n  const user = useFirebaseUser()\n  const content = [volume, book, chapter, verseNumber]\n\n  const [verse, setVerse] = React.useState()\n  const [insights, setInsights] = React.useState()\n  const [files, setFiles] = React.useState(null)\n\n  const [editing, setEditing] = React.useState(false)\n  const [uploading, setUploading] = React.useState(false)\n  const [newInsight, setNewInsight] = React.useState(DEFAULT_INSIGHT)\n\n  const scriptures = new Scriptures()\n  const insightsStore = new Insights()\n  const filesStore = new Files()\n\n  React.useEffect(() => {\n    scriptures.getVerse(volume, book, chapter, verseNumber, setVerse)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  React.useEffect(() => {\n    insightsStore.getInsights(content, setInsights)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editing])\n\n  React.useEffect(() => {\n    filesStore.getFiles(content).then(files => setFiles(files))\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [uploading])\n\n  let filesContent\n  if (files === null) {\n    filesContent = <LoadingBar />\n  }\n  else {\n    filesContent = <FilesTable files={files} />\n  }\n\n  function toggleEditing() {\n    setEditing(!editing)\n  }\n\n  function addNewInsight() {\n    setNewInsight(DEFAULT_INSIGHT)\n    toggleEditing()\n  }\n\n  function toggleUploading() {\n    setUploading(!uploading)\n  }\n\n  function addNewFile() {\n    toggleUploading()\n  }\n\n  return (\n    <div>\n      {verse ? <InsightEditorModal\n        editing={editing}\n        content={verse.getContent()}\n        verse={verse}\n        insight={newInsight}\n        setInsight={setNewInsight}\n        toggle={toggleEditing} /> : null}\n\n      {uploading ? <FileUploaderModal\n        uploading={uploading}\n        toggle={toggleUploading}\n        content={content} /> : null}\n\n      <Tabs>\n        <div className=\"row\">\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <h4 className=\"text-capitalize\">{book.replace(/_/g, ' ')} {chapter}:{verseNumber}</h4>\n          </div>\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <TabList>\n              <Tab>\n                Verse Insights\n                {user.status === 'LOGGED_IN' && <button className=\"ml-2 btn btn-success\" onClick={addNewInsight}>Add</button>}\n              </Tab>\n              <Tab>\n                Additional Resources\n                {user.status === 'LOGGED_IN' && <button className=\"ml-2 btn btn-success\" onClick={addNewFile}>Upload</button>}\n              </Tab>\n            </TabList>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <hr />\n          </div>\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            {/* <hr /> */}\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <div className={editing || uploading ? null : \"sticky-top\"}>\n              {verse ? <SingleVerse verse={verse} /> : <LoadingBar />}\n            </div>\n          </div>\n          <div className=\"col-lg-6 col-md-6 col-sm-12\">\n            <TabPanel>\n              {verse ? null : <LoadingBar />}\n              {verse ? <InsightList\n                verse={verse}\n                insights={insights}\n                toggle={toggleEditing}\n                setInsight={setNewInsight} /> : null}\n            </TabPanel>\n            <TabPanel>\n              {filesContent}\n            </TabPanel>\n          </div>\n        </div>\n      </Tabs>\n    </div>\n  )\n}\n\nexport default InsightListPage\n","import React from 'react';\nimport { Redirect } from 'react-router-dom'\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport firebase from 'firebase/app';\nimport useFirebaseUser from '../../firebase/FirebaseUser';\n\nconst uiConfig = {\n  signInFlow: 'popup',\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID\n  ],\n  callbacks: {\n    signInSuccessWithAuthResult: () => false\n  }\n}\n\nfunction LoginPage(props) {\n  const userState = useFirebaseUser()\n\n  React.useEffect(() => {\n    if (userState.status === 'UNAUTHORIZED') {\n      userState.user.delete().catch((error) => {\n        console.log(\"An error occurred while deleting an unauthorized user. \", error);\n      })\n    }\n  }, [userState])\n\n  let returnTo = props.location.search.split('=')[1]\n  if (returnTo === undefined || returnTo === '') {\n    returnTo = '/'\n  }\n\n  if (userState.status === 'UNAUTHORIZED') {\n    return <Redirect to=\"/unauthorized\" />\n  }\n  else if (userState.status === 'LOGGED_IN') {\n    return <Redirect to={returnTo} />\n  }\n  else {\n    return (\n      <div>\n        <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n      </div>\n    )\n  }\n}\n\nexport default LoginPage\n","import React from 'react';\nimport firebase from 'firebase/app';\nimport useFirebaseUser from '../firebase/FirebaseUser';\n\nfunction UserStatus () {\n\n  const userState = useFirebaseUser()\n\n  if (userState.status === 'LOGGED_IN') {\n    return (\n      <form className=\"form-inline my-2 my-lg-0\">\n        <span className=\"text-light my-2 mr-sm-2\">{userState.user.email}</span>\n        <button className=\"btn btn-success my-2 my-sm-0\" onClick={() => firebase.auth().signOut()} type=\"submit\">Logout</button>\n      </form>\n    )\n  }\n\n  return (\n    <></>\n  )\n}\n\nexport default UserStatus\n","import React from 'react'\nimport UserStatus from './UserStatus'\n\nfunction Navbar() {\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-dark bg-primary\">\n      <div className=\"container\">\n        <a className=\"navbar-brand\" href=\"#/\">Enjoy the Scriptures</a>\n\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul className=\"navbar-nav mr-auto\">\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/scriptures\">Scriptures</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/topics\">Topics</a>\n            </li>\n            <li className=\"nav-item\">\n              <a className=\"nav-link\" href=\"#/about\">About</a>\n            </li>\n          </ul>\n          <UserStatus />\n        </div>\n      </div>\n    </nav>\n  )\n}\n\nexport default Navbar\n","import React from 'react'\n\nfunction NotFoundPage() {\n  return (\n    <div className=\"alert alert-warning\">\n      <h4 className=\"alert-heading\">Not Found</h4>\n      <p className=\"mb-0\">The requested page does not exist.</p>\n      <a href=\"#/\" className=\"alert-link\">Return Home</a>\n    </div>\n  )\n}\n\nexport default NotFoundPage\n","import React from 'react'\n\nfunction UnauthorizedPage() {\n  return (\n    <div className=\"alert alert-danger\">\n      <h4 className=\"alert-heading\">User Not Found</h4>\n      <p className=\"mb-0\">You are not authorized to access this resource.</p>\n      <a className=\"alert-link\" href=\"#/\">Return Home</a>\n    </div>\n  )\n}\n\nexport default UnauthorizedPage\n","import React from 'react'\n\nimport LoadingBar from '../LoadingBar'\nimport Scriptures from '../../firebase/Scriptures'\n\nfunction buildButton(label) {\n  const classes = \"text-capitalize text-white btn btn-success btn-lg\"\n  const href = '#/scriptures/' + label\n\n  return (\n    <div key={href} className=\"col-lg-4 col-md-4 col-sm-12 text-center text-nowrap p-3\">\n      <a href={href} role=\"button\" className={classes}>{label.replace(/_/g, ' ')}</a>\n    </div>\n  )\n}\n\nfunction VolumeListPage() {\n  const [volumes, setVolumes] = React.useState([])\n  const scriptures = new Scriptures()\n\n  React.useEffect(() => {\n    scriptures.getVolumes(setVolumes)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  let content;\n  if (volumes.length === 0) {\n    content = <LoadingBar />\n  }\n  else {\n    content = volumes.map(buildButton)\n  }\n\n  return (\n    <div>\n      <h1>Scriptures</h1>\n\n      <div className=\"row\">\n        {content}\n      </div>\n    </div>\n  )\n}\n\nexport default VolumeListPage\n","import React from 'react'\nimport { HashRouter, Route, Switch, Redirect } from 'react-router-dom'\n\nimport AboutPage from './pages/AboutPage'\nimport Background from './Background'\nimport BookListPage from './pages/BookListPage'\nimport Breadcrumb from './Breadcrumb'\nimport ChapterListPage from './pages/ChapterListPage'\nimport ChapterTextPage from './pages/ChapterTextPage'\nimport Footer from './Footer'\nimport HomePage from './pages/HomePage'\nimport InsightListPage from './pages/InsightListPage'\nimport LoginPage from './pages/LoginPage'\nimport Navbar from './Navbar'\nimport NotFoundPage from './pages/NotFoundPage'\nimport UnauthorizedPage from './pages/UnauthorizedPage'\nimport useFirebaseUser from '../firebase/FirebaseUser'\nimport VolumeListPage from './pages/VolumeListPage'\nimport VerseHighlightContext from './VerseHighlightContext'\n\nfunction ComingSoonPage() {\n  return (\n    <header className=\"coming-soon\">\n      <h1 className=\"py-4 font-weight-bold\">Enjoy the Scriptures</h1>\n      <p className=\"py-4 font-weight-bold\">Coming Soon</p>\n    </header>\n  )\n}\n\nfunction App() {\n  const userState = useFirebaseUser()\n  const [highlight, setHighlight] = React.useState({ first: 0, last: 0 })\n\n  const contextState = {\n    highlight,\n    updateHighlight: (f, l) => setHighlight({ first: f, last: l })\n  }\n\n  if (userState.status === 'LOGGED_OUT') {\n    return (\n      <HashRouter basename='/'>\n        <div className=\"App\">\n          <Switch>\n            <Route exact path=\"/login\" component={LoginPage} />\n            <Route component={ComingSoonPage} />\n          </Switch>\n        </div>\n      </HashRouter>\n    )\n  }\n\n  return (\n    <HashRouter basename='/'>\n      <div className=\"App\">\n        <Navbar />\n        <Route path='/' component={Breadcrumb} />\n\n        <Route exact path=\"/\" component={Background} />\n\n        <VerseHighlightContext.Provider value={contextState}>\n          <div className=\"container py-5\">\n            <Switch>\n              <Route exact path=\"/\" component={HomePage} />\n              <Route exact path=\"/about\" component={AboutPage} />\n\n              {/* Scripture Notebook */}\n              <Route exact path=\"/scriptures\" component={VolumeListPage} />\n              <Route exact path=\"/scriptures/:volume\" component={BookListPage} />\n              <Route exact path=\"/scriptures/:volume/:book\" component={ChapterListPage} />\n              <Route exact path=\"/scriptures/:volume/:book/:chapter\" component={ChapterTextPage} />\n              <Route exact path=\"/scriptures/:volume/:book/:chapter/:verse\" component={InsightListPage} />\n\n              {/* Topical Index */}\n              <Route exact path=\"/topics\" />\n\n              {/* Login Related */}\n              <Route exact path=\"/login\" component={LoginPage} />\n              <Route exact path=\"/unauthorized\" component={UnauthorizedPage} />\n\n              {/* 404 */}\n              <Route exact path=\"/not_found\" component={NotFoundPage} />\n              <Redirect to=\"/not_found\" />\n            </Switch>\n          </div>\n        </VerseHighlightContext.Provider>\n\n        {/* Invisble placeholder to prevent the sticky footer from covering content */}\n        <div className=\"my-5\"></div>\n\n        <Footer />\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default App\n","import 'bootstrap/dist/css/bootstrap.min.css'\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js'\nimport 'nouislider/distribute/nouislider.min.css'\nimport 'quill/dist/quill.snow.css'\nimport 'react-dropdown-tree-select/dist/styles.css'\nimport 'react-tabs/style/react-tabs.css';\n\nimport './ets.css'\nimport './litera.min.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport ReactModal from 'react-modal'\n\nimport App from './components/App'\n\nReactModal.setAppElement('#root');\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}