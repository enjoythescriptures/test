(window.webpackJsonpenjoythescriptures=window.webpackJsonpenjoythescriptures||[]).push([[0],{27:function(e,t,a){e.exports=a(45)},29:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);a(28),a(29);var n=a(0),r=a.n(n),s=a(21),c=a.n(s),u=a(13),l=a(7),o=a(22),i=a.n(o),m=a(1),E=a.n(m),p=a(26);var h={apiKey:"AIzaSyDcWkM-EwFO9BrLbHAiZf_NcPKT1jg_B4M",authDomain:"enjoy-the-scriptures-test.firebaseapp.com",databaseURL:"https://enjoy-the-scriptures-test.firebaseio.com",projectId:"enjoy-the-scriptures-test",storageBucket:"",messagingSenderId:"854443437513",appId:"1:854443437513:web:b0f58f35a8d4a823c64c18",measurementId:"G-EDCKCQPLL0"},f=E.a.initializeApp(h),d=(a(19),a(38),E.a.firestore(f));function N(e,t){switch(t.type){case"LOGGED_OUT":return{user:null,status:"LOGGED_OUT"};case"PENDING":return{user:t.user,status:"PENDING"};case"LOGGED_IN":return{user:t.user,status:"LOGGED_IN"};case"UNAUTHORIZED":return{user:t.user,status:"UNAUTHORIZED"};default:throw new Error}}var g=function(){var e=r.a.useReducer(N,{user:null,status:"LOGGED_OUT"}),t=Object(p.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){return E.a.auth().onAuthStateChanged((function(e){null===e?n({type:"LOGGED_OUT"}):(n({type:"PENDING",user:e}),function(e){var t=d.collection("users").doc(e);return new Promise((function(e,a){t.get().then((function(t){t.exists&&!0===t.data().admin?e(!0):e(!1)})).catch((function(e){console.error("Error getting document: ",e),a(e)}))}))}(e.email).then((function(t){n(t?{type:"LOGGED_IN",user:e}:{type:"UNAUTHORIZED",user:e})})))}))}),[]),a},v={signInFlow:"popup",signInOptions:[E.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};var b=function(){var e=g();return r.a.useEffect((function(){"UNAUTHORIZED"===e.status&&e.user.delete().catch((function(e){console.log("An error occurred while deleting an unauthorized user. ",e)}))}),[e]),"UNAUTHORIZED"===e.status?r.a.createElement(l.a,{to:"/unauthorized"}):"LOGGED_IN"===e.status?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(i.a,{uiConfig:v,firebaseAuth:E.a.auth()}))},y=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Home"))},G=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"This is me."))};var O=function(){var e=g();return"LOGGED_IN"===e.status?r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("span",{className:"text-light my-2 mr-sm-2"},e.user.email),r.a.createElement("button",{className:"btn btn-success my-2 my-sm-0",onClick:function(){return E.a.auth().signOut()},type:"submit"},"Logout")):r.a.createElement(r.a.Fragment,null)};var I=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand",href:"#/"},"Enjoy the Scriptures"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#/about"},"About"))),r.a.createElement(O,null)))};var D=function(){var e;return"LOGGED_OUT"===g().status&&(e=r.a.createElement("a",{className:"text-muted",href:"#/login"},"Login")),r.a.createElement("footer",{className:"page-footer font-small bg-light fixed-bottom"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"footer-copyright text-center py-2"},"\xa9 2019 Copyright:\xa0",r.a.createElement("a",{href:"https://test.enjoythescriptures.org"},"https://test.enjoythescriptures.org")),r.a.createElement("div",{className:"text-center py-2"},e)))};function U(){return r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("h4",{className:"alert-heading"},"User Not Found"),r.a.createElement("p",{className:"mb-0"},"You are not authorized to access this resource."),r.a.createElement("a",{className:"alert-link",href:"#/"},"Return Home"))}var L=function(){return r.a.createElement(u.a,{basename:"/"},r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement("div",{className:"container py-5"},r.a.createElement(l.b,{exact:!0,path:"/",component:y}),r.a.createElement(l.b,{path:"/about",component:G}),r.a.createElement(l.b,{path:"/login",component:b}),r.a.createElement(l.b,{path:"/unauthorized",component:U})),r.a.createElement(D,null)))};c.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.37c3a41f.chunk.js.map